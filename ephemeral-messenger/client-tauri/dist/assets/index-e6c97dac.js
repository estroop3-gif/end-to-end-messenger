var Fg=Object.defineProperty;var Bg=(t,e,n)=>e in t?Fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Jt=(t,e,n)=>(Bg(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Vg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qf={exports:{}},Rl={},Kf={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var es=Symbol.for("react.element"),$g=Symbol.for("react.portal"),Wg=Symbol.for("react.fragment"),Ug=Symbol.for("react.strict_mode"),Hg=Symbol.for("react.profiler"),qg=Symbol.for("react.provider"),Kg=Symbol.for("react.context"),Jg=Symbol.for("react.forward_ref"),Qg=Symbol.for("react.suspense"),Yg=Symbol.for("react.memo"),Gg=Symbol.for("react.lazy"),Mc=Symbol.iterator;function Xg(t){return t===null||typeof t!="object"?null:(t=Mc&&t[Mc]||t["@@iterator"],typeof t=="function"?t:null)}var Jf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qf=Object.assign,Yf={};function Hr(t,e,n){this.props=t,this.context=e,this.refs=Yf,this.updater=n||Jf}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gf(){}Gf.prototype=Hr.prototype;function pu(t,e,n){this.props=t,this.context=e,this.refs=Yf,this.updater=n||Jf}var mu=pu.prototype=new Gf;mu.constructor=pu;Qf(mu,Hr.prototype);mu.isPureReactComponent=!0;var Ec=Array.isArray,Xf=Object.prototype.hasOwnProperty,gu={current:null},Zf={key:!0,ref:!0,__self:!0,__source:!0};function eh(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)Xf.call(e,r)&&!Zf.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:es,type:t,key:s,ref:l,props:i,_owner:gu.current}}function Zg(t,e){return{$$typeof:es,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yu(t){return typeof t=="object"&&t!==null&&t.$$typeof===es}function ey(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bc=/\/+/g;function ro(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ey(""+t.key):e.toString(36)}function As(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case es:case $g:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+ro(l,0):r,Ec(i)?(n="",t!=null&&(n=t.replace(bc,"$&/")+"/"),As(i,e,n,"",function(u){return u})):i!=null&&(yu(i)&&(i=Zg(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(bc,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Ec(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+ro(s,o);l+=As(s,e,n,a,i)}else if(a=Xg(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+ro(s,o++),l+=As(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function fs(t,e,n){if(t==null)return t;var r=[],i=0;return As(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ty(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _e={current:null},zs={transition:null},ny={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:zs,ReactCurrentOwner:gu};function th(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:fs,forEach:function(t,e,n){fs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fs(t,function(){e++}),e},toArray:function(t){return fs(t,function(e){return e})||[]},only:function(t){if(!yu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};F.Component=Hr;F.Fragment=Wg;F.Profiler=Hg;F.PureComponent=pu;F.StrictMode=Ug;F.Suspense=Qg;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ny;F.act=th;F.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qf({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=gu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)Xf.call(e,a)&&!Zf.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:es,type:t.type,key:i,ref:s,props:r,_owner:l}};F.createContext=function(t){return t={$$typeof:Kg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qg,_context:t},t.Consumer=t};F.createElement=eh;F.createFactory=function(t){var e=eh.bind(null,t);return e.type=t,e};F.createRef=function(){return{current:null}};F.forwardRef=function(t){return{$$typeof:Jg,render:t}};F.isValidElement=yu;F.lazy=function(t){return{$$typeof:Gg,_payload:{_status:-1,_result:t},_init:ty}};F.memo=function(t,e){return{$$typeof:Yg,type:t,compare:e===void 0?null:e}};F.startTransition=function(t){var e=zs.transition;zs.transition={};try{t()}finally{zs.transition=e}};F.unstable_act=th;F.useCallback=function(t,e){return _e.current.useCallback(t,e)};F.useContext=function(t){return _e.current.useContext(t)};F.useDebugValue=function(){};F.useDeferredValue=function(t){return _e.current.useDeferredValue(t)};F.useEffect=function(t,e){return _e.current.useEffect(t,e)};F.useId=function(){return _e.current.useId()};F.useImperativeHandle=function(t,e,n){return _e.current.useImperativeHandle(t,e,n)};F.useInsertionEffect=function(t,e){return _e.current.useInsertionEffect(t,e)};F.useLayoutEffect=function(t,e){return _e.current.useLayoutEffect(t,e)};F.useMemo=function(t,e){return _e.current.useMemo(t,e)};F.useReducer=function(t,e,n){return _e.current.useReducer(t,e,n)};F.useRef=function(t){return _e.current.useRef(t)};F.useState=function(t){return _e.current.useState(t)};F.useSyncExternalStore=function(t,e,n){return _e.current.useSyncExternalStore(t,e,n)};F.useTransition=function(){return _e.current.useTransition()};F.version="18.3.1";Kf.exports=F;var P=Kf.exports;const ry=Vg(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy=P,sy=Symbol.for("react.element"),ly=Symbol.for("react.fragment"),oy=Object.prototype.hasOwnProperty,ay=iy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uy={key:!0,ref:!0,__self:!0,__source:!0};function nh(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)oy.call(e,r)&&!uy.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:sy,type:t,key:s,ref:l,props:i,_owner:ay.current}}Rl.Fragment=ly;Rl.jsx=nh;Rl.jsxs=nh;qf.exports=Rl;var d=qf.exports,Go={},rh={exports:{}},Ze={},ih={exports:{}},sh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(S,A){var _=S.length;S.push(A);e:for(;0<_;){var q=_-1>>>1,Y=S[q];if(0<i(Y,A))S[q]=A,S[_]=Y,_=q;else break e}}function n(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var A=S[0],_=S.pop();if(_!==A){S[0]=_;e:for(var q=0,Y=S.length,cs=Y>>>1;q<cs;){var Dn=2*(q+1)-1,no=S[Dn],jn=Dn+1,ds=S[jn];if(0>i(no,_))jn<Y&&0>i(ds,no)?(S[q]=ds,S[jn]=_,q=jn):(S[q]=no,S[Dn]=_,q=Dn);else if(jn<Y&&0>i(ds,_))S[q]=ds,S[jn]=_,q=jn;else break e}}return A}function i(S,A){var _=S.sortIndex-A.sortIndex;return _!==0?_:S.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],c=1,f=null,h=3,p=!1,m=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(S){for(var A=n(u);A!==null;){if(A.callback===null)r(u);else if(A.startTime<=S)r(u),A.sortIndex=A.expirationTime,e(a,A);else break;A=n(u)}}function k(S){if(v=!1,x(S),!m)if(n(a)!==null)m=!0,me(N);else{var A=n(u);A!==null&&jt(k,A.startTime-S)}}function N(S,A){m=!1,v&&(v=!1,y(C),C=-1),p=!0;var _=h;try{for(x(A),f=n(a);f!==null&&(!(f.expirationTime>A)||S&&!se());){var q=f.callback;if(typeof q=="function"){f.callback=null,h=f.priorityLevel;var Y=q(f.expirationTime<=A);A=t.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(a)&&r(a),x(A)}else r(a);f=n(a)}if(f!==null)var cs=!0;else{var Dn=n(u);Dn!==null&&jt(k,Dn.startTime-A),cs=!1}return cs}finally{f=null,h=_,p=!1}}var O=!1,D=null,C=-1,b=5,j=-1;function se(){return!(t.unstable_now()-j<b)}function je(){if(D!==null){var S=t.unstable_now();j=S;var A=!0;try{A=D(!0,S)}finally{A?T():(O=!1,D=null)}}else O=!1}var T;if(typeof g=="function")T=function(){g(je)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,ne=L.port2;L.port1.onmessage=je,T=function(){ne.postMessage(null)}}else T=function(){w(je,0)};function me(S){D=S,O||(O=!0,T())}function jt(S,A){C=w(function(){S(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(S){S.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,me(N))},t.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<S?Math.floor(1e3/S):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(S){switch(h){case 1:case 2:case 3:var A=3;break;default:A=h}var _=h;h=A;try{return S()}finally{h=_}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(S,A){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var _=h;h=S;try{return A()}finally{h=_}},t.unstable_scheduleCallback=function(S,A,_){var q=t.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?q+_:q):_=q,S){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=_+Y,S={id:c++,callback:A,priorityLevel:S,startTime:_,expirationTime:Y,sortIndex:-1},_>q?(S.sortIndex=_,e(u,S),n(a)===null&&S===n(u)&&(v?(y(C),C=-1):v=!0,jt(k,_-q))):(S.sortIndex=Y,e(a,S),m||p||(m=!0,me(N))),S},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(S){var A=h;return function(){var _=h;h=A;try{return S.apply(this,arguments)}finally{h=_}}}})(sh);ih.exports=sh;var cy=ih.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy=P,Xe=cy;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lh=new Set,Oi={};function ir(t,e){Pr(t,e),Pr(t+"Capture",e)}function Pr(t,e){for(Oi[t]=e,t=0;t<e.length;t++)lh.add(e[t])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xo=Object.prototype.hasOwnProperty,fy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oc={},Tc={};function hy(t){return Xo.call(Tc,t)?!0:Xo.call(Oc,t)?!1:fy.test(t)?Tc[t]=!0:(Oc[t]=!0,!1)}function py(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function my(t,e,n,r){if(e===null||typeof e>"u"||py(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Le(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new Le(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new Le(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new Le(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new Le(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new Le(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new Le(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new Le(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new Le(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new Le(t,5,!1,t.toLowerCase(),null,!1,!1)});var vu=/[\-:]([a-z])/g;function xu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vu,xu);Se[e]=new Le(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vu,xu);Se[e]=new Le(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vu,xu);Se[e]=new Le(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new Le(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new Le(t,1,!1,t.toLowerCase(),null,!0,!0)});function ku(t,e,n,r){var i=Se.hasOwnProperty(e)?Se[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(my(e,n,i,r)&&(n=null),r||i===null?hy(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kt=dy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hs=Symbol.for("react.element"),fr=Symbol.for("react.portal"),hr=Symbol.for("react.fragment"),wu=Symbol.for("react.strict_mode"),Zo=Symbol.for("react.profiler"),oh=Symbol.for("react.provider"),ah=Symbol.for("react.context"),Su=Symbol.for("react.forward_ref"),ea=Symbol.for("react.suspense"),ta=Symbol.for("react.suspense_list"),Cu=Symbol.for("react.memo"),Gt=Symbol.for("react.lazy"),uh=Symbol.for("react.offscreen"),Dc=Symbol.iterator;function Yr(t){return t===null||typeof t!="object"?null:(t=Dc&&t[Dc]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,io;function si(t){if(io===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);io=e&&e[1]||""}return`
`+io+t}var so=!1;function lo(t,e){if(!t||so)return"";so=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{so=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?si(t):""}function gy(t){switch(t.tag){case 5:return si(t.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 2:case 15:return t=lo(t.type,!1),t;case 11:return t=lo(t.type.render,!1),t;case 1:return t=lo(t.type,!0),t;default:return""}}function na(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hr:return"Fragment";case fr:return"Portal";case Zo:return"Profiler";case wu:return"StrictMode";case ea:return"Suspense";case ta:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ah:return(t.displayName||"Context")+".Consumer";case oh:return(t._context.displayName||"Context")+".Provider";case Su:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cu:return e=t.displayName||null,e!==null?e:na(t.type)||"Memo";case Gt:e=t._payload,t=t._init;try{return na(t(e))}catch{}}return null}function yy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return na(e);case 8:return e===wu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ch(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vy(t){var e=ch(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ps(t){t._valueTracker||(t._valueTracker=vy(t))}function dh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ch(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ra(t,e){var n=e.checked;return te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fh(t,e){e=e.checked,e!=null&&ku(t,"checked",e,!1)}function ia(t,e){fh(t,e);var n=Sn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sa(t,e.type,n):e.hasOwnProperty("defaultValue")&&sa(t,e.type,Sn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ic(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sa(t,e,n){(e!=="number"||Gs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var li=Array.isArray;function Nr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function la(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(li(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sn(n)}}function hh(t,e){var n=Sn(e.value),r=Sn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ph(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ph(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ms,mh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ms=ms||document.createElement("div"),ms.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ms.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ti(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xy=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(t){xy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fi[e]=fi[t]})});function gh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fi.hasOwnProperty(t)&&fi[t]?(""+e).trim():e+"px"}function yh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ky=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aa(t,e){if(e){if(ky[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function ua(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ca=null;function Nu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var da=null,Mr=null,Er=null;function Ac(t){if(t=rs(t)){if(typeof da!="function")throw Error(E(280));var e=t.stateNode;e&&(e=Fl(e),da(t.stateNode,t.type,e))}}function vh(t){Mr?Er?Er.push(t):Er=[t]:Mr=t}function xh(){if(Mr){var t=Mr,e=Er;if(Er=Mr=null,Ac(t),e)for(t=0;t<e.length;t++)Ac(e[t])}}function kh(t,e){return t(e)}function wh(){}var oo=!1;function Sh(t,e,n){if(oo)return t(e,n);oo=!0;try{return kh(t,e,n)}finally{oo=!1,(Mr!==null||Er!==null)&&(wh(),xh())}}function Di(t,e){var n=t.stateNode;if(n===null)return null;var r=Fl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var fa=!1;if(Wt)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){fa=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{fa=!1}function wy(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var hi=!1,Xs=null,Zs=!1,ha=null,Sy={onError:function(t){hi=!0,Xs=t}};function Cy(t,e,n,r,i,s,l,o,a){hi=!1,Xs=null,wy.apply(Sy,arguments)}function Ny(t,e,n,r,i,s,l,o,a){if(Cy.apply(this,arguments),hi){if(hi){var u=Xs;hi=!1,Xs=null}else throw Error(E(198));Zs||(Zs=!0,ha=u)}}function sr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ch(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zc(t){if(sr(t)!==t)throw Error(E(188))}function My(t){var e=t.alternate;if(!e){if(e=sr(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return zc(i),t;if(s===r)return zc(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function Nh(t){return t=My(t),t!==null?Mh(t):null}function Mh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mh(t);if(e!==null)return e;t=t.sibling}return null}var Eh=Xe.unstable_scheduleCallback,_c=Xe.unstable_cancelCallback,Ey=Xe.unstable_shouldYield,by=Xe.unstable_requestPaint,le=Xe.unstable_now,Oy=Xe.unstable_getCurrentPriorityLevel,Mu=Xe.unstable_ImmediatePriority,bh=Xe.unstable_UserBlockingPriority,el=Xe.unstable_NormalPriority,Ty=Xe.unstable_LowPriority,Oh=Xe.unstable_IdlePriority,Al=null,bt=null;function Dy(t){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Al,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:Py,jy=Math.log,Iy=Math.LN2;function Py(t){return t>>>=0,t===0?32:31-(jy(t)/Iy|0)|0}var gs=64,ys=4194304;function oi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=oi(o):(s&=l,s!==0&&(r=oi(s)))}else l=n&~i,l!==0?r=oi(l):s!==0&&(r=oi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vt(e),i=1<<n,r|=t[n],e&=~i;return r}function Ry(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ay(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-vt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=Ry(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function pa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Th(){var t=gs;return gs<<=1,!(gs&4194240)&&(gs=64),t}function ao(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ts(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=n}function zy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Eu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var U=0;function Dh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jh,bu,Ih,Ph,Rh,ma=!1,vs=[],dn=null,fn=null,hn=null,ji=new Map,Ii=new Map,tn=[],_y="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lc(t,e){switch(t){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":ji.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(e.pointerId)}}function Xr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=rs(e),e!==null&&bu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ly(t,e,n,r,i){switch(e){case"focusin":return dn=Xr(dn,t,e,n,r,i),!0;case"dragenter":return fn=Xr(fn,t,e,n,r,i),!0;case"mouseover":return hn=Xr(hn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ji.set(s,Xr(ji.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ii.set(s,Xr(Ii.get(s)||null,t,e,n,r,i)),!0}return!1}function Ah(t){var e=An(t.target);if(e!==null){var n=sr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ch(n),e!==null){t.blockedOn=e,Rh(t.priority,function(){Ih(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _s(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ga(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ca=r,n.target.dispatchEvent(r),ca=null}else return e=rs(n),e!==null&&bu(e),t.blockedOn=n,!1;e.shift()}return!0}function Fc(t,e,n){_s(t)&&n.delete(e)}function Fy(){ma=!1,dn!==null&&_s(dn)&&(dn=null),fn!==null&&_s(fn)&&(fn=null),hn!==null&&_s(hn)&&(hn=null),ji.forEach(Fc),Ii.forEach(Fc)}function Zr(t,e){t.blockedOn===e&&(t.blockedOn=null,ma||(ma=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,Fy)))}function Pi(t){function e(i){return Zr(i,t)}if(0<vs.length){Zr(vs[0],t);for(var n=1;n<vs.length;n++){var r=vs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dn!==null&&Zr(dn,t),fn!==null&&Zr(fn,t),hn!==null&&Zr(hn,t),ji.forEach(e),Ii.forEach(e),n=0;n<tn.length;n++)r=tn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<tn.length&&(n=tn[0],n.blockedOn===null);)Ah(n),n.blockedOn===null&&tn.shift()}var br=Kt.ReactCurrentBatchConfig,nl=!0;function By(t,e,n,r){var i=U,s=br.transition;br.transition=null;try{U=1,Ou(t,e,n,r)}finally{U=i,br.transition=s}}function Vy(t,e,n,r){var i=U,s=br.transition;br.transition=null;try{U=4,Ou(t,e,n,r)}finally{U=i,br.transition=s}}function Ou(t,e,n,r){if(nl){var i=ga(t,e,n,r);if(i===null)xo(t,e,r,rl,n),Lc(t,r);else if(Ly(i,t,e,n,r))r.stopPropagation();else if(Lc(t,r),e&4&&-1<_y.indexOf(t)){for(;i!==null;){var s=rs(i);if(s!==null&&jh(s),s=ga(t,e,n,r),s===null&&xo(t,e,r,rl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xo(t,e,r,null,n)}}var rl=null;function ga(t,e,n,r){if(rl=null,t=Nu(r),t=An(t),t!==null)if(e=sr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ch(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rl=t,null}function zh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oy()){case Mu:return 1;case bh:return 4;case el:case Ty:return 16;case Oh:return 536870912;default:return 16}default:return 16}}var ln=null,Tu=null,Ls=null;function _h(){if(Ls)return Ls;var t,e=Tu,n=e.length,r,i="value"in ln?ln.value:ln.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Ls=i.slice(t,1<r?1-r:void 0)}function Fs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xs(){return!0}function Bc(){return!1}function et(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xs:Bc,this.isPropagationStopped=Bc,this}return te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),e}var qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Du=et(qr),ns=te({},qr,{view:0,detail:0}),$y=et(ns),uo,co,ei,zl=te({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ei&&(ei&&t.type==="mousemove"?(uo=t.screenX-ei.screenX,co=t.screenY-ei.screenY):co=uo=0,ei=t),uo)},movementY:function(t){return"movementY"in t?t.movementY:co}}),Vc=et(zl),Wy=te({},zl,{dataTransfer:0}),Uy=et(Wy),Hy=te({},ns,{relatedTarget:0}),fo=et(Hy),qy=te({},qr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ky=et(qy),Jy=te({},qr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qy=et(Jy),Yy=te({},qr,{data:0}),$c=et(Yy),Gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Zy[t])?!!e[t]:!1}function ju(){return e0}var t0=te({},ns,{key:function(t){if(t.key){var e=Gy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(t){return t.type==="keypress"?Fs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),n0=et(t0),r0=te({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wc=et(r0),i0=te({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),s0=et(i0),l0=te({},qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),o0=et(l0),a0=te({},zl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=et(a0),c0=[9,13,27,32],Iu=Wt&&"CompositionEvent"in window,pi=null;Wt&&"documentMode"in document&&(pi=document.documentMode);var d0=Wt&&"TextEvent"in window&&!pi,Lh=Wt&&(!Iu||pi&&8<pi&&11>=pi),Uc=String.fromCharCode(32),Hc=!1;function Fh(t,e){switch(t){case"keyup":return c0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function f0(t,e){switch(t){case"compositionend":return Bh(e);case"keypress":return e.which!==32?null:(Hc=!0,Uc);case"textInput":return t=e.data,t===Uc&&Hc?null:t;default:return null}}function h0(t,e){if(pr)return t==="compositionend"||!Iu&&Fh(t,e)?(t=_h(),Ls=Tu=ln=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lh&&e.locale!=="ko"?null:e.data;default:return null}}var p0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!p0[t.type]:e==="textarea"}function Vh(t,e,n,r){vh(r),e=il(e,"onChange"),0<e.length&&(n=new Du("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mi=null,Ri=null;function m0(t){Xh(t,0)}function _l(t){var e=yr(t);if(dh(e))return t}function g0(t,e){if(t==="change")return e}var $h=!1;if(Wt){var ho;if(Wt){var po="oninput"in document;if(!po){var Kc=document.createElement("div");Kc.setAttribute("oninput","return;"),po=typeof Kc.oninput=="function"}ho=po}else ho=!1;$h=ho&&(!document.documentMode||9<document.documentMode)}function Jc(){mi&&(mi.detachEvent("onpropertychange",Wh),Ri=mi=null)}function Wh(t){if(t.propertyName==="value"&&_l(Ri)){var e=[];Vh(e,Ri,t,Nu(t)),Sh(m0,e)}}function y0(t,e,n){t==="focusin"?(Jc(),mi=e,Ri=n,mi.attachEvent("onpropertychange",Wh)):t==="focusout"&&Jc()}function v0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _l(Ri)}function x0(t,e){if(t==="click")return _l(e)}function k0(t,e){if(t==="input"||t==="change")return _l(e)}function w0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kt=typeof Object.is=="function"?Object.is:w0;function Ai(t,e){if(kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xo.call(e,i)||!kt(t[i],e[i]))return!1}return!0}function Qc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yc(t,e){var n=Qc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qc(n)}}function Uh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hh(){for(var t=window,e=Gs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gs(t.document)}return e}function Pu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function S0(t){var e=Hh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Uh(n.ownerDocument.documentElement,n)){if(r!==null&&Pu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yc(n,s);var l=Yc(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var C0=Wt&&"documentMode"in document&&11>=document.documentMode,mr=null,ya=null,gi=null,va=!1;function Gc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;va||mr==null||mr!==Gs(r)||(r=mr,"selectionStart"in r&&Pu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gi&&Ai(gi,r)||(gi=r,r=il(ya,"onSelect"),0<r.length&&(e=new Du("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function ks(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gr={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionend:ks("Transition","TransitionEnd")},mo={},qh={};Wt&&(qh=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function Ll(t){if(mo[t])return mo[t];if(!gr[t])return t;var e=gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qh)return mo[t]=e[n];return t}var Kh=Ll("animationend"),Jh=Ll("animationiteration"),Qh=Ll("animationstart"),Yh=Ll("transitionend"),Gh=new Map,Xc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(t,e){Gh.set(t,e),ir(e,[t])}for(var go=0;go<Xc.length;go++){var yo=Xc[go],N0=yo.toLowerCase(),M0=yo[0].toUpperCase()+yo.slice(1);Mn(N0,"on"+M0)}Mn(Kh,"onAnimationEnd");Mn(Jh,"onAnimationIteration");Mn(Qh,"onAnimationStart");Mn("dblclick","onDoubleClick");Mn("focusin","onFocus");Mn("focusout","onBlur");Mn(Yh,"onTransitionEnd");Pr("onMouseEnter",["mouseout","mouseover"]);Pr("onMouseLeave",["mouseout","mouseover"]);Pr("onPointerEnter",["pointerout","pointerover"]);Pr("onPointerLeave",["pointerout","pointerover"]);ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ai));function Zc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ny(r,e,void 0,t),t.currentTarget=null}function Xh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;Zc(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;Zc(i,o,u),s=a}}}if(Zs)throw t=ha,Zs=!1,ha=null,t}function K(t,e){var n=e[Ca];n===void 0&&(n=e[Ca]=new Set);var r=t+"__bubble";n.has(r)||(Zh(e,t,2,!1),n.add(r))}function vo(t,e,n){var r=0;e&&(r|=4),Zh(n,t,r,e)}var ws="_reactListening"+Math.random().toString(36).slice(2);function zi(t){if(!t[ws]){t[ws]=!0,lh.forEach(function(n){n!=="selectionchange"&&(E0.has(n)||vo(n,!1,t),vo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ws]||(e[ws]=!0,vo("selectionchange",!1,e))}}function Zh(t,e,n,r){switch(zh(e)){case 1:var i=By;break;case 4:i=Vy;break;default:i=Ou}n=i.bind(null,e,n,t),i=void 0,!fa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xo(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=An(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Sh(function(){var u=s,c=Nu(n),f=[];e:{var h=Gh.get(t);if(h!==void 0){var p=Du,m=t;switch(t){case"keypress":if(Fs(n)===0)break e;case"keydown":case"keyup":p=n0;break;case"focusin":m="focus",p=fo;break;case"focusout":m="blur",p=fo;break;case"beforeblur":case"afterblur":p=fo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=s0;break;case Kh:case Jh:case Qh:p=Ky;break;case Yh:p=o0;break;case"scroll":p=$y;break;case"wheel":p=u0;break;case"copy":case"cut":case"paste":p=Qy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Wc}var v=(e&4)!==0,w=!v&&t==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var g=u,x;g!==null;){x=g;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,y!==null&&(k=Di(g,y),k!=null&&v.push(_i(g,k,x)))),w)break;g=g.return}0<v.length&&(h=new p(h,m,null,n,c),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==ca&&(m=n.relatedTarget||n.fromElement)&&(An(m)||m[Ut]))break e;if((p||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?An(m):null,m!==null&&(w=sr(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=Vc,k="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Wc,k="onPointerLeave",y="onPointerEnter",g="pointer"),w=p==null?h:yr(p),x=m==null?h:yr(m),h=new v(k,g+"leave",p,n,c),h.target=w,h.relatedTarget=x,k=null,An(c)===u&&(v=new v(y,g+"enter",m,n,c),v.target=x,v.relatedTarget=w,k=v),w=k,p&&m)t:{for(v=p,y=m,g=0,x=v;x;x=or(x))g++;for(x=0,k=y;k;k=or(k))x++;for(;0<g-x;)v=or(v),g--;for(;0<x-g;)y=or(y),x--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=or(v),y=or(y)}v=null}else v=null;p!==null&&ed(f,h,p,v,!1),m!==null&&w!==null&&ed(f,w,m,v,!0)}}e:{if(h=u?yr(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var N=g0;else if(qc(h))if($h)N=k0;else{N=v0;var O=y0}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=x0);if(N&&(N=N(t,u))){Vh(f,N,n,c);break e}O&&O(t,h,u),t==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&sa(h,"number",h.value)}switch(O=u?yr(u):window,t){case"focusin":(qc(O)||O.contentEditable==="true")&&(mr=O,ya=u,gi=null);break;case"focusout":gi=ya=mr=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,Gc(f,n,c);break;case"selectionchange":if(C0)break;case"keydown":case"keyup":Gc(f,n,c)}var D;if(Iu)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else pr?Fh(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Lh&&n.locale!=="ko"&&(pr||C!=="onCompositionStart"?C==="onCompositionEnd"&&pr&&(D=_h()):(ln=c,Tu="value"in ln?ln.value:ln.textContent,pr=!0)),O=il(u,C),0<O.length&&(C=new $c(C,t,null,n,c),f.push({event:C,listeners:O}),D?C.data=D:(D=Bh(n),D!==null&&(C.data=D)))),(D=d0?f0(t,n):h0(t,n))&&(u=il(u,"onBeforeInput"),0<u.length&&(c=new $c("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=D))}Xh(f,e)})}function _i(t,e,n){return{instance:t,listener:e,currentTarget:n}}function il(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Di(t,n),s!=null&&r.unshift(_i(t,s,i)),s=Di(t,e),s!=null&&r.push(_i(t,s,i))),t=t.return}return r}function or(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ed(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=Di(n,s),a!=null&&l.unshift(_i(n,a,o))):i||(a=Di(n,s),a!=null&&l.push(_i(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var b0=/\r\n?/g,O0=/\u0000|\uFFFD/g;function td(t){return(typeof t=="string"?t:""+t).replace(b0,`
`).replace(O0,"")}function Ss(t,e,n){if(e=td(e),td(t)!==e&&n)throw Error(E(425))}function sl(){}var xa=null,ka=null;function wa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sa=typeof setTimeout=="function"?setTimeout:void 0,T0=typeof clearTimeout=="function"?clearTimeout:void 0,nd=typeof Promise=="function"?Promise:void 0,D0=typeof queueMicrotask=="function"?queueMicrotask:typeof nd<"u"?function(t){return nd.resolve(null).then(t).catch(j0)}:Sa;function j0(t){setTimeout(function(){throw t})}function ko(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pi(e)}function pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kr=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Kr,Li="__reactProps$"+Kr,Ut="__reactContainer$"+Kr,Ca="__reactEvents$"+Kr,I0="__reactListeners$"+Kr,P0="__reactHandles$"+Kr;function An(t){var e=t[Mt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ut]||n[Mt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rd(t);t!==null;){if(n=t[Mt])return n;t=rd(t)}return e}t=n,n=t.parentNode}return null}function rs(t){return t=t[Mt]||t[Ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function Fl(t){return t[Li]||null}var Na=[],vr=-1;function En(t){return{current:t}}function Q(t){0>vr||(t.current=Na[vr],Na[vr]=null,vr--)}function H(t,e){vr++,Na[vr]=t.current,t.current=e}var Cn={},Te=En(Cn),$e=En(!1),Qn=Cn;function Rr(t,e){var n=t.type.contextTypes;if(!n)return Cn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function We(t){return t=t.childContextTypes,t!=null}function ll(){Q($e),Q(Te)}function id(t,e,n){if(Te.current!==Cn)throw Error(E(168));H(Te,e),H($e,n)}function ep(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,yy(t)||"Unknown",i));return te({},n,r)}function ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cn,Qn=Te.current,H(Te,t),H($e,$e.current),!0}function sd(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=ep(t,e,Qn),r.__reactInternalMemoizedMergedChildContext=t,Q($e),Q(Te),H(Te,t)):Q($e),H($e,n)}var zt=null,Bl=!1,wo=!1;function tp(t){zt===null?zt=[t]:zt.push(t)}function R0(t){Bl=!0,tp(t)}function bn(){if(!wo&&zt!==null){wo=!0;var t=0,e=U;try{var n=zt;for(U=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zt=null,Bl=!1}catch(i){throw zt!==null&&(zt=zt.slice(t+1)),Eh(Mu,bn),i}finally{U=e,wo=!1}}return null}var xr=[],kr=0,al=null,ul=0,nt=[],rt=0,Yn=null,Lt=1,Ft="";function In(t,e){xr[kr++]=ul,xr[kr++]=al,al=t,ul=e}function np(t,e,n){nt[rt++]=Lt,nt[rt++]=Ft,nt[rt++]=Yn,Yn=t;var r=Lt;t=Ft;var i=32-vt(r)-1;r&=~(1<<i),n+=1;var s=32-vt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Lt=1<<32-vt(e)+i|n<<i|r,Ft=s+t}else Lt=1<<s|n<<i|r,Ft=t}function Ru(t){t.return!==null&&(In(t,1),np(t,1,0))}function Au(t){for(;t===al;)al=xr[--kr],xr[kr]=null,ul=xr[--kr],xr[kr]=null;for(;t===Yn;)Yn=nt[--rt],nt[rt]=null,Ft=nt[--rt],nt[rt]=null,Lt=nt[--rt],nt[rt]=null}var Qe=null,Je=null,G=!1,gt=null;function rp(t,e){var n=lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ld(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qe=t,Je=pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qe=t,Je=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yn!==null?{id:Lt,overflow:Ft}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qe=t,Je=null,!0):!1;default:return!1}}function Ma(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ea(t){if(G){var e=Je;if(e){var n=e;if(!ld(t,e)){if(Ma(t))throw Error(E(418));e=pn(n.nextSibling);var r=Qe;e&&ld(t,e)?rp(r,n):(t.flags=t.flags&-4097|2,G=!1,Qe=t)}}else{if(Ma(t))throw Error(E(418));t.flags=t.flags&-4097|2,G=!1,Qe=t}}}function od(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qe=t}function Cs(t){if(t!==Qe)return!1;if(!G)return od(t),G=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wa(t.type,t.memoizedProps)),e&&(e=Je)){if(Ma(t))throw ip(),Error(E(418));for(;e;)rp(t,e),e=pn(e.nextSibling)}if(od(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Je=pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Je=null}}else Je=Qe?pn(t.stateNode.nextSibling):null;return!0}function ip(){for(var t=Je;t;)t=pn(t.nextSibling)}function Ar(){Je=Qe=null,G=!1}function zu(t){gt===null?gt=[t]:gt.push(t)}var A0=Kt.ReactCurrentBatchConfig;function ti(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Ns(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ad(t){var e=t._init;return e(t._payload)}function sp(t){function e(y,g){if(t){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=vn(y,g),y.index=0,y.sibling=null,y}function s(y,g,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=2,g):x):(y.flags|=2,g)):(y.flags|=1048576,g)}function l(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,g,x,k){return g===null||g.tag!==6?(g=Oo(x,y.mode,k),g.return=y,g):(g=i(g,x),g.return=y,g)}function a(y,g,x,k){var N=x.type;return N===hr?c(y,g,x.props.children,k,x.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gt&&ad(N)===g.type)?(k=i(g,x.props),k.ref=ti(y,g,x),k.return=y,k):(k=qs(x.type,x.key,x.props,null,y.mode,k),k.ref=ti(y,g,x),k.return=y,k)}function u(y,g,x,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=To(x,y.mode,k),g.return=y,g):(g=i(g,x.children||[]),g.return=y,g)}function c(y,g,x,k,N){return g===null||g.tag!==7?(g=$n(x,y.mode,k,N),g.return=y,g):(g=i(g,x),g.return=y,g)}function f(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Oo(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case hs:return x=qs(g.type,g.key,g.props,null,y.mode,x),x.ref=ti(y,null,g),x.return=y,x;case fr:return g=To(g,y.mode,x),g.return=y,g;case Gt:var k=g._init;return f(y,k(g._payload),x)}if(li(g)||Yr(g))return g=$n(g,y.mode,x,null),g.return=y,g;Ns(y,g)}return null}function h(y,g,x,k){var N=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:o(y,g,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hs:return x.key===N?a(y,g,x,k):null;case fr:return x.key===N?u(y,g,x,k):null;case Gt:return N=x._init,h(y,g,N(x._payload),k)}if(li(x)||Yr(x))return N!==null?null:c(y,g,x,k,null);Ns(y,x)}return null}function p(y,g,x,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(x)||null,o(g,y,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case hs:return y=y.get(k.key===null?x:k.key)||null,a(g,y,k,N);case fr:return y=y.get(k.key===null?x:k.key)||null,u(g,y,k,N);case Gt:var O=k._init;return p(y,g,x,O(k._payload),N)}if(li(k)||Yr(k))return y=y.get(x)||null,c(g,y,k,N,null);Ns(g,k)}return null}function m(y,g,x,k){for(var N=null,O=null,D=g,C=g=0,b=null;D!==null&&C<x.length;C++){D.index>C?(b=D,D=null):b=D.sibling;var j=h(y,D,x[C],k);if(j===null){D===null&&(D=b);break}t&&D&&j.alternate===null&&e(y,D),g=s(j,g,C),O===null?N=j:O.sibling=j,O=j,D=b}if(C===x.length)return n(y,D),G&&In(y,C),N;if(D===null){for(;C<x.length;C++)D=f(y,x[C],k),D!==null&&(g=s(D,g,C),O===null?N=D:O.sibling=D,O=D);return G&&In(y,C),N}for(D=r(y,D);C<x.length;C++)b=p(D,y,C,x[C],k),b!==null&&(t&&b.alternate!==null&&D.delete(b.key===null?C:b.key),g=s(b,g,C),O===null?N=b:O.sibling=b,O=b);return t&&D.forEach(function(se){return e(y,se)}),G&&In(y,C),N}function v(y,g,x,k){var N=Yr(x);if(typeof N!="function")throw Error(E(150));if(x=N.call(x),x==null)throw Error(E(151));for(var O=N=null,D=g,C=g=0,b=null,j=x.next();D!==null&&!j.done;C++,j=x.next()){D.index>C?(b=D,D=null):b=D.sibling;var se=h(y,D,j.value,k);if(se===null){D===null&&(D=b);break}t&&D&&se.alternate===null&&e(y,D),g=s(se,g,C),O===null?N=se:O.sibling=se,O=se,D=b}if(j.done)return n(y,D),G&&In(y,C),N;if(D===null){for(;!j.done;C++,j=x.next())j=f(y,j.value,k),j!==null&&(g=s(j,g,C),O===null?N=j:O.sibling=j,O=j);return G&&In(y,C),N}for(D=r(y,D);!j.done;C++,j=x.next())j=p(D,y,C,j.value,k),j!==null&&(t&&j.alternate!==null&&D.delete(j.key===null?C:j.key),g=s(j,g,C),O===null?N=j:O.sibling=j,O=j);return t&&D.forEach(function(je){return e(y,je)}),G&&In(y,C),N}function w(y,g,x,k){if(typeof x=="object"&&x!==null&&x.type===hr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case hs:e:{for(var N=x.key,O=g;O!==null;){if(O.key===N){if(N=x.type,N===hr){if(O.tag===7){n(y,O.sibling),g=i(O,x.props.children),g.return=y,y=g;break e}}else if(O.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gt&&ad(N)===O.type){n(y,O.sibling),g=i(O,x.props),g.ref=ti(y,O,x),g.return=y,y=g;break e}n(y,O);break}else e(y,O);O=O.sibling}x.type===hr?(g=$n(x.props.children,y.mode,k,x.key),g.return=y,y=g):(k=qs(x.type,x.key,x.props,null,y.mode,k),k.ref=ti(y,g,x),k.return=y,y=k)}return l(y);case fr:e:{for(O=x.key;g!==null;){if(g.key===O)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),g=i(g,x.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=To(x,y.mode,k),g.return=y,y=g}return l(y);case Gt:return O=x._init,w(y,g,O(x._payload),k)}if(li(x))return m(y,g,x,k);if(Yr(x))return v(y,g,x,k);Ns(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,x),g.return=y,y=g):(n(y,g),g=Oo(x,y.mode,k),g.return=y,y=g),l(y)):n(y,g)}return w}var zr=sp(!0),lp=sp(!1),cl=En(null),dl=null,wr=null,_u=null;function Lu(){_u=wr=dl=null}function Fu(t){var e=cl.current;Q(cl),t._currentValue=e}function ba(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Or(t,e){dl=t,_u=wr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ve=!0),t.firstContext=null)}function dt(t){var e=t._currentValue;if(_u!==t)if(t={context:t,memoizedValue:e,next:null},wr===null){if(dl===null)throw Error(E(308));wr=t,dl.dependencies={lanes:0,firstContext:t}}else wr=wr.next=t;return e}var zn=null;function Bu(t){zn===null?zn=[t]:zn.push(t)}function op(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Bu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ht(t,r)}function Ht(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xt=!1;function Vu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ap(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,V&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ht(t,n)}return i=r.interleaved,i===null?(e.next=e,Bu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ht(t,n)}function Bs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eu(t,n)}}function ud(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fl(t,e,n,r){var i=t.updateQueue;Xt=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==l&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=a))}if(s!==null){var f=i.baseState;l=0,c=u=a=null,o=s;do{var h=o.lane,p=o.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,v=o;switch(h=e,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=te({},f,h);break e;case 2:Xt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=p,a=f):c=c.next=p,l|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xn|=l,t.lanes=l,t.memoizedState=f}}function cd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var is={},Ot=En(is),Fi=En(is),Bi=En(is);function _n(t){if(t===is)throw Error(E(174));return t}function $u(t,e){switch(H(Bi,e),H(Fi,t),H(Ot,is),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=oa(e,t)}Q(Ot),H(Ot,e)}function _r(){Q(Ot),Q(Fi),Q(Bi)}function up(t){_n(Bi.current);var e=_n(Ot.current),n=oa(e,t.type);e!==n&&(H(Fi,t),H(Ot,n))}function Wu(t){Fi.current===t&&(Q(Ot),Q(Fi))}var X=En(0);function hl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var So=[];function Uu(){for(var t=0;t<So.length;t++)So[t]._workInProgressVersionPrimary=null;So.length=0}var Vs=Kt.ReactCurrentDispatcher,Co=Kt.ReactCurrentBatchConfig,Gn=0,ee=null,ue=null,fe=null,pl=!1,yi=!1,Vi=0,z0=0;function Ce(){throw Error(E(321))}function Hu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kt(t[n],e[n]))return!1;return!0}function qu(t,e,n,r,i,s){if(Gn=s,ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vs.current=t===null||t.memoizedState===null?B0:V0,t=n(r,i),yi){s=0;do{if(yi=!1,Vi=0,25<=s)throw Error(E(301));s+=1,fe=ue=null,e.updateQueue=null,Vs.current=$0,t=n(r,i)}while(yi)}if(Vs.current=ml,e=ue!==null&&ue.next!==null,Gn=0,fe=ue=ee=null,pl=!1,e)throw Error(E(300));return t}function Ku(){var t=Vi!==0;return Vi=0,t}function Ct(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?ee.memoizedState=fe=t:fe=fe.next=t,fe}function ft(){if(ue===null){var t=ee.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=fe===null?ee.memoizedState:fe.next;if(e!==null)fe=e,ue=t;else{if(t===null)throw Error(E(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},fe===null?ee.memoizedState=fe=t:fe=fe.next=t}return fe}function $i(t,e){return typeof e=="function"?e(t):e}function No(t){var e=ft(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=ue,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var c=u.lane;if((Gn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=f,l=r):a=a.next=f,ee.lanes|=c,Xn|=c}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,kt(r,e.memoizedState)||(Ve=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ee.lanes|=s,Xn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mo(t){var e=ft(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);kt(s,e.memoizedState)||(Ve=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function cp(){}function dp(t,e){var n=ee,r=ft(),i=e(),s=!kt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ve=!0),r=r.queue,Ju(pp.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fe!==null&&fe.memoizedState.tag&1){if(n.flags|=2048,Wi(9,hp.bind(null,n,r,i,e),void 0,null),he===null)throw Error(E(349));Gn&30||fp(n,e,i)}return i}function fp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hp(t,e,n,r){e.value=n,e.getSnapshot=r,mp(e)&&gp(t)}function pp(t,e,n){return n(function(){mp(e)&&gp(t)})}function mp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kt(t,n)}catch{return!0}}function gp(t){var e=Ht(t,1);e!==null&&xt(e,t,1,-1)}function dd(t){var e=Ct();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:t},e.queue=t,t=t.dispatch=F0.bind(null,ee,t),[e.memoizedState,t]}function Wi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yp(){return ft().memoizedState}function $s(t,e,n,r){var i=Ct();ee.flags|=t,i.memoizedState=Wi(1|e,n,void 0,r===void 0?null:r)}function Vl(t,e,n,r){var i=ft();r=r===void 0?null:r;var s=void 0;if(ue!==null){var l=ue.memoizedState;if(s=l.destroy,r!==null&&Hu(r,l.deps)){i.memoizedState=Wi(e,n,s,r);return}}ee.flags|=t,i.memoizedState=Wi(1|e,n,s,r)}function fd(t,e){return $s(8390656,8,t,e)}function Ju(t,e){return Vl(2048,8,t,e)}function vp(t,e){return Vl(4,2,t,e)}function xp(t,e){return Vl(4,4,t,e)}function kp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wp(t,e,n){return n=n!=null?n.concat([t]):null,Vl(4,4,kp.bind(null,e,t),n)}function Qu(){}function Sp(t,e){var n=ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Cp(t,e){var n=ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Np(t,e,n){return Gn&21?(kt(n,e)||(n=Th(),ee.lanes|=n,Xn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ve=!0),t.memoizedState=n)}function _0(t,e){var n=U;U=n!==0&&4>n?n:4,t(!0);var r=Co.transition;Co.transition={};try{t(!1),e()}finally{U=n,Co.transition=r}}function Mp(){return ft().memoizedState}function L0(t,e,n){var r=yn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ep(t))bp(e,n);else if(n=op(t,e,n,r),n!==null){var i=Pe();xt(n,t,r,i),Op(n,e,r)}}function F0(t,e,n){var r=yn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ep(t))bp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,kt(o,l)){var a=e.interleaved;a===null?(i.next=i,Bu(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=op(t,e,i,r),n!==null&&(i=Pe(),xt(n,t,r,i),Op(n,e,r))}}function Ep(t){var e=t.alternate;return t===ee||e!==null&&e===ee}function bp(t,e){yi=pl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Op(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eu(t,n)}}var ml={readContext:dt,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},B0={readContext:dt,useCallback:function(t,e){return Ct().memoizedState=[t,e===void 0?null:e],t},useContext:dt,useEffect:fd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$s(4194308,4,kp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $s(4194308,4,t,e)},useInsertionEffect:function(t,e){return $s(4,2,t,e)},useMemo:function(t,e){var n=Ct();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ct();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=L0.bind(null,ee,t),[r.memoizedState,t]},useRef:function(t){var e=Ct();return t={current:t},e.memoizedState=t},useState:dd,useDebugValue:Qu,useDeferredValue:function(t){return Ct().memoizedState=t},useTransition:function(){var t=dd(!1),e=t[0];return t=_0.bind(null,t[1]),Ct().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ee,i=Ct();if(G){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),he===null)throw Error(E(349));Gn&30||fp(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,fd(pp.bind(null,r,s,t),[t]),r.flags|=2048,Wi(9,hp.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ct(),e=he.identifierPrefix;if(G){var n=Ft,r=Lt;n=(r&~(1<<32-vt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=z0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},V0={readContext:dt,useCallback:Sp,useContext:dt,useEffect:Ju,useImperativeHandle:wp,useInsertionEffect:vp,useLayoutEffect:xp,useMemo:Cp,useReducer:No,useRef:yp,useState:function(){return No($i)},useDebugValue:Qu,useDeferredValue:function(t){var e=ft();return Np(e,ue.memoizedState,t)},useTransition:function(){var t=No($i)[0],e=ft().memoizedState;return[t,e]},useMutableSource:cp,useSyncExternalStore:dp,useId:Mp,unstable_isNewReconciler:!1},$0={readContext:dt,useCallback:Sp,useContext:dt,useEffect:Ju,useImperativeHandle:wp,useInsertionEffect:vp,useLayoutEffect:xp,useMemo:Cp,useReducer:Mo,useRef:yp,useState:function(){return Mo($i)},useDebugValue:Qu,useDeferredValue:function(t){var e=ft();return ue===null?e.memoizedState=t:Np(e,ue.memoizedState,t)},useTransition:function(){var t=Mo($i)[0],e=ft().memoizedState;return[t,e]},useMutableSource:cp,useSyncExternalStore:dp,useId:Mp,unstable_isNewReconciler:!1};function pt(t,e){if(t&&t.defaultProps){e=te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Oa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $l={isMounted:function(t){return(t=t._reactInternals)?sr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pe(),i=yn(t),s=Vt(r,i);s.payload=e,n!=null&&(s.callback=n),e=mn(t,s,i),e!==null&&(xt(e,t,i,r),Bs(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pe(),i=yn(t),s=Vt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=mn(t,s,i),e!==null&&(xt(e,t,i,r),Bs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pe(),r=yn(t),i=Vt(n,r);i.tag=2,e!=null&&(i.callback=e),e=mn(t,i,r),e!==null&&(xt(e,t,r,n),Bs(e,t,r))}};function hd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!Ai(n,r)||!Ai(i,s):!0}function Tp(t,e,n){var r=!1,i=Cn,s=e.contextType;return typeof s=="object"&&s!==null?s=dt(s):(i=We(e)?Qn:Te.current,r=e.contextTypes,s=(r=r!=null)?Rr(t,i):Cn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$l,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$l.enqueueReplaceState(e,e.state,null)}function Ta(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Vu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dt(s):(s=We(e)?Qn:Te.current,i.context=Rr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Oa(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$l.enqueueReplaceState(i,i.state,null),fl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Lr(t,e){try{var n="",r=e;do n+=gy(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Eo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Da(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var W0=typeof WeakMap=="function"?WeakMap:Map;function Dp(t,e,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yl||(yl=!0,Ba=r),Da(t,e)},n}function jp(t,e,n){n=Vt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Da(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Da(t,e),typeof r!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function md(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new W0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=r1.bind(null,t,e,n),e.then(t,t))}function gd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vt(-1,1),e.tag=2,mn(n,e,1))),n.lanes|=1),t)}var U0=Kt.ReactCurrentOwner,Ve=!1;function Ie(t,e,n,r){e.child=t===null?lp(e,null,n,r):zr(e,t.child,n,r)}function vd(t,e,n,r,i){n=n.render;var s=e.ref;return Or(e,i),r=qu(t,e,n,r,s,i),n=Ku(),t!==null&&!Ve?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qt(t,e,i)):(G&&n&&Ru(e),e.flags|=1,Ie(t,e,r,i),e.child)}function xd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ip(t,e,s,r,i)):(t=qs(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ai,n(l,r)&&t.ref===e.ref)return qt(t,e,i)}return e.flags|=1,t=vn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ip(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ai(s,r)&&t.ref===e.ref)if(Ve=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ve=!0);else return e.lanes=t.lanes,qt(t,e,i)}return ja(t,e,n,r,i)}function Pp(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},H(Cr,qe),qe|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,H(Cr,qe),qe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,H(Cr,qe),qe|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,H(Cr,qe),qe|=r;return Ie(t,e,i,n),e.child}function Rp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ja(t,e,n,r,i){var s=We(n)?Qn:Te.current;return s=Rr(e,s),Or(e,i),n=qu(t,e,n,r,s,i),r=Ku(),t!==null&&!Ve?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qt(t,e,i)):(G&&r&&Ru(e),e.flags|=1,Ie(t,e,n,i),e.child)}function kd(t,e,n,r,i){if(We(n)){var s=!0;ol(e)}else s=!1;if(Or(e,i),e.stateNode===null)Ws(t,e),Tp(e,n,r),Ta(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=dt(u):(u=We(n)?Qn:Te.current,u=Rr(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&pd(e,l,r,u),Xt=!1;var h=e.memoizedState;l.state=h,fl(e,r,l,i),a=e.memoizedState,o!==r||h!==a||$e.current||Xt?(typeof c=="function"&&(Oa(e,n,c,r),a=e.memoizedState),(o=Xt||hd(e,n,o,r,h,a,u))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,ap(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:pt(e.type,o),l.props=u,f=e.pendingProps,h=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=dt(a):(a=We(n)?Qn:Te.current,a=Rr(e,a));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||h!==a)&&pd(e,l,r,a),Xt=!1,h=e.memoizedState,l.state=h,fl(e,r,l,i);var m=e.memoizedState;o!==f||h!==m||$e.current||Xt?(typeof p=="function"&&(Oa(e,n,p,r),m=e.memoizedState),(u=Xt||hd(e,n,u,r,h,m,a)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),l.props=r,l.state=m,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ia(t,e,n,r,s,i)}function Ia(t,e,n,r,i,s){Rp(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&sd(e,n,!1),qt(t,e,s);r=e.stateNode,U0.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=zr(e,t.child,null,s),e.child=zr(e,null,o,s)):Ie(t,e,o,s),e.memoizedState=r.state,i&&sd(e,n,!0),e.child}function Ap(t){var e=t.stateNode;e.pendingContext?id(t,e.pendingContext,e.pendingContext!==e.context):e.context&&id(t,e.context,!1),$u(t,e.containerInfo)}function wd(t,e,n,r,i){return Ar(),zu(i),e.flags|=256,Ie(t,e,n,r),e.child}var Pa={dehydrated:null,treeContext:null,retryLane:0};function Ra(t){return{baseLanes:t,cachePool:null,transitions:null}}function zp(t,e,n){var r=e.pendingProps,i=X.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),H(X,i&1),t===null)return Ea(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Hl(l,r,0,null),t=$n(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ra(n),e.memoizedState=Pa,t):Yu(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return H0(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=vn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=vn(o,s):(s=$n(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?Ra(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Pa,r}return s=t.child,t=s.sibling,r=vn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yu(t,e){return e=Hl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ms(t,e,n,r){return r!==null&&zu(r),zr(e,t.child,null,n),t=Yu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function H0(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Eo(Error(E(422))),Ms(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hl({mode:"visible",children:r.children},i,0,null),s=$n(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&zr(e,t.child,null,l),e.child.memoizedState=Ra(l),e.memoizedState=Pa,s);if(!(e.mode&1))return Ms(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(E(419)),r=Eo(s,r,void 0),Ms(t,e,l,r)}if(o=(l&t.childLanes)!==0,Ve||o){if(r=he,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ht(t,i),xt(r,t,i,-1))}return nc(),r=Eo(Error(E(421))),Ms(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=i1.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Je=pn(i.nextSibling),Qe=e,G=!0,gt=null,t!==null&&(nt[rt++]=Lt,nt[rt++]=Ft,nt[rt++]=Yn,Lt=t.id,Ft=t.overflow,Yn=e),e=Yu(e,r.children),e.flags|=4096,e)}function Sd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ba(t.return,e,n)}function bo(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _p(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ie(t,e,r.children,n),r=X.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sd(t,n,e);else if(t.tag===19)Sd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(H(X,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&hl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),bo(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&hl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}bo(e,!0,n,null,s);break;case"together":bo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ws(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function q0(t,e,n){switch(e.tag){case 3:Ap(e),Ar();break;case 5:up(e);break;case 1:We(e.type)&&ol(e);break;case 4:$u(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;H(cl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(H(X,X.current&1),e.flags|=128,null):n&e.child.childLanes?zp(t,e,n):(H(X,X.current&1),t=qt(t,e,n),t!==null?t.sibling:null);H(X,X.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _p(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),H(X,X.current),r)break;return null;case 22:case 23:return e.lanes=0,Pp(t,e,n)}return qt(t,e,n)}var Lp,Aa,Fp,Bp;Lp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Aa=function(){};Fp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_n(Ot.current);var s=null;switch(n){case"input":i=ra(t,i),r=ra(t,r),s=[];break;case"select":i=te({},i,{value:void 0}),r=te({},r,{value:void 0}),s=[];break;case"textarea":i=la(t,i),r=la(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sl)}aa(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Oi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Oi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&K("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Bp=function(t,e,n,r){n!==r&&(e.flags|=4)};function ni(t,e){if(!G)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function K0(t,e,n){var r=e.pendingProps;switch(Au(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return We(e.type)&&ll(),Ne(e),null;case 3:return r=e.stateNode,_r(),Q($e),Q(Te),Uu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gt!==null&&(Wa(gt),gt=null))),Aa(t,e),Ne(e),null;case 5:Wu(e);var i=_n(Bi.current);if(n=e.type,t!==null&&e.stateNode!=null)Fp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return Ne(e),null}if(t=_n(Ot.current),Cs(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mt]=e,r[Li]=s,t=(e.mode&1)!==0,n){case"dialog":K("cancel",r),K("close",r);break;case"iframe":case"object":case"embed":K("load",r);break;case"video":case"audio":for(i=0;i<ai.length;i++)K(ai[i],r);break;case"source":K("error",r);break;case"img":case"image":case"link":K("error",r),K("load",r);break;case"details":K("toggle",r);break;case"input":jc(r,s),K("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},K("invalid",r);break;case"textarea":Pc(r,s),K("invalid",r)}aa(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Ss(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Ss(r.textContent,o,t),i=["children",""+o]):Oi.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&K("scroll",r)}switch(n){case"input":ps(r),Ic(r,s,!0);break;case"textarea":ps(r),Rc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ph(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Mt]=e,t[Li]=r,Lp(t,e,!1,!1),e.stateNode=t;e:{switch(l=ua(n,r),n){case"dialog":K("cancel",t),K("close",t),i=r;break;case"iframe":case"object":case"embed":K("load",t),i=r;break;case"video":case"audio":for(i=0;i<ai.length;i++)K(ai[i],t);i=r;break;case"source":K("error",t),i=r;break;case"img":case"image":case"link":K("error",t),K("load",t),i=r;break;case"details":K("toggle",t),i=r;break;case"input":jc(t,r),i=ra(t,r),K("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=te({},r,{value:void 0}),K("invalid",t);break;case"textarea":Pc(t,r),i=la(t,r),K("invalid",t);break;default:i=r}aa(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?yh(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&mh(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ti(t,a):typeof a=="number"&&Ti(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Oi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&K("scroll",t):a!=null&&ku(t,s,a,l))}switch(n){case"input":ps(t),Ic(t,r,!1);break;case"textarea":ps(t),Rc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Nr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Nr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ne(e),null;case 6:if(t&&e.stateNode!=null)Bp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=_n(Bi.current),_n(Ot.current),Cs(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mt]=e,(s=r.nodeValue!==n)&&(t=Qe,t!==null))switch(t.tag){case 3:Ss(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ss(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mt]=e,e.stateNode=r}return Ne(e),null;case 13:if(Q(X),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(G&&Je!==null&&e.mode&1&&!(e.flags&128))ip(),Ar(),e.flags|=98560,s=!1;else if(s=Cs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[Mt]=e}else Ar(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),s=!1}else gt!==null&&(Wa(gt),gt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||X.current&1?de===0&&(de=3):nc())),e.updateQueue!==null&&(e.flags|=4),Ne(e),null);case 4:return _r(),Aa(t,e),t===null&&zi(e.stateNode.containerInfo),Ne(e),null;case 10:return Fu(e.type._context),Ne(e),null;case 17:return We(e.type)&&ll(),Ne(e),null;case 19:if(Q(X),s=e.memoizedState,s===null)return Ne(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)ni(s,!1);else{if(de!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=hl(t),l!==null){for(e.flags|=128,ni(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return H(X,X.current&1|2),e.child}t=t.sibling}s.tail!==null&&le()>Fr&&(e.flags|=128,r=!0,ni(s,!1),e.lanes=4194304)}else{if(!r)if(t=hl(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ni(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!G)return Ne(e),null}else 2*le()-s.renderingStartTime>Fr&&n!==1073741824&&(e.flags|=128,r=!0,ni(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=le(),e.sibling=null,n=X.current,H(X,r?n&1|2:n&1),e):(Ne(e),null);case 22:case 23:return tc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qe&1073741824&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function J0(t,e){switch(Au(e),e.tag){case 1:return We(e.type)&&ll(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _r(),Q($e),Q(Te),Uu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wu(e),null;case 13:if(Q(X),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Ar()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Q(X),null;case 4:return _r(),null;case 10:return Fu(e.type._context),null;case 22:case 23:return tc(),null;case 24:return null;default:return null}}var Es=!1,Ee=!1,Q0=typeof WeakSet=="function"?WeakSet:Set,R=null;function Sr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){re(t,e,r)}else n.current=null}function za(t,e,n){try{n()}catch(r){re(t,e,r)}}var Cd=!1;function Y0(t,e){if(xa=nl,t=Hh(),Pu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(o=l+i),f!==s||r!==0&&f.nodeType!==3||(a=l+r),f.nodeType===3&&(l+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++u===i&&(o=l),h===s&&++c===r&&(a=l),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ka={focusedElem:t,selectionRange:n},nl=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,w=m.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:pt(e.type,v),w);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(k){re(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return m=Cd,Cd=!1,m}function vi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&za(e,n,s)}i=i.next}while(i!==r)}}function Wl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _a(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Vp(t){var e=t.alternate;e!==null&&(t.alternate=null,Vp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mt],delete e[Li],delete e[Ca],delete e[I0],delete e[P0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $p(t){return t.tag===5||t.tag===3||t.tag===4}function Nd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$p(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function La(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sl));else if(r!==4&&(t=t.child,t!==null))for(La(t,e,n),t=t.sibling;t!==null;)La(t,e,n),t=t.sibling}function Fa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fa(t,e,n),t=t.sibling;t!==null;)Fa(t,e,n),t=t.sibling}var ge=null,mt=!1;function Qt(t,e,n){for(n=n.child;n!==null;)Wp(t,e,n),n=n.sibling}function Wp(t,e,n){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Al,n)}catch{}switch(n.tag){case 5:Ee||Sr(n,e);case 6:var r=ge,i=mt;ge=null,Qt(t,e,n),ge=r,mt=i,ge!==null&&(mt?(t=ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ge.removeChild(n.stateNode));break;case 18:ge!==null&&(mt?(t=ge,n=n.stateNode,t.nodeType===8?ko(t.parentNode,n):t.nodeType===1&&ko(t,n),Pi(t)):ko(ge,n.stateNode));break;case 4:r=ge,i=mt,ge=n.stateNode.containerInfo,mt=!0,Qt(t,e,n),ge=r,mt=i;break;case 0:case 11:case 14:case 15:if(!Ee&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&za(n,e,l),i=i.next}while(i!==r)}Qt(t,e,n);break;case 1:if(!Ee&&(Sr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){re(n,e,o)}Qt(t,e,n);break;case 21:Qt(t,e,n);break;case 22:n.mode&1?(Ee=(r=Ee)||n.memoizedState!==null,Qt(t,e,n),Ee=r):Qt(t,e,n);break;default:Qt(t,e,n)}}function Md(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Q0),e.forEach(function(r){var i=s1.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ht(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:ge=o.stateNode,mt=!1;break e;case 3:ge=o.stateNode.containerInfo,mt=!0;break e;case 4:ge=o.stateNode.containerInfo,mt=!0;break e}o=o.return}if(ge===null)throw Error(E(160));Wp(s,l,i),ge=null,mt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){re(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Up(e,t),e=e.sibling}function Up(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ht(e,t),St(t),r&4){try{vi(3,t,t.return),Wl(3,t)}catch(v){re(t,t.return,v)}try{vi(5,t,t.return)}catch(v){re(t,t.return,v)}}break;case 1:ht(e,t),St(t),r&512&&n!==null&&Sr(n,n.return);break;case 5:if(ht(e,t),St(t),r&512&&n!==null&&Sr(n,n.return),t.flags&32){var i=t.stateNode;try{Ti(i,"")}catch(v){re(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&fh(i,s),ua(o,l);var u=ua(o,s);for(l=0;l<a.length;l+=2){var c=a[l],f=a[l+1];c==="style"?yh(i,f):c==="dangerouslySetInnerHTML"?mh(i,f):c==="children"?Ti(i,f):ku(i,c,f,u)}switch(o){case"input":ia(i,s);break;case"textarea":hh(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Nr(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Nr(i,!!s.multiple,s.defaultValue,!0):Nr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Li]=s}catch(v){re(t,t.return,v)}}break;case 6:if(ht(e,t),St(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){re(t,t.return,v)}}break;case 3:if(ht(e,t),St(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pi(e.containerInfo)}catch(v){re(t,t.return,v)}break;case 4:ht(e,t),St(t);break;case 13:ht(e,t),St(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zu=le())),r&4&&Md(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ee=(u=Ee)||c,ht(e,t),Ee=u):ht(e,t),St(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(R=t,c=t.child;c!==null;){for(f=R=c;R!==null;){switch(h=R,p=h.child,h.tag){case 0:case 11:case 14:case 15:vi(4,h,h.return);break;case 1:Sr(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){re(r,n,v)}}break;case 5:Sr(h,h.return);break;case 22:if(h.memoizedState!==null){bd(f);continue}}p!==null?(p.return=h,R=p):bd(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,a=f.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=gh("display",l))}catch(v){re(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){re(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ht(e,t),St(t),r&4&&Md(t);break;case 21:break;default:ht(e,t),St(t)}}function St(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($p(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ti(i,""),r.flags&=-33);var s=Nd(t);Fa(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=Nd(t);La(t,o,l);break;default:throw Error(E(161))}}catch(a){re(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function G0(t,e,n){R=t,Hp(t)}function Hp(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Es;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ee;o=Es;var u=Ee;if(Es=l,(Ee=a)&&!u)for(R=i;R!==null;)l=R,a=l.child,l.tag===22&&l.memoizedState!==null?Od(i):a!==null?(a.return=l,R=a):Od(i);for(;s!==null;)R=s,Hp(s),s=s.sibling;R=i,Es=o,Ee=u}Ed(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):Ed(t)}}function Ed(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ee||Wl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ee)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:pt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cd(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Pi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ee||e.flags&512&&_a(e)}catch(h){re(e,e.return,h)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function bd(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function Od(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wl(4,e)}catch(a){re(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){re(e,i,a)}}var s=e.return;try{_a(e)}catch(a){re(e,s,a)}break;case 5:var l=e.return;try{_a(e)}catch(a){re(e,l,a)}}}catch(a){re(e,e.return,a)}if(e===t){R=null;break}var o=e.sibling;if(o!==null){o.return=e.return,R=o;break}R=e.return}}var X0=Math.ceil,gl=Kt.ReactCurrentDispatcher,Gu=Kt.ReactCurrentOwner,at=Kt.ReactCurrentBatchConfig,V=0,he=null,oe=null,ke=0,qe=0,Cr=En(0),de=0,Ui=null,Xn=0,Ul=0,Xu=0,xi=null,Fe=null,Zu=0,Fr=1/0,Rt=null,yl=!1,Ba=null,gn=null,bs=!1,on=null,vl=0,ki=0,Va=null,Us=-1,Hs=0;function Pe(){return V&6?le():Us!==-1?Us:Us=le()}function yn(t){return t.mode&1?V&2&&ke!==0?ke&-ke:A0.transition!==null?(Hs===0&&(Hs=Th()),Hs):(t=U,t!==0||(t=window.event,t=t===void 0?16:zh(t.type)),t):1}function xt(t,e,n,r){if(50<ki)throw ki=0,Va=null,Error(E(185));ts(t,n,r),(!(V&2)||t!==he)&&(t===he&&(!(V&2)&&(Ul|=n),de===4&&nn(t,ke)),Ue(t,r),n===1&&V===0&&!(e.mode&1)&&(Fr=le()+500,Bl&&bn()))}function Ue(t,e){var n=t.callbackNode;Ay(t,e);var r=tl(t,t===he?ke:0);if(r===0)n!==null&&_c(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_c(n),e===1)t.tag===0?R0(Td.bind(null,t)):tp(Td.bind(null,t)),D0(function(){!(V&6)&&bn()}),n=null;else{switch(Dh(r)){case 1:n=Mu;break;case 4:n=bh;break;case 16:n=el;break;case 536870912:n=Oh;break;default:n=el}n=Zp(n,qp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qp(t,e){if(Us=-1,Hs=0,V&6)throw Error(E(327));var n=t.callbackNode;if(Tr()&&t.callbackNode!==n)return null;var r=tl(t,t===he?ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xl(t,r);else{e=r;var i=V;V|=2;var s=Jp();(he!==t||ke!==e)&&(Rt=null,Fr=le()+500,Vn(t,e));do try{t1();break}catch(o){Kp(t,o)}while(1);Lu(),gl.current=s,V=i,oe!==null?e=0:(he=null,ke=0,e=de)}if(e!==0){if(e===2&&(i=pa(t),i!==0&&(r=i,e=$a(t,i))),e===1)throw n=Ui,Vn(t,0),nn(t,r),Ue(t,le()),n;if(e===6)nn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Z0(i)&&(e=xl(t,r),e===2&&(s=pa(t),s!==0&&(r=s,e=$a(t,s))),e===1))throw n=Ui,Vn(t,0),nn(t,r),Ue(t,le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:Pn(t,Fe,Rt);break;case 3:if(nn(t,r),(r&130023424)===r&&(e=Zu+500-le(),10<e)){if(tl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sa(Pn.bind(null,t,Fe,Rt),e);break}Pn(t,Fe,Rt);break;case 4:if(nn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-vt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*X0(r/1960))-r,10<r){t.timeoutHandle=Sa(Pn.bind(null,t,Fe,Rt),r);break}Pn(t,Fe,Rt);break;case 5:Pn(t,Fe,Rt);break;default:throw Error(E(329))}}}return Ue(t,le()),t.callbackNode===n?qp.bind(null,t):null}function $a(t,e){var n=xi;return t.current.memoizedState.isDehydrated&&(Vn(t,e).flags|=256),t=xl(t,e),t!==2&&(e=Fe,Fe=n,e!==null&&Wa(e)),t}function Wa(t){Fe===null?Fe=t:Fe.push.apply(Fe,t)}function Z0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!kt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nn(t,e){for(e&=~Xu,e&=~Ul,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vt(e),r=1<<n;t[n]=-1,e&=~r}}function Td(t){if(V&6)throw Error(E(327));Tr();var e=tl(t,0);if(!(e&1))return Ue(t,le()),null;var n=xl(t,e);if(t.tag!==0&&n===2){var r=pa(t);r!==0&&(e=r,n=$a(t,r))}if(n===1)throw n=Ui,Vn(t,0),nn(t,e),Ue(t,le()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pn(t,Fe,Rt),Ue(t,le()),null}function ec(t,e){var n=V;V|=1;try{return t(e)}finally{V=n,V===0&&(Fr=le()+500,Bl&&bn())}}function Zn(t){on!==null&&on.tag===0&&!(V&6)&&Tr();var e=V;V|=1;var n=at.transition,r=U;try{if(at.transition=null,U=1,t)return t()}finally{U=r,at.transition=n,V=e,!(V&6)&&bn()}}function tc(){qe=Cr.current,Q(Cr)}function Vn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,T0(n)),oe!==null)for(n=oe.return;n!==null;){var r=n;switch(Au(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ll();break;case 3:_r(),Q($e),Q(Te),Uu();break;case 5:Wu(r);break;case 4:_r();break;case 13:Q(X);break;case 19:Q(X);break;case 10:Fu(r.type._context);break;case 22:case 23:tc()}n=n.return}if(he=t,oe=t=vn(t.current,null),ke=qe=e,de=0,Ui=null,Xu=Ul=Xn=0,Fe=xi=null,zn!==null){for(e=0;e<zn.length;e++)if(n=zn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}zn=null}return t}function Kp(t,e){do{var n=oe;try{if(Lu(),Vs.current=ml,pl){for(var r=ee.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pl=!1}if(Gn=0,fe=ue=ee=null,yi=!1,Vi=0,Gu.current=null,n===null||n.return===null){de=1,Ui=e,oe=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=ke,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=o,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=gd(l);if(p!==null){p.flags&=-257,yd(p,l,o,s,e),p.mode&1&&md(s,u,e),e=p,a=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(a),e.updateQueue=v}else m.add(a);break e}else{if(!(e&1)){md(s,u,e),nc();break e}a=Error(E(426))}}else if(G&&o.mode&1){var w=gd(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),yd(w,l,o,s,e),zu(Lr(a,o));break e}}s=a=Lr(a,o),de!==4&&(de=2),xi===null?xi=[s]:xi.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Dp(s,a,e);ud(s,y);break e;case 1:o=a;var g=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(gn===null||!gn.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=jp(s,o,e);ud(s,k);break e}}s=s.return}while(s!==null)}Yp(n)}catch(N){e=N,oe===n&&n!==null&&(oe=n=n.return);continue}break}while(1)}function Jp(){var t=gl.current;return gl.current=ml,t===null?ml:t}function nc(){(de===0||de===3||de===2)&&(de=4),he===null||!(Xn&268435455)&&!(Ul&268435455)||nn(he,ke)}function xl(t,e){var n=V;V|=2;var r=Jp();(he!==t||ke!==e)&&(Rt=null,Vn(t,e));do try{e1();break}catch(i){Kp(t,i)}while(1);if(Lu(),V=n,gl.current=r,oe!==null)throw Error(E(261));return he=null,ke=0,de}function e1(){for(;oe!==null;)Qp(oe)}function t1(){for(;oe!==null&&!Ey();)Qp(oe)}function Qp(t){var e=Xp(t.alternate,t,qe);t.memoizedProps=t.pendingProps,e===null?Yp(t):oe=e,Gu.current=null}function Yp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=J0(n,e),n!==null){n.flags&=32767,oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{de=6,oe=null;return}}else if(n=K0(n,e,qe),n!==null){oe=n;return}if(e=e.sibling,e!==null){oe=e;return}oe=e=t}while(e!==null);de===0&&(de=5)}function Pn(t,e,n){var r=U,i=at.transition;try{at.transition=null,U=1,n1(t,e,n,r)}finally{at.transition=i,U=r}return null}function n1(t,e,n,r){do Tr();while(on!==null);if(V&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(zy(t,s),t===he&&(oe=he=null,ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bs||(bs=!0,Zp(el,function(){return Tr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=at.transition,at.transition=null;var l=U;U=1;var o=V;V|=4,Gu.current=null,Y0(t,n),Up(n,t),S0(ka),nl=!!xa,ka=xa=null,t.current=n,G0(n),by(),V=o,U=l,at.transition=s}else t.current=n;if(bs&&(bs=!1,on=t,vl=i),s=t.pendingLanes,s===0&&(gn=null),Dy(n.stateNode),Ue(t,le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yl)throw yl=!1,t=Ba,Ba=null,t;return vl&1&&t.tag!==0&&Tr(),s=t.pendingLanes,s&1?t===Va?ki++:(ki=0,Va=t):ki=0,bn(),null}function Tr(){if(on!==null){var t=Dh(vl),e=at.transition,n=U;try{if(at.transition=null,U=16>t?16:t,on===null)var r=!1;else{if(t=on,on=null,vl=0,V&6)throw Error(E(331));var i=V;for(V|=4,R=t.current;R!==null;){var s=R,l=s.child;if(R.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(R=u;R!==null;){var c=R;switch(c.tag){case 0:case 11:case 15:vi(8,c,s)}var f=c.child;if(f!==null)f.return=c,R=f;else for(;R!==null;){c=R;var h=c.sibling,p=c.return;if(Vp(c),c===u){R=null;break}if(h!==null){h.return=p,R=h;break}R=p}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}R=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,R=l;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vi(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,R=y;break e}R=s.return}}var g=t.current;for(R=g;R!==null;){l=R;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,R=x;else e:for(l=g;R!==null;){if(o=R,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Wl(9,o)}}catch(N){re(o,o.return,N)}if(o===l){R=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,R=k;break e}R=o.return}}if(V=i,bn(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Al,t)}catch{}r=!0}return r}finally{U=n,at.transition=e}}return!1}function Dd(t,e,n){e=Lr(n,e),e=Dp(t,e,1),t=mn(t,e,1),e=Pe(),t!==null&&(ts(t,1,e),Ue(t,e))}function re(t,e,n){if(t.tag===3)Dd(t,t,n);else for(;e!==null;){if(e.tag===3){Dd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gn===null||!gn.has(r))){t=Lr(n,t),t=jp(e,t,1),e=mn(e,t,1),t=Pe(),e!==null&&(ts(e,1,t),Ue(e,t));break}}e=e.return}}function r1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pe(),t.pingedLanes|=t.suspendedLanes&n,he===t&&(ke&n)===n&&(de===4||de===3&&(ke&130023424)===ke&&500>le()-Zu?Vn(t,0):Xu|=n),Ue(t,e)}function Gp(t,e){e===0&&(t.mode&1?(e=ys,ys<<=1,!(ys&130023424)&&(ys=4194304)):e=1);var n=Pe();t=Ht(t,e),t!==null&&(ts(t,e,n),Ue(t,n))}function i1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Gp(t,n)}function s1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),Gp(t,n)}var Xp;Xp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$e.current)Ve=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ve=!1,q0(t,e,n);Ve=!!(t.flags&131072)}else Ve=!1,G&&e.flags&1048576&&np(e,ul,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ws(t,e),t=e.pendingProps;var i=Rr(e,Te.current);Or(e,n),i=qu(null,e,r,t,i,n);var s=Ku();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(r)?(s=!0,ol(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vu(e),i.updater=$l,e.stateNode=i,i._reactInternals=e,Ta(e,r,t,n),e=Ia(null,e,r,!0,s,n)):(e.tag=0,G&&s&&Ru(e),Ie(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ws(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=o1(r),t=pt(r,t),i){case 0:e=ja(null,e,r,t,n);break e;case 1:e=kd(null,e,r,t,n);break e;case 11:e=vd(null,e,r,t,n);break e;case 14:e=xd(null,e,r,pt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),ja(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),kd(t,e,r,i,n);case 3:e:{if(Ap(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ap(t,e),fl(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Lr(Error(E(423)),e),e=wd(t,e,r,n,i);break e}else if(r!==i){i=Lr(Error(E(424)),e),e=wd(t,e,r,n,i);break e}else for(Je=pn(e.stateNode.containerInfo.firstChild),Qe=e,G=!0,gt=null,n=lp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ar(),r===i){e=qt(t,e,n);break e}Ie(t,e,r,n)}e=e.child}return e;case 5:return up(e),t===null&&Ea(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,wa(r,i)?l=null:s!==null&&wa(r,s)&&(e.flags|=32),Rp(t,e),Ie(t,e,l,n),e.child;case 6:return t===null&&Ea(e),null;case 13:return zp(t,e,n);case 4:return $u(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zr(e,null,r,n):Ie(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),vd(t,e,r,i,n);case 7:return Ie(t,e,e.pendingProps,n),e.child;case 8:return Ie(t,e,e.pendingProps.children,n),e.child;case 12:return Ie(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,H(cl,r._currentValue),r._currentValue=l,s!==null)if(kt(s.value,l)){if(s.children===i.children&&!$e.current){e=qt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Vt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ba(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(E(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),ba(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Ie(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Or(e,n),i=dt(i),r=r(i),e.flags|=1,Ie(t,e,r,n),e.child;case 14:return r=e.type,i=pt(r,e.pendingProps),i=pt(r.type,i),xd(t,e,r,i,n);case 15:return Ip(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),Ws(t,e),e.tag=1,We(r)?(t=!0,ol(e)):t=!1,Or(e,n),Tp(e,r,i),Ta(e,r,i,n),Ia(null,e,r,!0,t,n);case 19:return _p(t,e,n);case 22:return Pp(t,e,n)}throw Error(E(156,e.tag))};function Zp(t,e){return Eh(t,e)}function l1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(t,e,n,r){return new l1(t,e,n,r)}function rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function o1(t){if(typeof t=="function")return rc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Su)return 11;if(t===Cu)return 14}return 2}function vn(t,e){var n=t.alternate;return n===null?(n=lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qs(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")rc(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case hr:return $n(n.children,i,s,e);case wu:l=8,i|=8;break;case Zo:return t=lt(12,n,e,i|2),t.elementType=Zo,t.lanes=s,t;case ea:return t=lt(13,n,e,i),t.elementType=ea,t.lanes=s,t;case ta:return t=lt(19,n,e,i),t.elementType=ta,t.lanes=s,t;case uh:return Hl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oh:l=10;break e;case ah:l=9;break e;case Su:l=11;break e;case Cu:l=14;break e;case Gt:l=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=lt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $n(t,e,n,r){return t=lt(7,t,r,e),t.lanes=n,t}function Hl(t,e,n,r){return t=lt(22,t,r,e),t.elementType=uh,t.lanes=n,t.stateNode={isHidden:!1},t}function Oo(t,e,n){return t=lt(6,t,null,e),t.lanes=n,t}function To(t,e,n){return e=lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function a1(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ao(0),this.expirationTimes=ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ao(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ic(t,e,n,r,i,s,l,o,a){return t=new a1(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=lt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vu(s),t}function u1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function em(t){if(!t)return Cn;t=t._reactInternals;e:{if(sr(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(We(n))return ep(t,n,e)}return e}function tm(t,e,n,r,i,s,l,o,a){return t=ic(n,r,!0,t,i,s,l,o,a),t.context=em(null),n=t.current,r=Pe(),i=yn(n),s=Vt(r,i),s.callback=e??null,mn(n,s,i),t.current.lanes=i,ts(t,i,r),Ue(t,r),t}function ql(t,e,n,r){var i=e.current,s=Pe(),l=yn(i);return n=em(n),e.context===null?e.context=n:e.pendingContext=n,e=Vt(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mn(i,e,l),t!==null&&(xt(t,i,l,s),Bs(t,i,l)),l}function kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sc(t,e){jd(t,e),(t=t.alternate)&&jd(t,e)}function c1(){return null}var nm=typeof reportError=="function"?reportError:function(t){console.error(t)};function lc(t){this._internalRoot=t}Kl.prototype.render=lc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));ql(t,e,null,null)};Kl.prototype.unmount=lc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zn(function(){ql(null,t,null,null)}),e[Ut]=null}};function Kl(t){this._internalRoot=t}Kl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ph();t={blockedOn:null,target:t,priority:e};for(var n=0;n<tn.length&&e!==0&&e<tn[n].priority;n++);tn.splice(n,0,t),n===0&&Ah(t)}};function oc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Id(){}function d1(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=kl(l);s.call(u)}}var l=tm(e,r,t,0,null,!1,!1,"",Id);return t._reactRootContainer=l,t[Ut]=l.current,zi(t.nodeType===8?t.parentNode:t),Zn(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=kl(a);o.call(u)}}var a=ic(t,0,!1,null,null,!1,!1,"",Id);return t._reactRootContainer=a,t[Ut]=a.current,zi(t.nodeType===8?t.parentNode:t),Zn(function(){ql(e,a,n,r)}),a}function Ql(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=kl(l);o.call(a)}}ql(e,l,t,i)}else l=d1(n,e,t,i,r);return kl(l)}jh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oi(e.pendingLanes);n!==0&&(Eu(e,n|1),Ue(e,le()),!(V&6)&&(Fr=le()+500,bn()))}break;case 13:Zn(function(){var r=Ht(t,1);if(r!==null){var i=Pe();xt(r,t,1,i)}}),sc(t,1)}};bu=function(t){if(t.tag===13){var e=Ht(t,134217728);if(e!==null){var n=Pe();xt(e,t,134217728,n)}sc(t,134217728)}};Ih=function(t){if(t.tag===13){var e=yn(t),n=Ht(t,e);if(n!==null){var r=Pe();xt(n,t,e,r)}sc(t,e)}};Ph=function(){return U};Rh=function(t,e){var n=U;try{return U=t,e()}finally{U=n}};da=function(t,e,n){switch(e){case"input":if(ia(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fl(r);if(!i)throw Error(E(90));dh(r),ia(r,i)}}}break;case"textarea":hh(t,n);break;case"select":e=n.value,e!=null&&Nr(t,!!n.multiple,e,!1)}};kh=ec;wh=Zn;var f1={usingClientEntryPoint:!1,Events:[rs,yr,Fl,vh,xh,ec]},ri={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h1={bundleType:ri.bundleType,version:ri.version,rendererPackageName:ri.rendererPackageName,rendererConfig:ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nh(t),t===null?null:t.stateNode},findFiberByHostInstance:ri.findFiberByHostInstance||c1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Os=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Os.isDisabled&&Os.supportsFiber)try{Al=Os.inject(h1),bt=Os}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f1;Ze.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oc(e))throw Error(E(200));return u1(t,e,null,n)};Ze.createRoot=function(t,e){if(!oc(t))throw Error(E(299));var n=!1,r="",i=nm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ic(t,1,!1,null,null,n,!1,r,i),t[Ut]=e.current,zi(t.nodeType===8?t.parentNode:t),new lc(e)};Ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Nh(e),t=t===null?null:t.stateNode,t};Ze.flushSync=function(t){return Zn(t)};Ze.hydrate=function(t,e,n){if(!Jl(e))throw Error(E(200));return Ql(null,t,e,!0,n)};Ze.hydrateRoot=function(t,e,n){if(!oc(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=nm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=tm(e,null,t,1,n??null,i,!1,s,l),t[Ut]=e.current,zi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Kl(e)};Ze.render=function(t,e,n){if(!Jl(e))throw Error(E(200));return Ql(null,t,e,!1,n)};Ze.unmountComponentAtNode=function(t){if(!Jl(t))throw Error(E(40));return t._reactRootContainer?(Zn(function(){Ql(null,null,t,!1,function(){t._reactRootContainer=null,t[Ut]=null})}),!0):!1};Ze.unstable_batchedUpdates=ec;Ze.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jl(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Ql(t,e,n,!1,r)};Ze.version="18.3.1-next-f1338f8080-20240426";function rm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rm)}catch(t){console.error(t)}}rm(),rh.exports=Ze;var p1=rh.exports,Pd=p1;Go.createRoot=Pd.createRoot,Go.hydrateRoot=Pd.hydrateRoot;const It={identity:null,contacts:[],messages:[]},Rd=async(t,e)=>{var n;switch(console.log(`Mock invoke: ${t}`,e),await new Promise(r=>setTimeout(r,100)),t){case"get_current_identity":return It.identity;case"create_identity":const r={fingerprint:"MOCK"+Math.random().toString(36).substring(2,15).toUpperCase(),public_identity:"mock_public_key_"+Date.now(),created_at:Date.now()};return It.identity=r,r;case"import_identity":const i={fingerprint:"IMPORT"+Math.random().toString(36).substring(2,15).toUpperCase(),public_identity:"imported_public_key_"+Date.now(),created_at:Date.now()};return It.identity=i,i;case"get_contacts":return It.contacts;case"add_contact":const s=e.contact;return It.contacts.find(f=>f.fingerprint===s.fingerprint)||It.contacts.push({...s,public_key:s.public_key||"mock_public_key_"+s.fingerprint}),!0;case"get_messages":const l=e.contactFingerprint;return It.messages.filter(f=>f.sender_fingerprint===l||f.recipient_fingerprint===l);case"encrypt_message":return{encrypted_data:"ENCRYPTED_"+btoa(e.message),sender_public_key:((n=It.identity)==null?void 0:n.public_identity)||"unknown",timestamp:Date.now()};case"decrypt_message":const a=e.encrypted_message.encrypted_data;if(a.startsWith("ENCRYPTED_"))return atob(a.replace("ENCRYPTED_",""));throw new Error("Failed to decrypt message");case"store_message":const u=e.message;return It.messages.push(u),!0;case"create_document":return{file_path:"/tmp/mock_document_"+Date.now()+".securedoc"};case"save_document_to_path":return console.log(`Mock: Saving document from ${e.sourcePath} to ${e.targetPath}`),!0;default:throw new Error(`Mock: Unknown command ${t}`)}},Ad=async t=>(console.log("Mock save dialog:",t),`/tmp/mock_save_${Date.now()}.securedoc`),im=typeof window<"u"&&window.__TAURI__,Z=im?async(t,e)=>Rd(t,e):Rd,m1=im?async t=>Ad(t):Ad;const g1=({onLoginSuccess:t,initialTab:e="hardkey"})=>{const[n,r]=P.useState(e),[i,s]=P.useState(""),[l,o]=P.useState(!1),[a,u]=P.useState(null),[c,f]=P.useState({present:!1}),[h,p]=P.useState(!1);P.useEffect(()=>{if(n==="hardkey"){m();const g=setInterval(m,2e3);return()=>clearInterval(g)}},[n]);const m=async()=>{try{const g=await Z("check_hardkey_cmd");f(g)}catch(g){console.error("Failed to check hardware key:",g),f({present:!1})}},v=async g=>{if(g.preventDefault(),!i.trim()){u("Please enter your passphrase");return}o(!0),u(null);try{const x=await Z("verify_local_passphrase_cmd",{passphrase:i});x.ok?t():u(x.error||"Authentication failed")}catch(x){u(`Login error: ${x}`)}finally{o(!1)}},w=async()=>{if(!c.present){u("No hardware key detected. Please insert your hardware key.");return}o(!0),u(null);try{const g=await Z("set_hardkey_mode_cmd");g.ok?t():u(g.error||"Hardware key authentication failed")}catch(g){u(`Hardware key error: ${g}`)}finally{o(!1)}},y=async g=>{if(g.preventDefault(),!i.trim()){u("Please enter a passphrase");return}if(i.length<10){u("Passphrase must be at least 10 characters long");return}o(!0),u(null);try{const x=await Z("set_local_passphrase_cmd",{passphrase:i});x.ok?(p(!1),t()):u(x.error||"Failed to set passphrase")}catch(x){u(`Setup error: ${x}`)}finally{o(!1)}};return h?d.jsx("div",{className:"login-container",children:d.jsxs("div",{className:"login-card",children:[d.jsxs("div",{className:"login-header",children:[d.jsx("h1",{children:"🔒 Set Up Local Passphrase"}),d.jsx("p",{children:"Create a passphrase for local-only access"})]}),d.jsxs("div",{className:"security-warning",children:[d.jsx("div",{className:"warning-icon",children:"⚠️"}),d.jsxs("div",{className:"warning-content",children:[d.jsx("h3",{children:"Security Warning"}),d.jsx("p",{children:"Local-only login stores an encrypted credential on this device. This can be a security hazard if the device is seized."}),d.jsxs("ul",{children:[d.jsx("li",{children:"Your passphrase will be encrypted and stored locally"}),d.jsx("li",{children:"Use a strong, unique passphrase"}),d.jsx("li",{children:"Consider using a hardware key instead for maximum security"})]})]})]}),a&&d.jsx("div",{className:"error-message",children:d.jsxs("span",{children:["❌ ",a]})}),d.jsxs("form",{onSubmit:y,className:"login-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"setup-passphrase",children:"New Passphrase (minimum 10 characters)"}),d.jsx("input",{id:"setup-passphrase",type:"password",value:i,onChange:g=>s(g.target.value),placeholder:"Enter a strong passphrase...",className:"passphrase-input",disabled:l,autoFocus:!0})]}),d.jsxs("div",{className:"button-group",children:[d.jsx("button",{type:"button",onClick:()=>p(!1),className:"secondary-button",disabled:l,children:"Cancel"}),d.jsx("button",{type:"submit",className:"primary-button",disabled:l||i.length<10,children:l?"Setting up...":"Create Passphrase"})]})]})]})}):d.jsx("div",{className:"login-container",children:d.jsxs("div",{className:"login-card",children:[d.jsxs("div",{className:"login-header",children:[d.jsx("h1",{children:"🔑 Ephemeral Messenger"}),d.jsx("p",{className:"brand-tagline",children:"✝️ Jesus is King"}),d.jsx("p",{children:"Please authenticate to continue"})]}),d.jsxs("div",{className:"login-tabs",children:[d.jsx("button",{className:`tab-button ${n==="hardkey"?"active":""}`,onClick:()=>r("hardkey"),children:"🔒 Use Hard Key"}),d.jsx("button",{className:`tab-button ${n==="passphrase"?"active":""}`,onClick:()=>r("passphrase"),children:"🔑 Use Passphrase"})]}),a&&d.jsxs("div",{className:"error-message",children:[d.jsxs("span",{children:["❌ ",a]}),d.jsx("button",{onClick:()=>u(null),className:"error-close",children:"×"})]}),n==="hardkey"&&d.jsx("div",{className:"tab-content",children:d.jsxs("div",{className:"hardkey-section",children:[d.jsxs("div",{className:"hardkey-status",children:[d.jsx("div",{className:`status-indicator ${c.present?"connected":"disconnected"}`,children:c.present?"🟢":"🔴"}),d.jsx("div",{className:"status-text",children:c.present?d.jsxs("div",{children:[d.jsx("div",{className:"status-title",children:"Hardware Key Detected"}),d.jsxs("div",{className:"status-detail",children:["ID: ",c.fingerprint]})]}):d.jsxs("div",{children:[d.jsx("div",{className:"status-title",children:"No Hardware Key Detected"}),d.jsx("div",{className:"status-detail",children:"Please insert your hardware key with KEYSTORE/secure_key.json"})]})})]}),d.jsxs("div",{className:"hardkey-instructions",children:[d.jsx("h3",{children:"Instructions:"}),d.jsxs("ol",{children:[d.jsx("li",{children:"Insert your removable hardware key"}),d.jsxs("li",{children:["Ensure it contains ",d.jsx("code",{children:"KEYSTORE/secure_key.json"})]}),d.jsx("li",{children:'Click "Continue with Hard Key" when detected'})]})]}),d.jsx("div",{className:"button-group",children:d.jsx("button",{onClick:w,className:"primary-button",disabled:!c.present||l,children:l?"Authenticating...":"Continue with Hard Key"})})]})}),n==="passphrase"&&d.jsxs("div",{className:"tab-content",children:[d.jsxs("div",{className:"security-warning",children:[d.jsx("div",{className:"warning-icon",children:"⚠️"}),d.jsxs("div",{className:"warning-content",children:[d.jsx("h3",{children:"Security Notice"}),d.jsx("p",{children:"Local-only login stores an encrypted credential on this device. This can be a security hazard if the device is seized. Use a strong passphrase or prefer Hard Key authentication."})]})]}),d.jsxs("form",{onSubmit:v,className:"login-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"passphrase",children:"Master Passphrase"}),d.jsx("input",{id:"passphrase",type:"password",value:i,onChange:g=>s(g.target.value),placeholder:"Enter your passphrase...",className:"passphrase-input",disabled:l,autoFocus:!0})]}),d.jsx("div",{className:"button-group",children:d.jsx("button",{type:"submit",className:"primary-button",disabled:!i.trim()||l,children:l?"Unlocking...":"Unlock"})})]}),d.jsxs("div",{className:"setup-link",children:[d.jsx("p",{children:"Don't have a passphrase set up?"}),d.jsx("button",{onClick:()=>p(!0),className:"link-button",disabled:l,children:"Set up local passphrase"})]})]}),d.jsxs("div",{className:"login-footer",children:[d.jsx("p",{children:"🔒 Zero persistence • Triple encryption • Hardware token ready"}),d.jsx("p",{className:"login-tagline",children:"✝️ Jesus is King"})]})]})})};const y1=({onIdentityCreated:t,onError:e})=>{const[n,r]=P.useState(""),[i,s]=P.useState(""),[l,o]=P.useState(!1),[a,u]=P.useState(!1),[c,f]=P.useState(!1),h=v=>v.length<12?"Passphrase must be at least 12 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/.test(v)?null:"Passphrase must contain uppercase, lowercase, number, and special character",p=async()=>{if(n!==i){e("Passphrases do not match");return}const v=h(n);if(v){e(v);return}try{o(!0);const w=await Z("create_identity",{passphrase:n,useHardwareToken:c});t(w),r(""),s("")}catch(w){e(`Failed to create identity: ${w}`)}finally{o(!1)}},m=async()=>{try{const v=await Z("import_identity",{passphrase:n});t(v)}catch(v){e(`Failed to import identity: ${v}`)}};return d.jsx("div",{className:"identity-manager",children:d.jsxs("div",{className:"identity-card",children:[d.jsx("h2",{children:"Create Secure Identity"}),d.jsx("p",{className:"identity-description",children:"Your identity is encrypted with your passphrase and stored only in memory. No data is written to disk."}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"passphrase",children:"Master Passphrase"}),d.jsx("input",{id:"passphrase",type:"password",value:n,onChange:v=>r(v.target.value),placeholder:"Enter a strong passphrase...",className:"passphrase-input",disabled:l}),d.jsx("small",{className:"passphrase-hint",children:"Minimum 12 characters with uppercase, lowercase, numbers, and symbols"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"confirm-passphrase",children:"Confirm Passphrase"}),d.jsx("input",{id:"confirm-passphrase",type:"password",value:i,onChange:v=>s(v.target.value),placeholder:"Confirm your passphrase...",className:"passphrase-input",disabled:l})]}),d.jsxs("button",{className:"advanced-toggle",onClick:()=>u(!a),type:"button",children:[a?"▼":"▶"," Advanced Options"]}),a&&d.jsx("div",{className:"advanced-options",children:d.jsxs("div",{className:"checkbox-group",children:[d.jsx("input",{id:"hardware-token",type:"checkbox",checked:c,onChange:v=>f(v.target.checked),disabled:l}),d.jsx("label",{htmlFor:"hardware-token",children:"Use Hardware Token (YubiKey/OpenPGP)"})]})}),d.jsxs("div",{className:"button-group",children:[d.jsx("button",{className:"create-button primary",onClick:p,disabled:l||!n||!i,children:l?"Creating...":"Create Identity"}),d.jsx("button",{className:"import-button secondary",onClick:m,disabled:l||!n,children:"Import Existing"})]}),d.jsxs("div",{className:"security-notice",children:[d.jsx("h3",{children:"🔒 Security Notice"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Your passphrase cannot be recovered if lost"}),d.jsx("li",{children:"Identity keys are generated using secure random sources"}),d.jsx("li",{children:"All data is encrypted with military-grade algorithms"}),d.jsx("li",{children:"No telemetry or tracking is performed"})]})]})]})})};function ye(t){this.content=t}ye.prototype={constructor:ye,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new ye(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ye(n)},addToStart:function(t,e){return new ye([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ye(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new ye(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ye.from(t),t.size?new ye(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ye.from(t),t.size?new ye(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ye.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ye.from=function(t){if(t instanceof ye)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ye(e)};function sm(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let l=0;i.text[l]==s.text[l];l++)n++;return n}if(i.content.size||s.content.size){let l=sm(i.content,s.content,n+1);if(l!=null)return l}n+=i.nodeSize}}function lm(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let l=t.child(--i),o=e.child(--s),a=l.nodeSize;if(l==o){n-=a,r-=a;continue}if(!l.sameMarkup(o))return{a:n,b:r};if(l.isText&&l.text!=o.text){let u=0,c=Math.min(l.text.length,o.text.length);for(;u<c&&l.text[l.text.length-u-1]==o.text[o.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(l.content.size||o.content.size){let u=lm(l.content,o.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class M{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let l=0,o=0;o<n;l++){let a=this.content[l],u=o+a.nodeSize;if(u>e&&r(a,i+o,s||null,l)!==!1&&a.content.size){let c=o+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),r,i+c)}o=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",l=!0;return this.nodesBetween(e,n,(o,a)=>{let u=o.isText?o.text.slice(Math.max(e,a)-a,n-a):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&u||o.isTextblock)&&r&&(l?l=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new M(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,l=0;l<n;s++){let o=this.content[s],a=l+o.nodeSize;a>e&&((l<e||a>n)&&(o.isText?o=o.cut(Math.max(0,e-l),Math.min(o.text.length,n-l)):o=o.cut(Math.max(0,e-l-1),Math.min(o.content.size,n-l-1))),r.push(o),i+=o.nodeSize),l=a}return new M(r,i)}cutByIndex(e,n){return e==n?M.empty:e==0&&n==this.content.length?this:new M(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new M(i,s)}addToStart(e){return new M([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new M(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return sm(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return lm(this,e,n,r)}findIndex(e){if(e==0)return Ts(0,e);if(e==this.size)return Ts(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?Ts(n+1,s):Ts(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return M.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return M.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new M(n||e,r)}static from(e){if(!e)return M.empty;if(e instanceof M)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new M([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);const Do={index:0,offset:0};function Ts(t,e){return Do.index=t,Do.offset=e,Do}function wl(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!wl(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!wl(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}class ${constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&wl(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return $.none;if(e instanceof $)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}$.none=[];class Sl extends Error{}class I{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=am(this.content,e+this.openStart,n);return r&&new I(r,this.openStart,this.openEnd)}removeBetween(e,n){return new I(om(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return I.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new I(M.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new I(e,r,i)}}I.empty=new I(M.empty,0,0);function om(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:l,offset:o}=t.findIndex(n);if(i==e||s.isText){if(o!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(om(s.content,e-i-1,n-i-1)))}function am(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),l=t.maybeChild(i);if(s==e||l.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let o=am(l.content,e-s-1,n,l);return o&&t.replaceChild(i,l.copy(o))}function v1(t,e,n){if(n.openStart>t.depth)throw new Sl("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Sl("Inconsistent open depths");return um(t,e,n,0)}function um(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let l=um(t,e,n,r+1);return s.copy(s.content.replaceChild(i,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,o=l.content;return Un(l,o.cut(0,t.parentOffset).append(n.content).append(o.cut(e.parentOffset)))}else{let{start:l,end:o}=x1(n,t);return Un(s,dm(t,l,o,e,r))}else return Un(s,Cl(t,e,r))}function cm(t,e){if(!e.type.compatibleContent(t.type))throw new Sl("Cannot join "+e.type.name+" onto "+t.type.name)}function Ua(t,e,n){let r=t.node(n);return cm(r,e.node(n)),r}function Wn(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function wi(t,e,n,r){let i=(e||t).node(n),s=0,l=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Wn(t.nodeAfter,r),s++));for(let o=s;o<l;o++)Wn(i.child(o),r);e&&e.depth==n&&e.textOffset&&Wn(e.nodeBefore,r)}function Un(t,e){return t.type.checkContent(e),t.copy(e)}function dm(t,e,n,r,i){let s=t.depth>i&&Ua(t,e,i+1),l=r.depth>i&&Ua(n,r,i+1),o=[];return wi(null,t,i,o),s&&l&&e.index(i)==n.index(i)?(cm(s,l),Wn(Un(s,dm(t,e,n,r,i+1)),o)):(s&&Wn(Un(s,Cl(t,e,i+1)),o),wi(e,n,i,o),l&&Wn(Un(l,Cl(n,r,i+1)),o)),wi(r,null,i,o),new M(o)}function Cl(t,e,n){let r=[];if(wi(null,t,n,r),t.depth>n){let i=Ua(t,e,n+1);Wn(Un(i,Cl(t,e,n+1)),r)}return wi(e,null,n,r),new M(r)}function x1(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(M.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Hi{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return $.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let o=r;r=i,i=o}let s=r.marks;for(var l=0;l<s.length;l++)s[l].type.spec.inclusive===!1&&(!i||!s[l].isInSet(i.marks))&&(s=s[l--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Nl(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let l=e;;){let{index:o,offset:a}=l.content.findIndex(s),u=s-a;if(r.push(l,o,i+a),!u||(l=l.child(o),l.isText))break;s=u-1,i+=a+1}return new Hi(n,r,s)}static resolveCached(e,n){let r=zd.get(e);if(r)for(let s=0;s<r.elts.length;s++){let l=r.elts[s];if(l.pos==n)return l}else zd.set(e,r=new k1);let i=r.elts[r.i]=Hi.resolve(e,n);return r.i=(r.i+1)%w1,i}}class k1{constructor(){this.elts=[],this.i=0}}const w1=12,zd=new WeakMap;class Nl{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const S1=Object.create(null);let Hn=class Ha{constructor(e,n,r,i=$.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||M.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&wl(this.attrs,n||e.defaultAttrs||S1)&&$.sameSet(this.marks,r||$.none)}copy(e=null){return e==this.content?this:new Ha(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ha(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return I.empty;let i=this.resolve(e),s=this.resolve(n),l=r?0:i.sharedDepth(n),o=i.start(l),u=i.node(l).content.cut(i.pos-o,s.pos-o);return new I(u,i.depth-l,s.depth-l)}replace(e,n,r){return v1(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Hi.resolveCached(this,e)}resolveNoCache(e){return Hi.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),fm(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=M.empty,i=0,s=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,s),o=l&&l.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),l=s&&s.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=$.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!$.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=M.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Hn.prototype.text=void 0;class Ml extends Hn{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):fm(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ml(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ml(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function fm(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class er{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new C1(e,n);if(r.next==null)return er.empty;let i=hm(r);r.next&&r.err("Unexpected trailing text");let s=D1(T1(i));return j1(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(l,o){let a=l.matchFragment(e,r);if(a&&(!n||a.validEnd))return M.from(o.map(u=>u.createAndFill()));for(let u=0;u<l.next.length;u++){let{type:c,next:f}=l.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let h=s(f,o.concat(c));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let l=[];for(let o=i;o.type;o=o.via)l.push(o.type);return l.reverse()}for(let l=0;l<s.next.length;l++){let{type:o,next:a}=s.next[l];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!i.type||a.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)s+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return s}).join(`
`)}}er.empty=new er(!0);class C1{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function hm(t){let e=[];do e.push(N1(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function N1(t){let e=[];do e.push(M1(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function M1(t){let e=O1(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=E1(t,e);else break;return e}function _d(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function E1(t,e){let n=_d(t),r=n;return t.eat(",")&&(t.next!="}"?r=_d(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function b1(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let l=n[s];l.isInGroup(e)&&i.push(l)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function O1(t){if(t.eat("(")){let e=hm(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=b1(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function T1(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(l,o,a){let u={term:a,to:o};return e[l].push(u),u}function i(l,o){l.forEach(a=>a.to=o)}function s(l,o){if(l.type=="choice")return l.exprs.reduce((a,u)=>a.concat(s(u,o)),[]);if(l.type=="seq")for(let a=0;;a++){let u=s(l.exprs[a],o);if(a==l.exprs.length-1)return u;i(u,o=n())}else if(l.type=="star"){let a=n();return r(o,a),i(s(l.expr,a),a),[r(a)]}else if(l.type=="plus"){let a=n();return i(s(l.expr,o),a),i(s(l.expr,a),a),[r(a)]}else{if(l.type=="opt")return[r(o)].concat(s(l.expr,o));if(l.type=="range"){let a=o;for(let u=0;u<l.min;u++){let c=n();i(s(l.expr,a),c),a=c}if(l.max==-1)i(s(l.expr,a),a);else for(let u=l.min;u<l.max;u++){let c=n();r(a,c),i(s(l.expr,a),c),a=c}return[r(a)]}else{if(l.type=="name")return[r(o,void 0,l.value)];throw new Error("Unknown expr type")}}}}function pm(t,e){return e-t}function Ld(t,e){let n=[];return r(e),n.sort(pm);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let l=0;l<s.length;l++){let{term:o,to:a}=s[l];!o&&n.indexOf(a)==-1&&r(a)}}}function D1(t){let e=Object.create(null);return n(Ld(t,0));function n(r){let i=[];r.forEach(l=>{t[l].forEach(({term:o,to:a})=>{if(!o)return;let u;for(let c=0;c<i.length;c++)i[c][0]==o&&(u=i[c][1]);Ld(t,a).forEach(c=>{u||i.push([o,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let s=e[r.join(",")]=new er(r.indexOf(t.length-1)>-1);for(let l=0;l<i.length;l++){let o=i[l][1].sort(pm);s.next.push({type:i[l][0],next:e[o.join(",")]||n(o)})}return s}}function j1(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,l=[];for(let o=0;o<i.next.length;o++){let{type:a,next:u}=i.next[o];l.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function mm(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function gm(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function ym(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function vm(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new P1(t,r,e[r]);return n}let Fd=class xm{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=vm(e,r.attrs),this.defaultAttrs=mm(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==er.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:gm(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Hn(this,this.computeAttrs(e),M.from(n),$.setFrom(r))}createChecked(e=null,n,r){return n=M.from(n),this.checkContent(n),new Hn(this,this.computeAttrs(e),n,$.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=M.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(M.empty,!0);return s?new Hn(this,e,n.append(s),$.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ym(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:$.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,l)=>r[s]=new xm(s,n,l));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function I1(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class P1{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?I1(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Yl{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=vm(e,i.attrs),this.excluded=null;let s=mm(this.attrs);this.instance=s?new $(this,s):null}create(e=null){return!e&&this.instance?this.instance:new $(this,gm(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,l)=>r[s]=new Yl(s,i++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){ym(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class km{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=ye.from(e.nodes),n.marks=ye.from(e.marks||{}),this.nodes=Fd.compile(this.spec.nodes,this),this.marks=Yl.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],l=s.spec.content||"",o=s.spec.marks;if(s.contentMatch=r[l]||(r[l]=er.parse(l,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=o=="_"?null:o?Bd(this,o.split(" ")):o==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],l=s.spec.excludes;s.excluded=l==null?[s]:l==""?[]:Bd(this,l.split(" "))}this.nodeFromJSON=i=>Hn.fromJSON(this,i),this.markFromJSON=i=>$.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Fd){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ml(r,r.defaultAttrs,e,$.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Bd(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],l=s;if(s)n.push(s);else for(let o in t.marks){let a=t.marks[o];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(l=a)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function R1(t){return t.tag!=null}function A1(t){return t.style!=null}class Br{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(R1(i))this.tags.push(i);else if(A1(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new $d(this,n,!1);return r.addAll(e,$.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new $d(this,n,!0);return r.addAll(e,$.none,n.from,n.to),I.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(L1(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let l=s.getAttrs(e);if(l===!1)continue;s.attrs=l||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let l=this.styles[s],o=l.style;if(!(o.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||o.length>e.length&&(o.charCodeAt(e.length)!=61||o.slice(e.length+1)!=n))){if(l.getAttrs){let a=l.getAttrs(n);if(a===!1)continue;l.attrs=a||void 0}return l}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,l=0;for(;l<n.length;l++){let o=n[l];if((o.priority==null?50:o.priority)<s)break}n.splice(l,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(l=>{r(l=Wd(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(l=>{r(l=Wd(l)),l.node||l.ignore||l.mark||(l.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Br(e,Br.schemaRules(e)))}}const wm={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},z1={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Sm={ol:!0,ul:!0},qi=1,qa=2,Si=4;function Vd(t,e,n){return e!=null?(e?qi:0)|(e==="full"?qa:0):t&&t.whitespace=="pre"?qi|qa:n&~Si}class Ds{constructor(e,n,r,i,s,l){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=$.none,this.match=s||(l&Si?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(M.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&qi)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=M.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(M.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!wm.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class $d{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,l=Vd(null,n.preserveWhitespace,0)|(r?Si:0);i?s=new Ds(i.type,i.attrs,$.none,!0,n.topMatch||i.type.contentMatch,l):r?s=new Ds(null,null,$.none,!0,null,l):s=new Ds(e.schema.topNodeType,null,$.none,!0,null,l),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&qa?"full":this.localPreserveWS||(i.options&qi)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],o=e.previousSibling;(!l||o&&o.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),o;Sm.hasOwnProperty(l)&&this.parser.normalizeLists&&_1(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));e:if(a?a.ignore:z1.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let u,c=this.needsBlock;if(wm.hasOwnProperty(l))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=a&&a.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),u&&this.sync(s),this.needsBlock=c}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,a,u,a.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],l=r.getPropertyValue(s);if(l)for(let o=void 0;;){let a=this.parser.matchStyle(s,l,this,o);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(u=>!a.clearMark(u)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)o=a;else break}}return n}addElementByRule(e,n,r,i){let s,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(l,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let o=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(o)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let l=r?e.childNodes[r]:e.firstChild,o=i==null?null:e.childNodes[i];l!=o;l=l.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(l,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let l=this.open,o=0;l>=0;l--){let a=this.nodes[l],u=a.findWrapping(e);if(u&&(!i||i.length>u.length+o)&&(i=u,s=a,!u.length))break;if(a.solid){if(r)break;o+=2}}if(!i)return null;this.sync(s);for(let l=0;l<i.length;l++)n=this.enterInner(i[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let l=$.none;for(let o of i.concat(e.marks))(s.type?s.type.allowsMarkType(o.type):Ud(o.type,e.type))&&(l=o.addToSet(l));return s.content.push(e.mark(l)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let o=Vd(e,s,l.options);l.options&Si&&l.content.length==0&&(o|=Si);let a=$.none;return r=r.filter(u=>(l.type?l.type.allowsMarkType(u.type):Ud(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new Ds(e,n,a,i,null,o)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=qi)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),l=(o,a)=>{for(;o>=0;o--){let u=n[o];if(u==""){if(o==n.length-1||o==0)continue;for(;a>=s;a--)if(l(o-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;a--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function _1(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Sm.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function L1(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Wd(t){let e={};for(let n in t)e[n]=t[n];return e}function Ud(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],l=o=>{s.push(o);for(let a=0;a<o.edgeCount;a++){let{type:u,next:c}=o.edge(a);if(u==e||s.indexOf(c)<0&&l(c))return!0}};if(l(i.contentMatch))return!0}}class Jr{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=jo(n).createDocumentFragment());let i=r,s=[];return e.forEach(l=>{if(s.length||l.marks.length){let o=0,a=0;for(;o<s.length&&a<l.marks.length;){let u=l.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(s[o][0])||u.type.spec.spanning===!1)break;o++,a++}for(;o<s.length;)i=s.pop()[1];for(;a<l.marks.length;){let u=l.marks[a++],c=this.serializeMark(u,l.isInline,n);c&&(s.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Ks(jo(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Ks(jo(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Ks(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Jr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Hd(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Hd(e.marks)}}function Hd(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function jo(t){return t.document||window.document}const qd=new WeakMap;function F1(t){let e=qd.get(t);return e===void 0&&qd.set(t,e=B1(t)),e}function B1(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Ks(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=F1(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let o,a=n?t.createElementNS(n,i):t.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let f in u)if(u[f]!=null){let h=f.indexOf(" ");h>0?a.setAttributeNS(f.slice(0,h),f.slice(h+1),u[f]):f=="style"&&a.style?a.style.cssText=u[f]:a.setAttribute(f,u[f])}}for(let f=c;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:p,contentDOM:m}=Ks(t,h,n,r);if(a.appendChild(p),m){if(o)throw new RangeError("Multiple content holes");o=m}}}return{dom:a,contentDOM:o}}const Cm=65535,Nm=Math.pow(2,16);function V1(t,e){return t+e*Nm}function Kd(t){return t&Cm}function $1(t){return(t-(t&Cm))/Nm}const Mm=1,Em=2,Js=4,bm=8;class Ka{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&bm)>0}get deletedBefore(){return(this.delInfo&(Mm|Js))>0}get deletedAfter(){return(this.delInfo&(Em|Js))>0}get deletedAcross(){return(this.delInfo&Js)>0}}class Ke{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Ke.empty)return Ke.empty}recover(e){let n=0,r=Kd(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+$1(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,l=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[o+s],c=this.ranges[o+l],f=a+u;if(e<=f){let h=u?e==a?-1:e==f?1:n:n,p=a+i+(h<0?0:c);if(r)return p;let m=e==(n<0?a:f)?null:V1(o/3,e-a),v=e==a?Em:e==f?Mm:Js;return(n<0?e!=a:e!=f)&&(v|=bm),new Ka(p,v,m)}i+=c-u}return r?e+i:new Ka(e+i,0,null)}touches(e,n){let r=0,i=Kd(n),s=this.inverted?2:1,l=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[o+s],c=a+u;if(e<=c&&o==i*3)return!0;r+=this.ranges[o+l]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let l=this.ranges[i],o=l-(this.inverted?s:0),a=l+(this.inverted?0:s),u=this.ranges[i+n],c=this.ranges[i+r];e(o,o+u,a,a+c),s+=c-u}}invert(){return new Ke(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ke.empty:new Ke(e<0?[0,-e,0]:[0,0,e])}}Ke.empty=new Ke([]);class Ki{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Ki(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Ki;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let l=this._maps[s],o=l.mapResult(e,n);if(o.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this._maps[a].recover(o.recover);continue}}i|=o.delInfo,e=o.pos}return r?e:new Ka(e,i,null)}}const Io=Object.create(null);class De{getMap(){return Ke.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Io[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Io)throw new RangeError("Duplicate use of step JSON ID "+e);return Io[e]=n,n.prototype.jsonID=e,n}}class ae{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ae(e,null)}static fail(e){return new ae(null,e)}static fromReplace(e,n,r,i){try{return ae.ok(e.replace(n,r,i))}catch(s){if(s instanceof Sl)return ae.fail(s.message);throw s}}}function ac(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(ac(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return M.fromArray(r)}class an extends De{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new I(ac(n.content,(l,o)=>!l.isAtom||!o.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),n.openStart,n.openEnd);return ae.fromReplace(e,this.from,this.to,s)}invert(){return new Et(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new an(n.pos,r.pos,this.mark)}merge(e){return e instanceof an&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new an(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new an(n.from,n.to,e.markFromJSON(n.mark))}}De.jsonID("addMark",an);class Et extends De{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new I(ac(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return ae.fromReplace(e,this.from,this.to,r)}invert(){return new an(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Et(n.pos,r.pos,this.mark)}merge(e){return e instanceof Et&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Et(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Et(n.from,n.to,e.markFromJSON(n.mark))}}De.jsonID("removeMark",Et);class un extends De{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ae.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ae.fromReplace(e,this.pos,this.pos+1,new I(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new un(this.pos,n.marks[i]);return new un(this.pos,this.mark)}}return new tr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new un(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new un(n.pos,e.markFromJSON(n.mark))}}De.jsonID("addNodeMark",un);class tr extends De{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ae.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ae.fromReplace(e,this.pos,this.pos+1,new I(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new un(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new tr(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new tr(n.pos,e.markFromJSON(n.mark))}}De.jsonID("removeNodeMark",tr);class be extends De{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Ja(e,this.from,this.to)?ae.fail("Structure replace would overwrite content"):ae.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ke([this.from,this.to-this.from,this.slice.size])}invert(e){return new be(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new be(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof be)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?I.empty:new I(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new be(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?I.empty:new I(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new be(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new be(n.from,n.to,I.fromJSON(e,n.slice),!!n.structure)}}De.jsonID("replace",be);class we extends De{constructor(e,n,r,i,s,l,o=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=l,this.structure=o}apply(e){if(this.structure&&(Ja(e,this.from,this.gapFrom)||Ja(e,this.gapTo,this.to)))return ae.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ae.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ae.fromReplace(e,this.from,this.to,r):ae.fail("Content does not fit in gap")}getMap(){return new Ke([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new we(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new we(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new we(n.from,n.to,n.gapFrom,n.gapTo,I.fromJSON(e,n.slice),n.insert,!!n.structure)}}De.jsonID("replaceAround",we);function Ja(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let l=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function W1(t,e,n,r){let i=[],s=[],l,o;t.doc.nodesBetween(e,n,(a,u,c)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let h=Math.max(u,e),p=Math.min(u+a.nodeSize,n),m=r.addToSet(f);for(let v=0;v<f.length;v++)f[v].isInSet(m)||(l&&l.to==h&&l.mark.eq(f[v])?l.to=p:i.push(l=new Et(h,p,f[v])));o&&o.to==h?o.to=p:s.push(o=new an(h,p,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function U1(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(l,o)=>{if(!l.isInline)return;s++;let a=null;if(r instanceof Yl){let u=l.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(l.marks)&&(a=[r]):a=l.marks;if(a&&a.length){let u=Math.min(o+l.nodeSize,n);for(let c=0;c<a.length;c++){let f=a[c],h;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&f.eq(i[p].style)&&(h=m)}h?(h.to=u,h.step=s):i.push({style:f,from:Math.max(o,e),to:u,step:s})}}}),i.forEach(l=>t.step(new Et(l.from,l.to,l.style)))}function uc(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),l=[],o=e+1;for(let a=0;a<s.childCount;a++){let u=s.child(a),c=o+u.nodeSize,f=r.matchType(u.type);if(!f)l.push(new be(o,c,I.empty));else{r=f;for(let h=0;h<u.marks.length;h++)n.allowsMarkType(u.marks[h].type)||t.step(new Et(o,c,u.marks[h]));if(i&&u.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(u.text);)m||(m=new I(M.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),l.push(new be(o+h.index,o+h.index+h[0].length,m))}}o=c}if(!r.validEnd){let a=r.fillBefore(M.empty,!0);t.replace(o,o,new I(a,0,0))}for(let a=l.length-1;a>=0;a--)t.step(l[a])}function H1(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ss(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),l=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,l,n))return r;if(r==0||i.type.spec.isolating||!H1(i,s,l))break}return null}function q1(t,e,n){let{$from:r,$to:i,depth:s}=e,l=r.before(s+1),o=i.after(s+1),a=l,u=o,c=M.empty,f=0;for(let m=s,v=!1;m>n;m--)v||r.index(m)>0?(v=!0,c=M.from(r.node(m).copy(c)),f++):a--;let h=M.empty,p=0;for(let m=s,v=!1;m>n;m--)v||i.after(m+1)<i.end(m)?(v=!0,h=M.from(i.node(m).copy(h)),p++):u++;t.step(new we(a,u,l,o,new I(c.append(h),f,p),c.size-f,!0))}function cc(t,e,n=null,r=t){let i=K1(t,e),s=i&&J1(r,e);return s?i.map(Jd).concat({type:e,attrs:n}).concat(s.map(Jd)):null}function Jd(t){return{type:t,attrs:null}}function K1(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let l=s.length?s[0]:e;return n.canReplaceWith(r,i,l)?s:null}function J1(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),l=e.contentMatch.findWrapping(s.type);if(!l)return null;let a=(l.length?l[l.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:l}function Q1(t,e,n){let r=M.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let o=n[l].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=M.from(n[l].type.create(n[l].attrs,r))}let i=e.start,s=e.end;t.step(new we(i,s,i,s,new I(r,0,0),n.length,!0))}function Y1(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(l,o)=>{let a=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,a)&&G1(t.doc,t.mapping.slice(s).map(o),r)){let u=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?u=!1:!p&&m&&(u=!0)}u===!1&&Tm(t,l,o,s),uc(t,t.mapping.slice(s).map(o,1),r,void 0,u===null);let c=t.mapping.slice(s),f=c.map(o,1),h=c.map(o+l.nodeSize,1);return t.step(new we(f,h,f+1,h-1,new I(M.from(r.create(a,null,l.marks)),0,0),1,!0)),u===!0&&Om(t,l,o,s),!1}})}function Om(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let l,o=/\r?\n|\r/g;for(;l=o.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+l.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function Tm(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+s);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function G1(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function X1(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let l=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,l);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new we(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new I(M.from(l),0,0),1,!0))}function Dr(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,l=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>s;u--,c--){let f=i.node(u),h=i.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),m=r&&r[c+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let v=r&&r[c]||f;if(!f.canReplace(h+1,f.childCount)||!v.type.validContent(p))return!1}let o=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(o,o,a?a.type:i.node(s+1).type)}function Z1(t,e,n=1,r){let i=t.doc.resolve(e),s=M.empty,l=M.empty;for(let o=i.depth,a=i.depth-n,u=n-1;o>a;o--,u--){s=M.from(i.node(o).copy(s));let c=r&&r[u];l=M.from(c?c.type.create(c.attrs,l):i.node(o).copy(l))}t.step(new be(e,e,new I(s.append(l),n,n),!0))}function Qr(t,e){let n=t.resolve(e),r=n.index();return Dm(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ev(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),l=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function Dm(t,e){return!!(t&&e&&!t.isLeaf&&ev(t,e))}function jm(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,l,o=r.index(i);if(i==r.depth?(s=r.nodeBefore,l=r.nodeAfter):n>0?(s=r.node(i+1),o++,l=r.node(i).maybeChild(o)):(s=r.node(i).maybeChild(o-1),l=r.node(i+1)),s&&!s.isTextblock&&Dm(s,l)&&r.node(i).canReplace(o,o+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function tv(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),l=s.node().type;if(i&&l.inlineContent){let c=l.whitespace=="pre",f=!!l.contentMatch.matchType(i);c&&!f?r=!1:!c&&f&&(r=!0)}let o=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);Tm(t,c.node(),c.before(),o)}l.inlineContent&&uc(t,e+n-1,l,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(o),u=a.map(e-n);if(t.step(new be(u,a.map(e+n,-1),I.empty,!0)),r===!0){let c=t.doc.resolve(u);Om(t,c.node(),c.before(),t.steps.length)}return t}function nv(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Im(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let l=r.depth;l>=0;l--){let o=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,a=r.index(l)+(o>0?1:0),u=r.node(l),c=!1;if(s==1)c=u.canReplace(a,a,i);else{let f=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(a,a,f[0])}if(c)return o==0?r.pos:o<0?r.before(l+1):r.after(l+1)}return null}function dc(t,e,n=e,r=I.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return Pm(i,s,r)?new be(e,n,r):new rv(i,s,r).fit()}function Pm(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class rv{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=M.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=M.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,l=r.depth,o=i.depth;for(;l&&o&&s.childCount==1;)s=s.firstChild.content,l--,o--;let a=new I(s,l,o);return e>-1?new we(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new be(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Po(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let l=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:a,match:u}=this.frontier[o],c,f=null;if(n==1&&(l?u.matchType(l.type)||(f=u.fillBefore(M.from(l),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:o,parent:s,inject:f};if(n==2&&l&&(c=u.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:o,parent:s,wrap:c};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Po(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new I(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Po(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new I(ui(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new I(ui(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let v=0;v<s.length;v++)this.openFrontierNode(s[v]);let l=this.unplaced,o=r?r.content:l.content,a=l.openStart-e,u=0,c=[],{match:f,type:h}=this.frontier[n];if(i){for(let v=0;v<i.childCount;v++)c.push(i.child(v));f=f.matchFragment(i)}let p=o.size+e-(l.content.size-l.openEnd);for(;u<o.childCount;){let v=o.child(u),w=f.matchType(v.type);if(!w)break;u++,(u>1||a==0||v.content.size)&&(f=w,c.push(Rm(v.mark(h.allowedMarks(v.marks)),u==1?a:0,u==o.childCount?p:-1)))}let m=u==o.childCount;m||(p=-1),this.placed=ci(this.placed,n,M.from(c)),this.frontier[n].match=f,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,w=o;v<p;v++){let y=w.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),w=y.content}this.unplaced=m?e==0?I.empty:new I(ui(l.content,e-1,1),e-1,p<0?l.openEnd:e-1):new I(ui(l.content,e,u),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Ro(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=Ro(e,n,i,r,s);if(l){for(let o=n-1;o>=0;o--){let{match:a,type:u}=this.frontier[o],c=Ro(e,o,u,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:l,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ci(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ci(this.placed,this.depth,M.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(M.empty,!0);n.childCount&&(this.placed=ci(this.placed,this.frontier.length,n))}}function ui(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ui(t.firstChild.content,e-1,n)))}function ci(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ci(t.lastChild.content,e-1,n)))}function Po(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Rm(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Rm(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(M.empty,!0)))),t.copy(r)}function Ro(t,e,n,r,i){let s=t.node(e),l=i?t.indexAfter(e):t.index(e);if(l==s.childCount&&!n.compatibleContent(s.type))return null;let o=r.fillBefore(s.content,!0,l);return o&&!iv(n,s.content,l)?o:null}function iv(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function sv(t){return t.spec.defining||t.spec.definingForContent}function lv(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(Pm(i,s,r))return t.step(new be(e,n,r));let l=zm(i,t.doc.resolve(n));l[l.length-1]==0&&l.pop();let o=-(i.depth+1);l.unshift(o);for(let h=i.depth,p=i.pos-1;h>0;h--,p--){let m=i.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;l.indexOf(h)>-1?o=h:i.before(h)==p&&l.splice(1,0,-h)}let a=l.indexOf(o),u=[],c=r.openStart;for(let h=r.content,p=0;;p++){let m=h.firstChild;if(u.push(m),p==r.openStart)break;h=m.content}for(let h=c-1;h>=0;h--){let p=u[h],m=sv(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(o)-1)))c=h;else if(m||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+c+1)%(r.openStart+1),m=u[p];if(m)for(let v=0;v<l.length;v++){let w=l[(v+a)%l.length],y=!0;w<0&&(y=!1,w=-w);let g=i.node(w-1),x=i.index(w-1);if(g.canReplaceWith(x,x,m.type,m.marks))return t.replace(i.before(w),y?s.after(w):n,new I(Am(r.content,0,r.openStart,p),p,r.openEnd))}}let f=t.steps.length;for(let h=l.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>f));h--){let p=l[h];p<0||(e=i.before(p),n=s.after(p))}}function Am(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(Am(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),l=s.fillBefore(t).append(t);t=l.append(s.matchFragment(l).fillBefore(M.empty,!0))}return t}function ov(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=nv(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new I(M.from(r),0,0))}function av(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=zm(r,i);for(let l=0;l<s.length;l++){let o=s[l],a=l==s.length-1;if(a&&o==0||r.node(o).type.contentMatch.validEnd)return t.delete(r.start(o),i.end(o));if(o>0&&(a||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return t.delete(r.before(o),i.after(o))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&i.end(l)-n!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function zm(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class jr extends De{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ae.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return ae.fromReplace(e,this.pos,this.pos+1,new I(M.from(i),0,n.isLeaf?0:1))}getMap(){return Ke.empty}invert(e){return new jr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new jr(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new jr(n.pos,n.attr,n.value)}}De.jsonID("attr",jr);class Ji extends De{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ae.ok(r)}getMap(){return Ke.empty}invert(e){return new Ji(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ji(n.attr,n.value)}}De.jsonID("docAttr",Ji);let Vr=class extends Error{};Vr=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Vr.prototype=Object.create(Error.prototype);Vr.prototype.constructor=Vr;Vr.prototype.name="TransformError";class uv{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ki}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Vr(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=I.empty){let i=dc(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new I(M.from(r),0,0))}delete(e,n){return this.replace(e,n,I.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return lv(this,e,n,r),this}replaceRangeWith(e,n,r){return ov(this,e,n,r),this}deleteRange(e,n){return av(this,e,n),this}lift(e,n){return q1(this,e,n),this}join(e,n=1){return tv(this,e,n),this}wrap(e,n){return Q1(this,e,n),this}setBlockType(e,n=e,r,i=null){return Y1(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return X1(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new jr(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ji(e,n)),this}addNodeMark(e,n){return this.step(new un(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof $)n.isInSet(r.marks)&&this.step(new tr(e,n));else{let i=r.marks,s,l=[];for(;s=n.isInSet(i);)l.push(new tr(e,s)),i=s.removeFromSet(i);for(let o=l.length-1;o>=0;o--)this.step(l[o])}return this}split(e,n=1,r){return Z1(this,e,n,r),this}addMark(e,n,r){return W1(this,e,n,r),this}removeMark(e,n,r){return U1(this,e,n,r),this}clearIncompatible(e,n,r){return uc(this,e,n,r),this}}const Ao=Object.create(null);class B{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Qa(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=I.empty){let r=n.content.lastChild,i=null;for(let o=0;o<n.openEnd;o++)i=r,r=r.lastChild;let s=e.steps.length,l=this.ranges;for(let o=0;o<l.length;o++){let{$from:a,$to:u}=l[o],c=e.mapping.slice(s);e.replaceRange(c.map(a.pos),c.map(u.pos),o?I.empty:n),o==0&&Gd(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:l,$to:o}=i[s],a=e.mapping.slice(r),u=a.map(l.pos),c=a.map(o.pos);s?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Gd(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new W(e):cr(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let l=n<0?cr(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):cr(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ye(e.node(0))}static atStart(e){return cr(e,e,0,0,1)||new Ye(e)}static atEnd(e){return cr(e,e,e.content.size,e.childCount,-1)||new Ye(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ao[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ao)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ao[e]=n,n.prototype.jsonID=e,n}getBookmark(){return W.between(this.$anchor,this.$head).getBookmark()}}B.prototype.visible=!0;class Qa{constructor(e,n){this.$from=e,this.$to=n}}let Qd=!1;function Yd(t){!Qd&&!t.parent.inlineContent&&(Qd=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class W extends B{constructor(e,n=e){Yd(e),Yd(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return B.near(r);let i=e.resolve(n.map(this.anchor));return new W(i.parent.inlineContent?i:r,r)}replace(e,n=I.empty){if(super.replace(e,n),n==I.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof W&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Gl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new W(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=B.findFrom(n,r,!0)||B.findFrom(n,-r,!0);if(s)n=s.$head;else return B.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(B.findFrom(e,-r,!0)||B.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new W(e,n)}}B.jsonID("text",W);class Gl{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Gl(e.map(this.anchor),e.map(this.head))}resolve(e){return W.between(e.resolve(this.anchor),e.resolve(this.head))}}class z extends B{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?B.near(s):new z(s)}content(){return new I(M.from(this.node),0,0)}eq(e){return e instanceof z&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new fc(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new z(e.resolve(n.anchor))}static create(e,n){return new z(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}z.prototype.visible=!1;B.jsonID("node",z);class fc{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Gl(r,r):new fc(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&z.isSelectable(r)?new z(n):B.near(n)}}class Ye extends B{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=I.empty){if(n==I.empty){e.delete(0,e.doc.content.size);let r=B.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ye(e)}map(e){return new Ye(e)}eq(e){return e instanceof Ye}getBookmark(){return cv}}B.jsonID("all",Ye);const cv={map(){return this},resolve(t){return new Ye(t)}};function cr(t,e,n,r,i,s=!1){if(e.inlineContent)return W.create(t,n);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let o=e.child(l);if(o.isAtom){if(!s&&z.isSelectable(o))return z.create(t,n-(i<0?o.nodeSize:0))}else{let a=cr(t,o,n+i,i<0?o.childCount:0,i,s);if(a)return a}n+=o.nodeSize*i}return null}function Gd(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof be||i instanceof we))return;let s=t.mapping.maps[r],l;s.forEach((o,a,u,c)=>{l==null&&(l=c)}),t.setSelection(B.near(t.doc.resolve(l),n))}const Xd=1,js=2,Zd=4;class dv extends uv{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Xd)&~js,this.storedMarks=null,this}get selectionSet(){return(this.updated&Xd)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=js,this}ensureMarks(e){return $.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&js)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~js,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||$.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let l=this.doc.resolve(n);s=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(B.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Zd,this}get scrolledIntoView(){return(this.updated&Zd)>0}}function ef(t,e){return!e||!t?t:t.bind(e)}class di{constructor(e,n,r){this.name=e,this.init=ef(n.init,r),this.apply=ef(n.apply,r)}}const fv=[new di("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new di("selection",{init(t,e){return t.selection||B.atStart(e.doc)},apply(t){return t.selection}}),new di("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new di("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class zo{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=fv.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new di(r.key,r.spec.state,r))})}}class Ln{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let l=0;l<this.config.plugins.length;l++){let o=this.config.plugins[l];if(o.spec.appendTransaction){let a=i?i[l].n:0,u=i?i[l].state:this,c=a<n.length&&o.spec.appendTransaction.call(o,a?n.slice(a):n,u,r);if(c&&r.filterTransaction(c,l)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<l?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[l]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ln(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new dv(this)}static create(e){let n=new zo(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ln(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new zo(this.schema,e.plugins),r=n.fields,i=new Ln(n);for(let s=0;s<r.length;s++){let l=r[s].name;i[l]=this.hasOwnProperty(l)?this[l]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new zo(e.schema,e.plugins),s=new Ln(i);return i.fields.forEach(l=>{if(l.name=="doc")s.doc=Hn.fromJSON(e.schema,n.doc);else if(l.name=="selection")s.selection=B.fromJSON(s.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let o in r){let a=r[o],u=a.spec.state;if(a.key==l.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){s[l.name]=u.fromJSON.call(a,e,n[o],s);return}}s[l.name]=l.init(e,s)}}),s}}function _m(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=_m(i,e,{})),n[r]=i}return n}class lr{constructor(e){this.spec=e,this.props={},e.props&&_m(e.props,this,this.props),this.key=e.key?e.key.key:Lm("plugin")}getState(e){return e[this.key]}}const _o=Object.create(null);function Lm(t){return t in _o?t+"$"+ ++_o[t]:(_o[t]=0,t+"$")}class Fm{constructor(e="key"){this.key=Lm(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ve=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},$r=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Ya=null;const At=function(t,e,n){let r=Ya||(Ya=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},hv=function(){Ya=null},nr=function(t,e,n,r){return n&&(tf(t,e,n,r,-1)||tf(t,e,n,r,1))},pv=/^(img|br|input|textarea|hr)$/i;function tf(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:st(t))){let l=t.parentNode;if(!l||l.nodeType!=1||ls(t)||pv.test(t.nodeName)||t.contentEditable=="false")return!1;e=ve(t)+(i<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((s=l.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=l,e=i<0?st(t):0}else return!1}}function st(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function mv(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=st(t)}else if(t.parentNode&&!ls(t))e=ve(t),t=t.parentNode;else return null}}function gv(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ls(t))e=ve(t)+1,t=t.parentNode;else return null}}function yv(t,e,n){for(let r=e==0,i=e==st(t);r||i;){if(t==n)return!0;let s=ve(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==st(t)}}function ls(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Xl=function(t){return t.focusNode&&nr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Rn(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function vv(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function xv(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(st(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(st(r.startContainer),r.startOffset)}}}const Tt=typeof navigator<"u"?navigator:null,nf=typeof document<"u"?document:null,On=Tt&&Tt.userAgent||"",Ga=/Edge\/(\d+)/.exec(On),Bm=/MSIE \d/.exec(On),Xa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(On),He=!!(Bm||Xa||Ga),xn=Bm?document.documentMode:Xa?+Xa[1]:Ga?+Ga[1]:0,ut=!He&&/gecko\/(\d+)/i.test(On);ut&&+(/Firefox\/(\d+)/.exec(On)||[0,0])[1];const Za=!He&&/Chrome\/(\d+)/.exec(On),Oe=!!Za,Vm=Za?+Za[1]:0,Re=!He&&!!Tt&&/Apple Computer/.test(Tt.vendor),Wr=Re&&(/Mobile\/\w+/.test(On)||!!Tt&&Tt.maxTouchPoints>2),tt=Wr||(Tt?/Mac/.test(Tt.platform):!1),kv=Tt?/Win/.test(Tt.platform):!1,Bt=/Android \d/.test(On),as=!!nf&&"webkitFontSmoothing"in nf.documentElement.style,wv=as?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Sv(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Pt(t,e){return typeof t=="number"?t:t[e]}function Cv(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function rf(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=$r(l);continue}let o=l,a=o==s.body,u=a?Sv(s):Cv(o),c=0,f=0;if(e.top<u.top+Pt(r,"top")?f=-(u.top-e.top+Pt(i,"top")):e.bottom>u.bottom-Pt(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+Pt(i,"top")-u.top:e.bottom-u.bottom+Pt(i,"bottom")),e.left<u.left+Pt(r,"left")?c=-(u.left-e.left+Pt(i,"left")):e.right>u.right-Pt(r,"right")&&(c=e.right-u.right+Pt(i,"right")),c||f)if(a)s.defaultView.scrollBy(c,f);else{let p=o.scrollLeft,m=o.scrollTop;f&&(o.scrollTop+=f),c&&(o.scrollLeft+=c);let v=o.scrollLeft-p,w=o.scrollTop-m;e={left:e.left-v,top:e.top-w,right:e.right-v,bottom:e.bottom-w}}let h=a?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(h))break;l=h=="absolute"?l.offsetParent:$r(l)}}function Nv(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let o=t.root.elementFromPoint(s,l);if(!o||o==t.dom||!t.dom.contains(o))continue;let a=o.getBoundingClientRect();if(a.top>=n-20){r=o,i=a.top;break}}return{refDOM:r,refTop:i,stack:$m(t.dom)}}function $m(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=$r(r));return e}function Mv({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Wm(n,r==0?0:r-e)}function Wm(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ar=null;function Ev(t){if(t.setActive)return t.setActive();if(ar)return t.focus(ar);let e=$m(t);t.focus(ar==null?{get preventScroll(){return ar={preventScroll:!0},!0}}:void 0),ar||(ar=!1,Wm(e,0))}function Um(t,e){let n,r=2e8,i,s=0,l=e.top,o=e.top,a,u;for(let c=t.firstChild,f=0;c;c=c.nextSibling,f++){let h;if(c.nodeType==1)h=c.getClientRects();else if(c.nodeType==3)h=At(c).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=l&&m.bottom>=o){l=Math.max(m.bottom,l),o=Math.min(m.top,o);let v=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(v<r){n=c,r=v,i=v&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,c.nodeType==1&&v&&(s=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!a&&m.left<=e.left&&m.right>=e.left&&(a=c,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=f+1)}}return!n&&a&&(n=a,i=u,r=0),n&&n.nodeType==3?bv(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:Um(n,i)}function bv(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Yt(r,1);if(s.top!=s.bottom&&hc(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function hc(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Ov(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Tv(t,e,n){let{node:r,offset:i}=Um(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();s=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function Dv(t,e,n,r){let i=-1;for(let s=e,l=!1;s!=t.dom;){let o=t.docView.nearestDesc(s,!0),a;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((a=o.dom.getBoundingClientRect()).width||a.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!l&&a.left>r.left||a.top>r.top?i=o.posBefore:(!l&&a.right<r.left||a.bottom<r.top)&&(i=o.posAfter),l=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?o.posBefore:o.posAfter;s=o.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Hm(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let l=t.childNodes[s];if(l.nodeType==1){let o=l.getClientRects();for(let a=0;a<o.length;a++){let u=o[a];if(hc(e,u))return Hm(l,e,u)}}if((s=(s+1)%r)==i)break}return t}function jv(t,e){let n=t.dom.ownerDocument,r,i=0,s=xv(n,e.left,e.top);s&&({node:r,offset:i}=s);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),o;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let u=t.dom.getBoundingClientRect();if(!hc(e,u)||(l=Hm(t.dom,e,u),!l))return null}if(Re)for(let u=l;r&&u;u=$r(u))u.draggable&&(r=void 0);if(l=Ov(l,e),r){if(ut&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let u;as&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=Dv(t,r,i,e))}o==null&&(o=Tv(t,l,e));let a=t.docView.nearestDesc(l,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function sf(t){return t.top<t.bottom||t.left<t.right}function Yt(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(sf(r))return r}return Array.prototype.find.call(n,sf)||t.getBoundingClientRect()}const Iv=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function qm(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),l=as||ut;if(r.nodeType==3)if(l&&(Iv.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=Yt(At(r,i,i),n);if(ut&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Yt(At(r,i-1,i-1),-1);if(u.top==a.top){let c=Yt(At(r,i,i+1),-1);if(c.top!=a.top)return ii(c,c.left<u.left)}}return a}else{let a=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(a--,c=1):n<0?a--:u++,ii(Yt(At(r,a,u),c),c<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==st(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Lo(a.getBoundingClientRect(),!1)}if(s==null&&i<st(r)){let a=r.childNodes[i];if(a.nodeType==1)return Lo(a.getBoundingClientRect(),!0)}return Lo(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==st(r))){let a=r.childNodes[i-1],u=a.nodeType==3?At(a,st(a)-(l?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return ii(Yt(u,1),!1)}if(s==null&&i<st(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?At(a,0,l?0:1):a.nodeType==1?a:null:null;if(u)return ii(Yt(u,-1),!0)}return ii(Yt(r.nodeType==3?At(r):r,-n),n>=0)}function ii(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Lo(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Km(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function Pv(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Km(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let o=t.docView.nearestDesc(s,!0);if(!o)break;if(o.node.isBlock){s=o.contentDOM||o.dom;break}s=o.dom.parentNode}let l=qm(t,i.pos,1);for(let o=s.firstChild;o;o=o.nextSibling){let a;if(o.nodeType==1)a=o.getClientRects();else if(o.nodeType==3)a=At(o,0,o.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(n=="up"?l.top-c.top>(c.bottom-l.top)*2:c.bottom-l.bottom>(l.bottom-c.top)*2))return!1}}return!0})}const Rv=/[\u0590-\u08ac]/;function Av(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,l=i==r.parent.content.size,o=t.domSelection();return o?!Rv.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?s:l:Km(t,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:f}=t.domSelectionRange(),h=o.caretBidiLevel;o.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:v}=t.domSelectionRange(),w=m&&!p.contains(m.nodeType==1?m:m.parentNode)||a==m&&u==v;try{o.collapse(c,f),a&&(a!=c||u!=f)&&o.extend&&o.extend(a,u)}catch{}return h!=null&&(o.caretBidiLevel=h),w}):r.pos==r.start()||r.pos==r.end()}let lf=null,of=null,af=!1;function zv(t,e,n){return lf==e&&of==n?af:(lf=e,of=n,af=n=="up"||n=="down"?Pv(t,e,n):Av(t,e,n))}const ct=0,uf=1,Fn=2,Dt=3;class us{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ct,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,l;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(l)+l.size:this.posAtStart}else{let s,l;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>ve(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),l;if(s&&(!n||s.node))if(r&&(l=s.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let o=i.children[l];if(o.size){i=o;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let l=this.children[r],o=s+l.size;if(o>e||l instanceof Qm){i=e-s;break}s=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Jm&&s.side>=0;r--);if(n<=0){let s,l=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,l=!1);return s&&n&&l&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?ve(s.dom)+1:0}}else{let s,l=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,l=!1);return s&&l&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?ve(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let l=r,o=0;;o++){let a=this.children[o],u=l+a.size;if(i==-1&&e<=u){let c=l+a.border;if(e>=c&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=l;for(let f=o;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=ve(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(u>n||o==this.children.length-1)){n=u;for(let c=o+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=ve(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}l=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),l=Math.max(e,n);for(let p=0,m=0;p<this.children.length;p++){let v=this.children[p],w=m+v.size;if(s>m&&l<w)return v.setSelection(e-m-v.border,n-m-v.border,r,i);m=w}let o=this.domFromPos(e,e?-1:1),a=n==e?o:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),f=!1;if((ut||Re)&&e==n){let{node:p,offset:m}=o;if(p.nodeType==3){if(f=!!(m&&p.nodeValue[m-1]==`
`),f&&m==p.nodeValue.length)for(let v=p,w;v;v=v.parentNode){if(w=v.nextSibling){w.nodeName=="BR"&&(o=a={node:w.parentNode,offset:ve(w)+1});break}let y=v.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let v=p.childNodes[m-1];f=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(ut&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let p=c.focusNode.childNodes[c.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||f&&Re)&&nr(o.node,o.offset,c.anchorNode,c.anchorOffset)&&nr(a.node,a.offset,c.focusNode,c.focusOffset))return;let h=!1;if((u.extend||e==n)&&!(f&&ut)){u.collapse(o.node,o.offset);try{e!=n&&u.extend(a.node,a.offset),h=!0}catch{}}if(!h){if(e>n){let m=o;o=a,a=m}let p=document.createRange();p.setEnd(a.node,a.offset),p.setStart(o.node,o.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],l=r+s.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let o=r+s.border,a=l-s.border;if(e>=o&&n<=a){this.dirty=e==r||n==l?Fn:uf,e==o&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Dt:s.markDirty(e-o,n-o);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Fn:Dt}r=l}this.dirty=Fn}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Fn:uf;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Jm extends us{constructor(e,n,r,i){let s,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(l.nodeType!=1){let o=document.createElement("span");o.appendChild(l),l=o}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ct&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class _v extends us{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class rr extends us{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],l=s&&s(n,i,r);return(!l||!l.dom)&&(l=Jr.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new rr(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Dt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Dt&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ct){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ct}}slice(e,n,r){let i=rr.create(this.parent,this.mark,!0,r),s=this.children,l=this.size;n<l&&(s=tu(s,n,l,r)),e>0&&(s=tu(s,0,e,r));for(let o=0;o<s.length;o++)s[o].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class kn extends us{constructor(e,n,r,i,s,l,o,a,u){super(e,[],s,l),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(e,n,r,i,s,l){let o=s.nodeViews[n.type.name],a,u=o&&o(n,s,()=>{if(!a)return l;if(a.parent)return a.parent.posBeforeChild(a)},r,i),c=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=Jr.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let h=c;return c=Xm(c,r,n),u?a=new Lv(e,n,r,i,c,f||null,h,u,s,l+1):n.isText?new Zl(e,n,r,i,c,h,s):new kn(e,n,r,i,c,f||null,h,s,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>M.empty)}return e}matchesNode(e,n,r){return this.dirty==ct&&e.eq(this.node)&&El(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,l=s&&s.pos>-1?s:null,o=s&&s.pos<0,a=new Bv(this,l&&l.node,e);Wv(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&a.syncToMarks(c==this.node.childCount?$.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,i)},(u,c,f,h)=>{a.syncToMarks(u.marks,r,e);let p;a.findNodeMatch(u,c,f,h)||o&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(p=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(u,c,f,p,e)||a.updateNextNode(u,c,f,e,h,i)||a.addNode(u,c,f,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Fn)&&(l&&this.protectLocalComposition(e,l),Ym(this.contentDOM,this.children,e),Wr&&Uv(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof W)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let l=s.nodeValue,o=Hv(this.node.content,l,r-n,i-n);return o<0?null:{node:s,pos:o,text:l}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let l=new _v(this,s,n,i);e.input.compositionNodes.push(l),this.children=tu(this.children,r,r+i.length,e,l)}update(e,n,r,i){return this.dirty==Dt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ct}updateOuterDeco(e){if(El(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Gm(this.dom,this.nodeDOM,eu(this.outerDeco,this.node,n),eu(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function cf(t,e,n,r,i){Xm(r,e,t);let s=new kn(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Zl extends kn{constructor(e,n,r,i,s,l,o){super(e,n,r,i,s,null,l,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Dt||this.dirty!=ct&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ct||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ct,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Zl(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Dt)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Qm extends us{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ct&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Lv extends kn{constructor(e,n,r,i,s,l,o,a,u,c){super(e,n,r,i,s,l,o,u,c),this.spec=a}update(e,n,r,i){if(this.dirty==Dt)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Ym(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let l=e[s],o=l.dom;if(o.parentNode==t){for(;o!=r;)r=df(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(o,r);if(l instanceof rr){let a=r?r.previousSibling:t.lastChild;Ym(l.contentDOM,l.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=df(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Ci=function(t){t&&(this.nodeName=t)};Ci.prototype=Object.create(null);const Bn=[new Ci];function eu(t,e,n){if(t.length==0)return Bn;let r=n?Bn[0]:new Ci,i=[r];for(let s=0;s<t.length;s++){let l=t[s].type.attrs;if(l){l.nodeName&&i.push(r=new Ci(l.nodeName));for(let o in l){let a=l[o];a!=null&&(n&&i.length==1&&i.push(r=new Ci(e.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+a:o=="style"?r.style=(r.style?r.style+";":"")+a:o!="nodeName"&&(r[o]=a))}}}return i}function Gm(t,e,n,r){if(n==Bn&&r==Bn)return e;let i=e;for(let s=0;s<r.length;s++){let l=r[s],o=n[s];if(s){let a;o&&o.nodeName==l.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==l.nodeName||(a=document.createElement(l.nodeName),a.pmIsDeco=!0,a.appendChild(i),o=Bn[0]),i=a}Fv(i,o||Bn[0],l)}return i}function Fv(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Xm(t,e,n){return Gm(t,t,Bn,eu(e,n,t.nodeType!=1))}function El(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function df(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Bv{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Vv(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,l=Math.min(s,e.length);for(;i<l&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=ct,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){o=a;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let a=rr.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))s=this.top.children.indexOf(l,this.index);else for(let o=this.index,a=Math.min(this.top.children.length,o+5);o<a;o++){let u=this.top.children[o];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){s=o;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let l=this.top.children[i];return l.dirty==Dt&&l.dom==l.contentDOM&&(l.dirty=Fn),l.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,l){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof kn){let u=this.preMatch.matched.get(a);if(u!=null&&u!=s)return!1;let c=a.dom,f,h=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Dt&&El(n,a.outerDeco));if(!h&&a.update(e,n,r,i))return this.destroyBetween(this.index,o),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(a,e,n,r,i,l)))return this.destroyBetween(this.index,o),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Fn,f.updateChildren(i,l+1),f.dirty=ct),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!El(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let o=kn.create(this.top,n,r,i,s,l);if(o.contentDOM){o.children=e.children,e.children=[];for(let a of o.children)a.parent=o}return e.destroy(),o}addNode(e,n,r,i,s){let l=kn.create(this.top,e,n,r,i,s);l.contentDOM&&l.updateChildren(i,s+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Jm(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof rr;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Zl)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Re||Oe)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Qm(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Vv(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,l=[];e:for(;i>0;){let o;for(;;)if(r){let u=n.children[r-1];if(u instanceof rr)n=u,r=u.children.length;else{o=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=o.node;if(a){if(a!=t.child(i-1))break;--i,s.set(o,i),l.push(o)}}return{index:i,matched:s,matches:l.reverse()}}function $v(t,e){return t.type.side-e.type.side}function Wv(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(s,c),u),s+=c.nodeSize}return}let l=0,o=[],a=null;for(let u=0;;){let c,f;for(;l<i.length&&i[l].to==s;){let w=i[l++];w.widget&&(c?(f||(f=[c])).push(w):c=w)}if(c)if(f){f.sort($v);for(let w=0;w<f.length;w++)n(f[w],u,!!a)}else n(c,u,!!a);let h,p;if(a)p=-1,h=a,a=null;else if(u<t.childCount)p=u,h=t.child(u++);else break;for(let w=0;w<o.length;w++)o[w].to<=s&&o.splice(w--,1);for(;l<i.length&&i[l].from<=s&&i[l].to>s;)o.push(i[l++]);let m=s+h.nodeSize;if(h.isText){let w=m;l<i.length&&i[l].from<w&&(w=i[l].from);for(let y=0;y<o.length;y++)o[y].to<w&&(w=o[y].to);w<m&&(a=h.cut(w-s),h=h.cut(0,w-s),m=w,p=-1)}else for(;l<i.length&&i[l].to<m;)l++;let v=h.isInline&&!h.isLeaf?o.filter(w=>!w.inline):o.slice();r(h,v,e.forChild(s,h),p),s=m}}function Uv(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Hv(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let l=t.child(i++),o=s;if(s+=l.nodeSize,!l.isText)continue;let a=l.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;a+=u.text}if(s>=n){if(s>=r&&a.slice(r-e.length-o,r-o)==e)return r-e.length;let u=o<r?a.lastIndexOf(e,r-o-1):-1;if(u>=0&&u+e.length+o>=n)return o+u;if(n==r&&a.length>=r+e.length-o&&a.slice(r-o,r-o+e.length)==e)return r}}return-1}function tu(t,e,n,r,i){let s=[];for(let l=0,o=0;l<t.length;l++){let a=t[l],u=o,c=o+=a.size;u>=n||c<=e?s.push(a):(u<e&&s.push(a.slice(0,e-u,r)),i&&(s.push(i),i=void 0),c>n&&s.push(a.slice(n-u,a.size,r)))}return s}function pc(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let o=r.resolve(l),a,u;if(Xl(n)){for(a=l;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&z.isSelectable(f)&&i.parent&&!(f.isInline&&yv(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;u=new z(l==h?o:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=l,h=l;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[a,l]=h==t.state.selection.anchor?[h,f]:[f,h],o=r.resolve(l)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let c=r.resolve(a);if(!u){let f=e=="pointer"||t.state.selection.head<o.pos&&!s?1:-1;u=mc(t,c,o,f)}return u}function Zm(t){return t.editable?t.hasFocus():tg(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function $t(t,e=!1){let n=t.state.selection;if(eg(t,n),!!Zm(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Oe){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&nr(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Kv(t);else{let{anchor:r,head:i}=n,s,l;ff&&!(n instanceof W)&&(n.$from.parent.inlineContent||(s=hf(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=hf(t,n.to))),t.docView.setSelection(r,i,t,e),ff&&(s&&pf(s),l&&pf(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&qv(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const ff=Re||Oe&&Vm<63;function hf(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Re&&i&&i.contentEditable=="false")return Fo(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Fo(i);if(s)return Fo(s)}}function Fo(t){return t.contentEditable="true",Re&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function pf(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function qv(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Zm(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Kv(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,ve(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&He&&xn<=11&&(n.disabled=!0,n.disabled=!1)}function eg(t,e){if(e instanceof z){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(mf(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else mf(t)}function mf(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function mc(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||W.between(e,n,r)}function gf(t){return t.editable&&!t.hasFocus()?!1:tg(t)}function tg(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Jv(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return nr(e.node,e.offset,n.anchorNode,n.anchorOffset)}function nu(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&B.findFrom(s,e)}function Zt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function yf(t,e,n){let r=t.state.selection;if(r instanceof W)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let l=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Zt(t,new W(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=nu(t.state,e);return i&&i instanceof z?Zt(t,i):!1}else if(!(tt&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!s||s.isText)return!1;let o=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(l=t.docView.descAt(o))&&!l.contentDOM?z.isSelectable(s)?Zt(t,new z(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):as?Zt(t,new W(t.state.doc.resolve(e<0?o:o+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof z&&r.node.isInline)return Zt(t,new W(e>0?r.$to:r.$from));{let i=nu(t.state,e);return i?Zt(t,i):!1}}}function bl(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ni(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ur(t,e){return e<0?Qv(t):Yv(t)}function Qv(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,l=!1;for(ut&&n.nodeType==1&&r<bl(n)&&Ni(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if(Ni(o,-1))i=n,s=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(ng(n))break;{let o=n.previousSibling;for(;o&&Ni(o,-1);)i=n.parentNode,s=ve(o),o=o.previousSibling;if(o)n=o,r=bl(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?ru(t,n,r):i&&ru(t,i,s)}function Yv(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=bl(n),s,l;for(;;)if(r<i){if(n.nodeType!=1)break;let o=n.childNodes[r];if(Ni(o,1))s=n,l=++r;else break}else{if(ng(n))break;{let o=n.nextSibling;for(;o&&Ni(o,1);)s=o.parentNode,l=ve(o)+1,o=o.nextSibling;if(o)n=o,r=0,i=bl(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&ru(t,s,l)}function ng(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Gv(t,e){for(;t&&e==t.childNodes.length&&!ls(t);)e=ve(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Xv(t,e){for(;t&&!e&&!ls(t);)e=ve(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function ru(t,e,n){if(e.nodeType!=3){let s,l;(l=Gv(e,n))?(e=l,n=0):(s=Xv(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Xl(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&$t(t)},50)}function vf(t,e){let n=t.state.doc.resolve(e);if(!(Oe||kv)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),l=(s.top+s.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),l=(s.top+s.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function xf(t,e,n){let r=t.state.selection;if(r instanceof W&&!r.empty||n.indexOf("s")>-1||tt&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=nu(t.state,e);if(l&&l instanceof z)return Zt(t,l)}if(!i.parent.inlineContent){let l=e<0?i:s,o=r instanceof Ye?B.near(l,e):B.findFrom(l,e);return o?Zt(t,o):!1}return!1}function kf(t,e){if(!(t.state.selection instanceof W))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let l=t.state.tr;return e<0?l.delete(n.pos-s.nodeSize,n.pos):l.delete(n.pos,n.pos+s.nodeSize),t.dispatch(l),!0}return!1}function wf(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Zv(t){if(!Re||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;wf(t,r,"true"),setTimeout(()=>wf(t,r,"false"),20)}return!1}function ex(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function tx(t,e){let n=e.keyCode,r=ex(e);if(n==8||tt&&n==72&&r=="c")return kf(t,-1)||ur(t,-1);if(n==46&&!e.shiftKey||tt&&n==68&&r=="c")return kf(t,1)||ur(t,1);if(n==13||n==27)return!0;if(n==37||tt&&n==66&&r=="c"){let i=n==37?vf(t,t.state.selection.from)=="ltr"?-1:1:-1;return yf(t,i,r)||ur(t,i)}else if(n==39||tt&&n==70&&r=="c"){let i=n==39?vf(t,t.state.selection.from)=="ltr"?1:-1:1;return yf(t,i,r)||ur(t,i)}else{if(n==38||tt&&n==80&&r=="c")return xf(t,-1,r)||ur(t,-1);if(n==40||tt&&n==78&&r=="c")return Zv(t)||xf(t,1,r)||ur(t,1);if(r==(tt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function gc(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let l=t.someProp("clipboardSerializer")||Jr.fromSchema(t.state.schema),o=ag(),a=o.createElement("div");a.appendChild(l.serializeFragment(r,{document:o}));let u=a.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=og[u.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let m=o.createElement(c[p]);for(;a.firstChild;)m.appendChild(a.firstChild);a.appendChild(m),f++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:h,slice:e}}function rg(t,e,n,r,i){let s=i.parent.type.spec.code,l,o;if(!n&&!e)return null;let a=!!e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return o=new I(M.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{o=h(o,t,!0)}),o;let f=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(f)o=f;else{let h=i.marks(),{schema:p}=t.state,m=Jr.fromSchema(p);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(v=>{let w=l.appendChild(document.createElement("p"));v&&w.appendChild(m.serializeNode(p.text(v,h)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),l=sx(n),as&&lx(l);let u=l&&l.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let h=l.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;l=h}if(o||(o=(t.someProp("clipboardParser")||t.someProp("domParser")||Br.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!nx.test(h.parentNode.nodeName)?{ignore:!0}:null}})),c)o=ox(Sf(o,+c[1],+c[2]),c[4]);else if(o=I.maxOpen(rx(o.content,i),!0),o.openStart||o.openEnd){let f=0,h=0;for(let p=o.content.firstChild;f<o.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=o.content.lastChild;h<o.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);o=Sf(o,f,h)}return t.someProp("transformPasted",f=>{o=f(o,t,a)}),o}const nx=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function rx(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,l=[];if(t.forEach(o=>{if(!l)return;let a=i.findWrapping(o.type),u;if(!a)return l=null;if(u=l.length&&s.length&&sg(a,s,o,l[l.length-1],0))l[l.length-1]=u;else{l.length&&(l[l.length-1]=lg(l[l.length-1],s.length));let c=ig(o,a);l.push(c),i=i.matchType(c.type),s=a}}),l)return M.from(l)}return t}function ig(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,M.from(t));return t}function sg(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=sg(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(M.from(ig(n,t,i+1))))}}function lg(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,lg(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(M.empty,!0);return t.copy(n.append(r))}function iu(t,e,n,r,i,s){let l=e<0?t.firstChild:t.lastChild,o=l.content;return t.childCount>1&&(s=0),i<r-1&&(o=iu(o,e,n,r,i+1,s)),i>=n&&(o=e<0?l.contentMatchAt(0).fillBefore(o,s<=i).append(o):o.append(l.contentMatchAt(l.childCount).fillBefore(M.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(o))}function Sf(t,e,n){return e<t.openStart&&(t=new I(iu(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new I(iu(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const og={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Cf=null;function ag(){return Cf||(Cf=document.implementation.createHTMLDocument("title"))}let Bo=null;function ix(t){let e=window.trustedTypes;return e?(Bo||(Bo=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Bo.createHTML(t)):t}function sx(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=ag().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&og[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=ix(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function lx(t){let e=t.querySelectorAll(Oe?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function ox(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:l}=t;for(let o=r.length-2;o>=0;o-=2){let a=n.nodes[r[o]];if(!a||a.hasRequiredAttrs())break;i=M.from(a.create(r[o+1],i)),s++,l++}return new I(i,s,l)}const Ae={},ze={},ax={touchstart:!0,touchmove:!0};class ux{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function cx(t){for(let e in Ae){let n=Ae[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{fx(t,r)&&!yc(t,r)&&(t.editable||!(r.type in ze))&&n(t,r)},ax[e]?{passive:!0}:void 0)}Re&&t.dom.addEventListener("input",()=>null),su(t)}function cn(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function dx(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function su(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>yc(t,r))})}function yc(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function fx(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function hx(t,e){!yc(t,e)&&Ae[e.type]&&(t.editable||!(e.type in ze))&&Ae[e.type](t,e)}ze.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!cg(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Bt&&Oe&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Wr&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Rn(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||tx(t,n)?n.preventDefault():cn(t,"key")};ze.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};ze.keypress=(t,e)=>{let n=e;if(cg(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||tt&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof W)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function eo(t){return{left:t.clientX,top:t.clientY}}function px(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function vc(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let l=s.depth+1;l>0;l--)if(t.someProp(e,o=>l>s.depth?o(t,n,s.nodeAfter,s.before(l),i,!0):o(t,n,s.node(l),s.before(l),i,!1)))return!0;return!1}function Ir(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function mx(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&z.isSelectable(r)?(Ir(t,new z(n),"pointer"),!0):!1}function gx(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof z&&(r=n.node);let s=t.state.doc.resolve(e);for(let l=s.depth+1;l>0;l--){let o=l>s.depth?s.nodeAfter:s.node(l);if(z.isSelectable(o)){r&&n.$from.depth>0&&l>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(l);break}}return i!=null?(Ir(t,z.create(t.state.doc,i),"pointer"),!0):!1}function yx(t,e,n,r,i){return vc(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?gx(t,n):mx(t,n))}function vx(t,e,n,r){return vc(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function xx(t,e,n,r){return vc(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||kx(t,n,r)}function kx(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ir(t,W.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let l=s>i.depth?i.nodeAfter:i.node(s),o=i.before(s);if(l.inlineContent)Ir(t,W.create(r,o+1,o+1+l.content.size),"pointer");else if(z.isSelectable(l))Ir(t,z.create(r,o),"pointer");else continue;return!0}}function xc(t){return Ol(t)}const ug=tt?"metaKey":"ctrlKey";Ae.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=xc(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&px(n,t.input.lastClick)&&!n[ug]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let l=t.posAtCoords(eo(n));l&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new wx(t,l,n,!!r)):(s=="doubleClick"?vx:xx)(t,l.pos,l.inside,n)?n.preventDefault():cn(t,"pointer"))};class wx{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ug],this.allowDefault=r.shiftKey;let s,l;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),l=n.inside;else{let c=e.state.doc.resolve(n.pos);s=c.parent,l=c.depth?c.before():0}const o=i?null:r.target,a=o?e.docView.nearestDesc(o,!0):null;this.target=a&&a.nodeDOM.nodeType==1?a.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof z&&u.from<=l&&u.to>l)&&(this.mightDrag={node:s,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ut&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),cn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>$t(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(eo(e))),this.updateAllowDefault(e),this.allowDefault||!n?cn(this.view,"pointer"):yx(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Re&&this.mightDrag&&!this.mightDrag.node.isAtom||Oe&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ir(this.view,B.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):cn(this.view,"pointer")}move(e){this.updateAllowDefault(e),cn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ae.touchstart=t=>{t.input.lastTouch=Date.now(),xc(t),cn(t,"pointer")};Ae.touchmove=t=>{t.input.lastTouch=Date.now(),cn(t,"pointer")};Ae.contextmenu=t=>xc(t);function cg(t,e){return t.composing?!0:Re&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Sx=Bt?5e3:-1;ze.compositionstart=ze.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof W&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Ol(t,!0),t.markCursor=null;else if(Ol(t,!e.selection.empty),ut&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let l=s<0?i.lastChild:i.childNodes[s-1];if(!l)break;if(l.nodeType==3){let o=t.domSelection();o&&o.collapse(l,l.nodeValue.length);break}else i=l,s=-1}}t.input.composing=!0}dg(t,Sx)};ze.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,dg(t,20))};function dg(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Ol(t),e))}function fg(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Nx());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Cx(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=mv(e.focusNode,e.focusOffset),r=gv(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function Nx(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Ol(t,e=!1){if(!(Bt&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),fg(t),e||t.docView&&t.docView.dirty){let n=pc(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Mx(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Qi=He&&xn<15||Wr&&wv<604;Ae.copy=ze.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Qi?null:n.clipboardData,l=r.content(),{dom:o,text:a}=gc(t,l);s?(n.preventDefault(),s.clearData(),s.setData("text/html",o.innerHTML),s.setData("text/plain",a)):Mx(t,o),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Ex(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function bx(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Yi(t,r.value,null,i,e):Yi(t,r.textContent,r.innerHTML,i,e)},50)}function Yi(t,e,n,r,i){let s=rg(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||I.empty)))return!0;if(!s)return!1;let l=Ex(s),o=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(s);return t.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function hg(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ze.paste=(t,e)=>{let n=e;if(t.composing&&!Bt)return;let r=Qi?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Yi(t,hg(r),r.getData("text/html"),i,n)?n.preventDefault():bx(t,n)};class pg{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Ox=tt?"altKey":"ctrlKey";function mg(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Ox]}Ae.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(eo(n)),l;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof z?i.to-1:i.to))){if(r&&r.mightDrag)l=z.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(l=z.create(t.state.doc,f.posBefore))}}let o=(l||t.state.selection).content(),{dom:a,text:u,slice:c}=gc(t,o);(!n.dataTransfer.files.length||!Oe||Vm>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Qi?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Qi||n.dataTransfer.setData("text/plain",u),t.dragging=new pg(c,mg(t,n),l)};Ae.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};ze.dragover=ze.dragenter=(t,e)=>e.preventDefault();ze.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(eo(n));if(!i)return;let s=t.state.doc.resolve(i.pos),l=r&&r.slice;l?t.someProp("transformPasted",m=>{l=m(l,t,!1)}):l=rg(t,hg(n.dataTransfer),Qi?null:n.dataTransfer.getData("text/html"),!1,s);let o=!!(r&&mg(t,n));if(t.someProp("handleDrop",m=>m(t,n,l||I.empty,o))){n.preventDefault();return}if(!l)return;n.preventDefault();let a=l?Im(t.state.doc,s.pos,l):s.pos;a==null&&(a=s.pos);let u=t.state.tr;if(o){let{node:m}=r;m?m.replace(u):u.deleteSelection()}let c=u.mapping.map(a),f=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,h=u.doc;if(f?u.replaceRangeWith(c,c,l.content.firstChild):u.replaceRange(c,c,l),u.doc.eq(h))return;let p=u.doc.resolve(c);if(f&&z.isSelectable(l.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(l.content.firstChild))u.setSelection(new z(p));else{let m=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((v,w,y,g)=>m=g),u.setSelection(mc(t,p,u.doc.resolve(m)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Ae.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&$t(t)},20))};Ae.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ae.beforeinput=(t,e)=>{if(Oe&&Bt&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Rn(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in ze)Ae[t]=ze[t];function Gi(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Tl{constructor(e,n){this.toDOM=e,this.spec=n||qn,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:l}=e.mapResult(n.from+i,this.side<0?-1:1);return l?null:new ot(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Tl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Gi(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class wn{constructor(e,n){this.attrs=e,this.spec=n||qn}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=l?null:new ot(s,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof wn&&Gi(this.attrs,e.attrs)&&Gi(this.spec,e.spec)}static is(e){return e.type instanceof wn}destroy(){}}class kc{constructor(e,n){this.attrs=e,this.spec=n||qn}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let l=e.mapResult(n.to+i,-1);return l.deleted||l.pos<=s.pos?null:new ot(s.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof kc&&Gi(this.attrs,e.attrs)&&Gi(this.spec,e.spec)}destroy(){}}class ot{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ot(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ot(e,e,new Tl(n,r))}static inline(e,n,r,i){return new ot(e,n,new wn(r,i))}static node(e,n,r,i){return new ot(e,n,new kc(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof wn}get widget(){return this.type instanceof Tl}}const dr=[],qn={};class ce{constructor(e,n){this.local=e.length?e:dr,this.children=n.length?n:dr}static create(e,n){return n.length?Dl(n,e,0,qn):Me}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let l=0;l<this.local.length;l++){let o=this.local[l];o.from<=n&&o.to>=e&&(!s||s(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let o=this.children[l]+1;this.children[l+2].findInner(e-o,n-o,r,i+o,s)}}map(e,n,r){return this==Me||e.maps.length==0?this:this.mapInner(e,n,0,0,r||qn)}mapInner(e,n,r,i,s){let l;for(let o=0;o<this.local.length;o++){let a=this.local[o].map(e,r,i);a&&a.type.valid(n,a)?(l||(l=[])).push(a):s.onRemove&&s.onRemove(this.local[o].spec)}return this.children.length?Tx(this.children,l||[],e,n,r,i,s):l?new ce(l.sort(Kn),dr):Me}add(e,n){return n.length?this==Me?ce.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((o,a)=>{let u=a+r,c;if(c=yg(n,o,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(o,c,u+1):i.splice(s,0,a,a+o.nodeSize,Dl(c,o,u+1,qn)),s+=3}});let l=gg(s?vg(n):n,-r);for(let o=0;o<l.length;o++)l[o].type.valid(e,l[o])||l.splice(o--,1);return new ce(l.length?this.local.concat(l).sort(Kn):this.local,i||this.children)}remove(e){return e.length==0||this==Me?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let l,o=r[s]+n,a=r[s+1]+n;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>o&&f.to<a&&(e[c]=null,(l||(l=[])).push(f));if(!l)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(l,o+1);u!=Me?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,l;s<e.length;s++)if(l=e[s])for(let o=0;o<i.length;o++)i[o].eq(l,n)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ce(i,r):Me}forChild(e,n){if(this==Me)return this;if(n.isLeaf)return ce.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(r=this.children[o+2]);break}let s=e+1,l=s+n.content.size;for(let o=0;o<this.local.length;o++){let a=this.local[o];if(a.from<l&&a.to>s&&a.type instanceof wn){let u=Math.max(s,a.from)-s,c=Math.min(l,a.to)-s;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let o=new ce(i.sort(Kn),dr);return r?new rn([o,r]):o}return r||Me}eq(e){if(this==e)return!0;if(!(e instanceof ce)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return wc(this.localsInner(e))}localsInner(e){if(this==Me)return dr;if(e.inlineContent||!this.local.some(wn.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof wn||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ce.empty=new ce([],[]);ce.removeOverlap=wc;const Me=ce.empty;class rn{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,qn));return rn.from(r)}forChild(e,n){if(n.isLeaf)return ce.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Me&&(s instanceof rn?r=r.concat(s.members):r.push(s))}return rn.from(r)}eq(e){if(!(e instanceof rn)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let l=0;l<s.length;l++)n.push(s[l])}}return n?wc(r?n:n.sort(Kn)):dr}static from(e){switch(e.length){case 0:return Me;case 1:return e[0];default:return new rn(e.every(n=>n instanceof ce)?e:e.reduce((n,r)=>n.concat(r instanceof ce?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Tx(t,e,n,r,i,s,l){let o=t.slice();for(let u=0,c=s;u<n.maps.length;u++){let f=0;n.maps[u].forEach((h,p,m,v)=>{let w=v-m-(p-h);for(let y=0;y<o.length;y+=3){let g=o[y+1];if(g<0||h>g+c-f)continue;let x=o[y]+c-f;p>=x?o[y+1]=h<=x?-2:-1:h>=c&&w&&(o[y]+=w,o[y+1]+=w)}f+=w}),c=n.maps[u].map(c,-1)}let a=!1;for(let u=0;u<o.length;u+=3)if(o[u+1]<0){if(o[u+1]==-2){a=!0,o[u+1]=-1;continue}let c=n.map(t[u]+s),f=c-i;if(f<0||f>=r.content.size){a=!0;continue}let h=n.map(t[u+1]+s,-1),p=h-i,{index:m,offset:v}=r.content.findIndex(f),w=r.maybeChild(m);if(w&&v==f&&v+w.nodeSize==p){let y=o[u+2].mapInner(n,w,c+1,t[u]+s+1,l);y!=Me?(o[u]=f,o[u+1]=p,o[u+2]=y):(o[u+1]=-2,a=!0)}else a=!0}if(a){let u=Dx(o,t,e,n,i,s,l),c=Dl(u,r,0,l);e=c.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,h=0;f<c.children.length;f+=3){let p=c.children[f];for(;h<o.length&&o[h]<p;)h+=3;o.splice(h,0,c.children[f],c.children[f+1],c.children[f+2])}}return new ce(e.sort(Kn),o)}function gg(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new ot(i.from+e,i.to+e,i.type))}return n}function Dx(t,e,n,r,i,s,l){function o(a,u){for(let c=0;c<a.local.length;c++){let f=a.local[c].map(r,i,u);f?n.push(f):l.onRemove&&l.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)o(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&o(t[a+2],e[a]+s+1);return n}function yg(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,l;s<t.length;s++)(l=t[s])&&l.from>n&&l.to<r&&((i||(i=[])).push(l),t[s]=null);return i}function vg(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Dl(t,e,n,r){let i=[],s=!1;e.forEach((o,a)=>{let u=yg(t,o,a+n);if(u){s=!0;let c=Dl(u,o,n+a+1,r);c!=Me&&i.push(a,a+o.nodeSize,c)}});let l=gg(s?vg(t):t,-n).sort(Kn);for(let o=0;o<l.length;o++)l[o].type.valid(e,l[o])||(r.onRemove&&r.onRemove(l[o].spec),l.splice(o--,1));return l.length||i.length?new ce(l,i):Me}function Kn(t,e){return t.from-e.from||t.to-e.to}function wc(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Nf(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Nf(e,i,r.copy(s.from,r.to)));break}}}return e}function Nf(t,e,n){for(;e<t.length&&Kn(n,t[e])>0;)e++;t.splice(e,0,n)}function Vo(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Me&&e.push(r)}),t.cursorWrapper&&e.push(ce.create(t.state.doc,[t.cursorWrapper.deco])),rn.from(e)}const jx={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ix=He&&xn<=11;class Px{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Rx{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Px,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);He&&xn<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Ix&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,jx)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(gf(this.view)){if(this.suppressingSelectionUpdates)return $t(this.view);if(He&&xn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&nr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=$r(s))n.add(s);for(let s=e.anchorNode;s;s=$r(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&gf(e)&&!this.ignoreSelectionChange(r),s=-1,l=-1,o=!1,a=[];if(e.editable)for(let c=0;c<n.length;c++){let f=this.registerMutation(n[c],a);f&&(s=s<0?f.from:Math.min(f.from,s),l=l<0?f.to:Math.max(f.to,l),f.typeOver&&(o=!0))}if(ut&&a.length){let c=a.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,h]=c;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of c){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||_x(e,f)!=p)&&h.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Xl(r)&&(u=pc(e))&&u.eq(B.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,$t(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,l),Ax(e)),this.handleDOMChange(s,l,o,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||$t(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(He&&xn<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:h}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let l=i&&i.parentNode==e.target?ve(i)+1:0,o=r.localPosFromDOM(e.target,l,-1),a=s&&s.parentNode==e.target?ve(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:o,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Mf=new WeakMap,Ef=!1;function Ax(t){if(!Mf.has(t)&&(Mf.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ut,Ef)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ef=!0}}function bf(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return nr(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function zx(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return bf(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?bf(t,n):null}function _x(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Lx(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:l,to:o}=t.docView.parseRange(e,n),a=t.domSelectionRange(),u,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],Xl(a)||u.push({node:a.focusNode,offset:a.focusOffset})),Oe&&t.input.lastKeyCode===8)for(let w=s;w>i;w--){let y=r.childNodes[w-1],g=y.pmViewDesc;if(y.nodeName=="BR"&&!g){s=w;break}if(!g||g.size)break}let f=t.state.doc,h=t.someProp("domParser")||Br.fromSchema(t.state.schema),p=f.resolve(l),m=null,v=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:Fx,context:p});if(u&&u[0].pos!=null){let w=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=w),m={anchor:w+l,head:y+l}}return{doc:v,sel:m,from:l,to:o}}function Fx(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Re&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Re&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Bx=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Vx(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,b=pc(t,C);if(b&&!t.state.selection.eq(b)){if(Oe&&Bt&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",se=>se(t,Rn(13,"Enter"))))return;let j=t.state.tr.setSelection(b);C=="pointer"?j.setMeta("pointer",!0):C=="key"&&j.scrollIntoView(),s&&j.setMeta("composition",s),t.dispatch(j)}return}let l=t.state.doc.resolve(e),o=l.sharedDepth(n);e=l.before(o+1),n=t.state.doc.resolve(n).after(o+1);let a=t.state.selection,u=Lx(t,e,n),c=t.state.doc,f=c.slice(u.from,u.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=Ux(f.content,u.doc.content,u.from,h,p);if(m&&t.input.domChangeCount++,(Wr&&t.input.lastIOSEnter>Date.now()-225||Bt)&&i.some(C=>C.nodeType==1&&!Bx.test(C.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",C=>C(t,Rn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&a instanceof W&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let C=Of(t,t.state.doc,u.sel);if(C&&!C.eq(t.state.selection)){let b=t.state.tr.setSelection(C);s&&b.setMeta("composition",s),t.dispatch(b)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof W&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),He&&xn<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)=="  "&&(m.start--,m.endA--,m.endB--);let v=u.doc.resolveNoCache(m.start-u.from),w=u.doc.resolveNoCache(m.endB-u.from),y=c.resolve(m.start),g=v.sameParent(w)&&v.parent.inlineContent&&y.end()>=m.endA,x;if((Wr&&t.input.lastIOSEnter>Date.now()-225&&(!g||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!g&&v.pos<u.doc.content.size&&(!v.sameParent(w)||!v.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(v.pos,w.pos,"",""))&&(x=B.findFrom(u.doc.resolve(v.pos+1),1,!0))&&x.head>v.pos)&&t.someProp("handleKeyDown",C=>C(t,Rn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Wx(c,m.start,m.endA,v,w)&&t.someProp("handleKeyDown",C=>C(t,Rn(8,"Backspace")))){Bt&&Oe&&t.domObserver.suppressSelectionUpdates();return}Oe&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Bt&&!g&&v.start()!=w.start()&&w.parentOffset==0&&v.depth==w.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,w=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Rn(13,"Enter"))})},20));let k=m.start,N=m.endA,O=C=>{let b=C||t.state.tr.replace(k,N,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let j=Of(t,b.doc,u.sel);j&&!(Oe&&t.composing&&j.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(j.head==k||j.head==b.mapping.map(N)-1)||He&&j.empty&&j.head==k)&&b.setSelection(j)}return s&&b.setMeta("composition",s),b.scrollIntoView()},D;if(g){if(v.pos==w.pos){He&&xn<=11&&v.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>$t(t),20));let C=O(t.state.tr.delete(k,N)),b=c.resolve(m.start).marksAcross(c.resolve(m.endA));b&&C.ensureMarks(b),t.dispatch(C)}else if(m.endA==m.endB&&(D=$x(v.parent.content.cut(v.parentOffset,w.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let C=O(t.state.tr);D.type=="add"?C.addMark(k,N,D.mark):C.removeMark(k,N,D.mark),t.dispatch(C)}else if(v.parent.child(v.index()).isText&&v.index()==w.index()-(w.textOffset?0:1)){let C=v.parent.textBetween(v.parentOffset,w.parentOffset),b=()=>O(t.state.tr.insertText(C,k,N));t.someProp("handleTextInput",j=>j(t,k,N,C,b))||t.dispatch(b())}}else t.dispatch(O())}function Of(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:mc(t,e.resolve(n.anchor),e.resolve(n.head))}function $x(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,l,o,a;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)o=i[0],l="add",a=c=>c.mark(o.addToSet(c.marks));else if(i.length==0&&s.length==1)o=s[0],l="remove",a=c=>c.mark(o.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(M.from(u).eq(t))return{mark:o,type:l}}function Wx(t,e,n,r,i){if(n-e<=i.pos-r.pos||$o(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let o=s.nodeAfter;return o!=null&&n==e+o.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let l=t.resolve($o(s,!0,!0));return!l.parent.isTextblock||l.pos>n||$o(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function $o(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Ux(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:l,b:o}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(l,o));r-=l+a-s}if(l<s&&t.size<e.size){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<e.size&&Tf(e.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}else if(o<s){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<t.size&&Tf(t.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}return{start:s,endA:l,endB:o}}function Tf(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class xg{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ux,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Rf),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=If(this),jf(this),this.nodeViews=Pf(this),this.docView=cf(this.state.doc,Df(this),Vo(this),this.dom,this),this.domObserver=new Rx(this,(r,i,s,l)=>Vx(this,r,i,s,l)),this.domObserver.start(),cx(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&su(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Rf),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,l=!1;e.storedMarks&&this.composing&&(fg(this),l=!0),this.state=e;let o=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=Pf(this);qx(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&su(this),this.editable=If(this),jf(this);let a=Vo(this),u=Df(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,u,a);(f||!e.selection.eq(i.selection))&&(l=!0);let h=c=="preserve"&&l&&this.dom.style.overflowAnchor==null&&Nv(this);if(l){this.domObserver.stop();let p=f&&(He||Oe)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Hx(i.selection,e.selection);if(f){let m=Oe?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Cx(this)),(s||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=cf(e.doc,u,a,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Jv(this))?$t(this,p):(eg(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():h&&Mv(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof z){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&rf(this,n.getBoundingClientRect(),e)}else rf(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new pg(e.slice,e.move,i<0?void 0:z.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let o=this.directPlugins[l].props[e];if(o!=null&&(i=n?n(o):o))return i}let s=this.state.plugins;if(s)for(let l=0;l<s.length;l++){let o=s[l].props[e];if(o!=null&&(i=n?n(o):o))return i}}hasFocus(){if(He){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Ev(this.dom),$t(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return jv(this,e)}coordsAtPos(e,n=1){return qm(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return zv(this,n||this.state,e)}pasteHTML(e,n){return Yi(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Yi(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return gc(this,e)}destroy(){this.docView&&(dx(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Vo(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,hv())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return hx(this,e)}domSelectionRange(){let e=this.domSelection();return e?Re&&this.root.nodeType===11&&vv(this.dom.ownerDocument)==this.dom&&zx(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}xg.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Df(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ot.node(0,t.state.doc.content.size,e)]}function jf(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ot.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function If(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Hx(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Pf(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function qx(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Rf(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const Kx=["p",0],Jx=["blockquote",0],Qx=["hr"],Yx=["pre",["code",0]],Gx=["br"],Xx={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return Kx}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM(){return Jx}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return Qx}},heading:{attrs:{level:{default:1,validate:"number"}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return Yx}},text:{group:"inline"},image:{inline:!0,attrs:{src:{validate:"string"},alt:{default:null,validate:"string|null"},title:{default:null,validate:"string|null"}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM(t){let{src:e,alt:n,title:r}=t.attrs;return["img",{src:e,alt:n,title:r}]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return Gx}}},Zx=["em",0],ek=["strong",0],tk=["code",0],nk={link:{attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM(t){let{href:e,title:n}=t.attrs;return["a",{href:e,title:n},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:t=>t.type.name=="em"}],toDOM(){return Zx}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM(){return ek}},code:{code:!0,parseDOM:[{tag:"code"}],toDOM(){return tk}}},Af=new km({nodes:Xx,marks:nk}),rk=["ol",0],ik=["ul",0],sk=["li",0],lk={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM(t){return t.attrs.order==1?rk:["ol",{start:t.attrs.order},0]}},ok={parseDOM:[{tag:"ul"}],toDOM(){return ik}},ak={parseDOM:[{tag:"li"}],toDOM(){return sk},defining:!0};function Wo(t,e){let n={};for(let r in t)n[r]=t[r];for(let r in e)n[r]=e[r];return n}function uk(t,e,n){return t.append({ordered_list:Wo(lk,{content:"list_item+",group:n}),bullet_list:Wo(ok,{content:"list_item+",group:n}),list_item:Wo(ak,{content:e})})}function lu(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,l=i.blockRange(s);if(!l)return!1;let o=r?n.tr:null;return ck(o,l,t,e)?(r&&r(o.scrollIntoView()),!0):!1}}function ck(t,e,n,r=null){let i=!1,s=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=l.resolve(e.start-2);s=new Nl(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Nl(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let o=cc(s,n,r,e);return o?(t&&dk(t,e,o,i,n),!0):!1}function dk(t,e,n,r,i){let s=M.empty;for(let c=n.length-1;c>=0;c--)s=M.from(n[c].type.create(n[c].attrs,s));t.step(new we(e.start-(r?2:0),e.end,e.start,e.end,new I(s,0,0),n.length,!0));let l=0;for(let c=0;c<n.length;c++)n[c].type==i&&(l=c+1);let o=n.length-l,a=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,h=!0;c<f;c++,h=!1)!h&&Dr(t.doc,a,o)&&(t.split(a,o),a+=2*o),a+=u.child(c).nodeSize;return t}function fk(t,e){return function(n,r){let{$from:i,$to:s,node:l}=n.selection;if(l&&l.isBlock||i.depth<2||!i.sameParent(s))return!1;let o=i.node(-1);if(o.type!=t)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=t||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let f=M.empty,h=i.index(-1)?1:i.index(-2)?2:3;for(let y=i.depth-h;y>=i.depth-3;y--)f=M.from(i.node(y).copy(f));let p=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;f=f.append(M.from(t.createAndFill()));let m=i.before(i.depth-(h-1)),v=n.tr.replace(m,i.after(-p),new I(f,4-h,0)),w=-1;v.doc.nodesBetween(m,v.doc.content.size,(y,g)=>{if(w>-1)return!1;y.isTextblock&&y.content.size==0&&(w=g+1)}),w>-1&&v.setSelection(B.near(v.doc.resolve(w))),r(v.scrollIntoView())}return!0}let a=s.pos==i.end()?o.contentMatchAt(0).defaultType:null,u=n.tr.delete(i.pos,s.pos),c=a?[e?{type:t,attrs:e}:null,{type:a}]:void 0;return Dr(u.doc,i.pos,2,c)?(r&&r(u.split(i.pos,2,c).scrollIntoView()),!0):!1}}function hk(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?pk(e,n,t,s):mk(e,n,s):!0:!1}}function pk(t,e,n,r){let i=t.tr,s=r.end,l=r.$to.end(r.depth);s<l&&(i.step(new we(s-1,l,s,l,new I(M.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Nl(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const o=ss(r);if(o==null)return!1;i.lift(r,o);let a=i.doc.resolve(i.mapping.map(s,-1)-1);return Qr(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function mk(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,m=n.endIndex-1,v=n.startIndex;m>v;m--)p-=i.child(m).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),l=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,a=n.endIndex==i.childCount,u=s.node(-1),c=s.index(-1);if(!u.canReplace(c+(o?0:1),c+1,l.content.append(a?M.empty:M.from(i))))return!1;let f=s.pos,h=f+l.nodeSize;return r.step(new we(f-(o?1:0),h+(a?1:0),f+1,h-1,new I((o?M.empty:M.from(i.copy(M.empty))).append(a?M.empty:M.from(i.copy(M.empty))),o?0:1,a?0:1),o?0:1)),e(r.scrollIntoView()),!0}function gk(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let l=s.startIndex;if(l==0)return!1;let o=s.parent,a=o.child(l-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==o.type,c=M.from(u?t.create():null),f=new I(M.from(t.create(null,M.from(o.type.create(null,c)))),u?3:1,0),h=s.start,p=s.end;n(e.tr.step(new we(h-(u?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}var Nn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},jl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yk=typeof navigator<"u"&&/Mac/.test(navigator.platform),vk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var xe=0;xe<10;xe++)Nn[48+xe]=Nn[96+xe]=String(xe);for(var xe=1;xe<=24;xe++)Nn[xe+111]="F"+xe;for(var xe=65;xe<=90;xe++)Nn[xe]=String.fromCharCode(xe+32),jl[xe]=String.fromCharCode(xe);for(var Uo in Nn)jl.hasOwnProperty(Uo)||(jl[Uo]=Nn[Uo]);function xk(t){var e=yk&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||vk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?jl:Nn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const kk=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),wk=typeof navigator<"u"&&/Win/.test(navigator.platform);function Sk(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,l;for(let o=0;o<e.length-1;o++){let a=e[o];if(/^(cmd|meta|m)$/i.test(a))l=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))kk?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),l&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Ck(t){let e=Object.create(null);for(let n in t)e[Sk(n)]=t[n];return e}function Ho(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function zf(t){return new lr({props:{handleKeyDown:kg(t)}})}function kg(t){let e=Ck(t);return function(n,r){let i=xk(r),s,l=e[Ho(i,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=e[Ho(i,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(wk&&r.ctrlKey&&r.altKey)&&(s=Nn[r.keyCode])&&s!=i){let o=e[Ho(s,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}var Il=200,pe=function(){};pe.prototype.append=function(e){return e.length?(e=pe.from(e),!this.length&&e||e.length<Il&&this.leafAppend(e)||this.length<Il&&e.leafPrepend(this)||this.appendInner(e)):this};pe.prototype.prepend=function(e){return e.length?pe.from(e).append(this):this};pe.prototype.appendInner=function(e){return new Nk(this,e)};pe.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?pe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};pe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};pe.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};pe.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,l){return i.push(e(s,l))},n,r),i};pe.from=function(e){return e instanceof pe?e:e&&e.length?new wg(e):pe.empty};var wg=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,l,o){for(var a=s;a<l;a++)if(i(this.values[a],o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,l,o){for(var a=s-1;a>=l;a--)if(i(this.values[a],o+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Il)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Il)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(pe);pe.empty=new wg([]);var Nk=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,l){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(s,o),l)===!1||s>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,s)-o,l+o)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,l){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(s,o)-o,l+o)===!1||s<o&&this.left.forEachInvertedInner(r,Math.min(i,o),s,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(pe);const Mk=500;class yt{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let l=e.tr,o,a,u=[],c=[];return this.items.forEach((f,h)=>{if(!f.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,c.push(f);return}if(i){c.push(new Nt(f.map));let p=f.step.map(i.slice(s)),m;p&&l.maybeStep(p).doc&&(m=l.mapping.maps[l.mapping.maps.length-1],u.push(new Nt(m,void 0,void 0,u.length+c.length))),s--,m&&i.appendMap(m,s)}else l.maybeStep(f.step);if(f.selection)return o=i?f.selection.map(i.slice(s)):f.selection,a=new yt(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:l,selection:o}}addTransform(e,n,r,i){let s=[],l=this.eventCount,o=this.items,a=!i&&o.length?o.get(o.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),h=new Nt(e.mapping.maps[c],f,n),p;(p=a&&a.merge(h))&&(h=p,c?s.pop():o=o.slice(0,o.length-1)),s.push(h),n&&(l++,n=void 0),i||(a=h)}let u=l-r.depth;return u>bk&&(o=Ek(o,u),l-=u),new yt(o.append(s),l)}remapping(e,n){let r=new Ki;return this.items.forEach((i,s)=>{let l=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new yt(this.items.append(e.map(n=>new Nt(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,l=e.steps.length,o=this.eventCount;this.items.forEach(h=>{h.selection&&o--},i);let a=n;this.items.forEach(h=>{let p=s.getMirror(--a);if(p==null)return;l=Math.min(l,p);let m=s.maps[p];if(h.step){let v=e.steps[p].invert(e.docs[p]),w=h.selection&&h.selection.map(s.slice(a+1,p));w&&o++,r.push(new Nt(m,v,w))}else r.push(new Nt(m))},i);let u=[];for(let h=n;h<l;h++)u.push(new Nt(s.maps[h]));let c=this.items.slice(0,i).append(u).append(r),f=new yt(c,o);return f.emptyItemCount()>Mk&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((l,o)=>{if(o>=e)i.push(l),l.selection&&s++;else if(l.step){let a=l.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){let c=l.selection&&l.selection.map(n.slice(r));c&&s++;let f=new Nt(u.invert(),a,c),h,p=i.length-1;(h=i.length&&i[p].merge(f))?i[p]=h:i.push(f)}}else l.map&&r--},this.items.length,0),new yt(pe.from(i.reverse()),s)}}yt.empty=new yt(pe.empty,0);function Ek(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Nt{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Nt(n.getMap().invert(),n,this.selection)}}}class en{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const bk=20;function Ok(t,e,n,r){let i=n.getMeta(Jn),s;if(i)return i.historyState;n.getMeta(jk)&&(t=new en(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(Jn))return l.getMeta(Jn).redo?new en(t.done.addTransform(n,void 0,r,Qs(e)),t.undone,_f(n.mapping.maps),t.prevTime,t.prevComposition):new en(t.done,t.undone.addTransform(n,void 0,r,Qs(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),a=t.prevTime==0||!l&&t.prevComposition!=o&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Tk(n,t.prevRanges)),u=l?qo(t.prevRanges,n.mapping):_f(n.mapping.maps);return new en(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,Qs(e)),yt.empty,u,n.time,o??t.prevComposition)}else return(s=n.getMeta("rebased"))?new en(t.done.rebased(n,s),t.undone.rebased(n,s),qo(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new en(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),qo(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Tk(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function _f(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,l)=>e.push(s,l));return e}function qo(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function Dk(t,e,n){let r=Qs(e),i=Jn.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let l=s.selection.resolve(s.transform.doc),o=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new en(n?o:s.remaining,n?s.remaining:o,null,0,-1);return s.transform.setSelection(l).setMeta(Jn,{redo:n,historyState:a})}let Ko=!1,Lf=null;function Qs(t){let e=t.plugins;if(Lf!=e){Ko=!1,Lf=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ko=!0;break}}return Ko}const Jn=new Fm("history"),jk=new Fm("closeHistory");function Ik(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new lr({key:Jn,state:{init(){return new en(yt.empty,yt.empty,null,0,-1)},apply(e,n,r){return Ok(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Pl:r=="historyRedo"?Xi:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Sg(t,e){return(n,r)=>{let i=Jn.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=Dk(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const Pl=Sg(!1,!0),Xi=Sg(!0,!0),Cg=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Pk(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Rk=(t,e,n)=>{let r=Pk(t,n);if(!r)return!1;let i=Ng(r);if(!i){let l=r.blockRange(),o=l&&ss(l);return o==null?!1:(e&&e(t.tr.lift(l,o).scrollIntoView()),!0)}let s=i.nodeBefore;if(bg(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Ur(s,"end")||z.isSelectable(s)))for(let l=r.depth;;l--){let o=dc(t.doc,r.before(l),r.after(l),I.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ur(s,"end")?B.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):z.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function Ur(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Ak=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Ng(r)}let l=s&&s.nodeBefore;return!l||!z.isSelectable(l)?!1:(e&&e(t.tr.setSelection(z.create(t.doc,s.pos-l.nodeSize)).scrollIntoView()),!0)};function Ng(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function zk(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const _k=(t,e,n)=>{let r=zk(t,n);if(!r)return!1;let i=Mg(r);if(!i)return!1;let s=i.nodeAfter;if(bg(t,i,e,1))return!0;if(r.parent.content.size==0&&(Ur(s,"start")||z.isSelectable(s))){let l=dc(t.doc,r.before(),r.after(),I.empty);if(l&&l.slice.size<l.to-l.from){if(e){let o=t.tr.step(l);o.setSelection(Ur(s,"start")?B.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):z.create(o.doc,o.mapping.map(i.pos))),e(o.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Lk=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Mg(r)}let l=s&&s.nodeAfter;return!l||!z.isSelectable(l)?!1:(e&&e(t.tr.setSelection(z.create(t.doc,s.pos)).scrollIntoView()),!0)};function Mg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const ou=(t,e)=>{let n=t.selection,r=n instanceof z,i;if(r){if(n.node.isTextblock||!Qr(t.doc,n.from))return!1;i=n.from}else if(i=jm(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(z.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Fk=(t,e)=>{let n=t.selection,r;if(n instanceof z){if(n.node.isTextblock||!Qr(t.doc,n.to))return!1;r=n.to}else if(r=jm(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},au=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&ss(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Bk=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Sc(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Eg=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),l=Sc(i.contentMatchAt(s));if(!l||!i.canReplaceWith(s,s,l))return!1;if(e){let o=n.after(),a=t.tr.replaceWith(o,o,l.createAndFill());a.setSelection(B.near(a.doc.resolve(o),1)),e(a.scrollIntoView())}return!0},Vk=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Ye||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Sc(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=t.tr.insert(l,s.createAndFill());o.setSelection(W.create(o.doc,l+1)),e(o.scrollIntoView())}return!0},$k=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Dr(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ss(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function Wk(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof z&&e.selection.node.isBlock)return!r.parentOffset||!Dr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],l,o,a=!1,u=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){a=r.end(p)==r.pos+(r.depth-p),u=r.start(p)==r.pos-(r.depth-p),o=Sc(r.node(p-1).contentMatchAt(r.indexAfter(p-1)));let v=t&&t(i.parent,a,r);s.unshift(v||(a&&o?{type:o}:null)),l=p;break}else{if(p==1)return!1;s.unshift(null)}let c=e.tr;(e.selection instanceof W||e.selection instanceof Ye)&&c.deleteSelection();let f=c.mapping.map(r.pos),h=Dr(c.doc,f,s.length,s);if(h||(s[0]=o?{type:o}:null,h=Dr(c.doc,f,s.length,s)),!h)return!1;if(c.split(f,s.length,s),!a&&u&&r.node(l).type!=o){let p=c.mapping.map(r.before(l)),m=c.doc.resolve(p);o&&r.node(l-1).canReplaceWith(m.index(),m.index()+1,o)&&c.setNodeMarkup(c.mapping.map(r.before(l)),o)}return n&&n(c.scrollIntoView()),!0}}const Uk=Wk(),uu=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(z.create(t.doc,i))),!0)},Hk=(t,e)=>(e&&e(t.tr.setSelection(new Ye(t.doc))),!0);function qk(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Qr(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function bg(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,l,o,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&qk(t,e,n))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(l=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(l[0]||s.type).validEnd){if(n){let p=e.pos+s.nodeSize,m=M.empty;for(let y=l.length-1;y>=0;y--)m=M.from(l[y].create(null,m));m=M.from(i.copy(m));let v=t.tr.step(new we(e.pos-1,p,e.pos,p,new I(m,1,0),l.length,!0)),w=v.doc.resolve(p+2*l.length);w.nodeAfter&&w.nodeAfter.type==i.type&&Qr(v.doc,w.pos)&&v.join(w.pos),n(v.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&a?null:B.findFrom(e,1),f=c&&c.$from.blockRange(c.$to),h=f&&ss(f);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(f,h).scrollIntoView()),!0;if(u&&Ur(s,"start",!0)&&Ur(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let v=s,w=1;for(;!v.isTextblock;v=v.firstChild)w++;if(p.canReplace(p.childCount,p.childCount,v.content)){if(n){let y=M.empty;for(let x=m.length-1;x>=0;x--)y=M.from(m[x].copy(y));let g=t.tr.step(new we(e.pos-m.length,e.pos+s.nodeSize,e.pos+w,e.pos+s.nodeSize-w,new I(y,m.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function Og(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(W.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Kk=Og(-1),Jk=Og(1);function cu(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,l=i.blockRange(s),o=l&&cc(l,t,e);return o?(r&&r(n.tr.wrap(l,o).scrollIntoView()),!0):!1}}function Ys(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:l},$to:{pos:o}}=n.selection.ranges[s];n.doc.nodesBetween(l,o,(a,u)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let c=n.doc.resolve(u),f=c.index();i=c.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[l];s.setBlockType(o,a,t,e)}r(s.scrollIntoView())}return!0}}function Qk(t,e,n,r){for(let i=0;i<e.length;i++){let{$from:s,$to:l}=e[i],o=s.depth==0?t.inlineContent&&t.type.allowsMarkType(n):!1;if(t.nodesBetween(s.pos,l.pos,(a,u)=>{if(o||!r&&a.isAtom&&a.isInline&&u>=s.pos&&u+a.nodeSize<=l.pos)return!1;o=a.inlineContent&&a.type.allowsMarkType(n)}),o)return!0}return!1}function Yk(t){let e=[];for(let n=0;n<t.length;n++){let{$from:r,$to:i}=t[n];r.doc.nodesBetween(r.pos,i.pos,(s,l)=>{if(s.isAtom&&s.content.size&&s.isInline&&l>=r.pos&&l+s.nodeSize<=i.pos)return l+1>r.pos&&e.push(new Qa(r,r.doc.resolve(l+1))),r=r.doc.resolve(l+1+s.content.size),!1}),r.pos<i.pos&&e.push(new Qa(r,i))}return e}function sn(t,e=null,n){let r=(n&&n.removeWhenPresent)!==!1,i=(n&&n.enterInlineAtoms)!==!1,s=!(n&&n.includeWhitespace);return function(l,o){let{empty:a,$cursor:u,ranges:c}=l.selection;if(a&&!u||!Qk(l.doc,c,t,i))return!1;if(o)if(u)t.isInSet(l.storedMarks||u.marks())?o(l.tr.removeStoredMark(t)):o(l.tr.addStoredMark(t.create(e)));else{let f,h=l.tr;i||(c=Yk(c)),r?f=!c.some(p=>l.doc.rangeHasMark(p.$from.pos,p.$to.pos,t)):f=!c.every(p=>{let m=!1;return h.doc.nodesBetween(p.$from.pos,p.$to.pos,(v,w,y)=>{if(m)return!1;m=!t.isInSet(v.marks)&&!!y&&y.type.allowsMarkType(t)&&!(v.isText&&/^\s*$/.test(v.textBetween(Math.max(0,p.$from.pos-w),Math.min(v.nodeSize,p.$to.pos-w))))}),!m});for(let p=0;p<c.length;p++){let{$from:m,$to:v}=c[p];if(!f)h.removeMark(m.pos,v.pos,t);else{let w=m.pos,y=v.pos,g=m.nodeAfter,x=v.nodeBefore,k=s&&g&&g.isText?/^\s*/.exec(g.text)[0].length:0,N=s&&x&&x.isText?/\s*$/.exec(x.text)[0].length:0;w+k<y&&(w+=k,y-=N),h.addMark(w,y,t.create(e))}}o(h.scrollIntoView())}return!0}}function to(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let Jo=to(Cg,Rk,Ak),Ff=to(Cg,_k,Lk);const _t={Enter:to(Bk,Vk,$k,Uk),"Mod-Enter":Eg,Backspace:Jo,"Mod-Backspace":Jo,"Shift-Backspace":Jo,Delete:Ff,"Mod-Delete":Ff,"Mod-a":Hk},Tg={"Ctrl-h":_t.Backspace,"Alt-Backspace":_t["Mod-Backspace"],"Ctrl-d":_t.Delete,"Ctrl-Alt-Backspace":_t["Mod-Delete"],"Alt-Delete":_t["Mod-Delete"],"Alt-d":_t["Mod-Delete"],"Ctrl-a":Kk,"Ctrl-e":Jk};for(let t in _t)Tg[t]=_t[t];const Gk=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Xk=Gk?Tg:_t;function Zk(t={}){return new lr({view(e){return new ew(e,t)}})}class ew{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=l=>{this[i](l)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),l=s.width/i.offsetWidth,o=s.height/i.offsetHeight;if(n){let f=e.nodeBefore,h=e.nodeAfter;if(f||h){let p=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(p){let m=p.getBoundingClientRect(),v=f?m.bottom:m.top;f&&h&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*o;r={left:m.left,right:m.right,top:v-w,bottom:v+w}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*l;r={left:f.left-h,right:f.left+h,top:f.top,bottom:f.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,c;if(!a||a==document.body&&getComputedStyle(a).position=="static")u=-pageXOffset,c=-pageYOffset;else{let f=a.getBoundingClientRect(),h=f.width/a.offsetWidth,p=f.height/a.offsetHeight;u=f.left-a.scrollLeft*h,c=f.top-a.scrollTop*p}this.element.style.left=(r.left-u)/l+"px",this.element.style.top=(r.top-c)/o+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=Im(this.editorView.state.doc,l,this.editorView.dragging.slice);o!=null&&(l=o)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class ie extends B{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ie.valid(r)?new ie(r):B.near(r)}content(){return I.empty}eq(e){return e instanceof ie&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ie(e.resolve(n.pos))}getBookmark(){return new Cc(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!tw(e)||!nw(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ie.valid(e))return e;let i=e.pos,s=null;for(let l=e.depth;;l--){let o=e.node(l);if(n>0?e.indexAfter(l)<o.childCount:e.index(l)>0){s=o.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=n;let a=e.doc.resolve(i);if(ie.valid(a))return a}for(;;){let l=n>0?s.firstChild:s.lastChild;if(!l){if(s.isAtom&&!s.isText&&!z.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=l,i+=n;let o=e.doc.resolve(i);if(ie.valid(o))return o}return null}}}ie.prototype.visible=!1;ie.findFrom=ie.findGapCursorFrom;B.jsonID("gapcursor",ie);class Cc{constructor(e){this.pos=e}map(e){return new Cc(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ie.valid(n)?new ie(n):B.near(n)}}function tw(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function nw(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function rw(){return new lr({props:{decorations:ow,createSelectionBetween(t,e,n){return e.pos==n.pos&&ie.valid(n)?new ie(n):null},handleClick:sw,handleKeyDown:iw,handleDOMEvents:{beforeinput:lw}}})}const iw=kg({ArrowLeft:Is("horiz",-1),ArrowRight:Is("horiz",1),ArrowUp:Is("vert",-1),ArrowDown:Is("vert",1)});function Is(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let l=r.selection,o=e>0?l.$to:l.$from,a=l.empty;if(l instanceof W){if(!s.endOfTextblock(n)||o.depth==0)return!1;a=!1,o=r.doc.resolve(e>0?o.after():o.before())}let u=ie.findGapCursorFrom(o,e,a);return u?(i&&i(r.tr.setSelection(new ie(u))),!0):!1}}function sw(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ie.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&z.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ie(r))),!0)}function lw(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ie))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=M.empty;for(let l=r.length-1;l>=0;l--)i=M.from(r[l].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new I(i,0,0));return s.setSelection(W.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function ow(t){if(!(t.selection instanceof ie))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ce.create(t.doc,[ot.widget(t.selection.head,e,{key:"gapcursor"})])}function Ge(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)Dg(t,arguments[e]);return t}function Dg(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Dg(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const Mi="http://www.w3.org/2000/svg",aw="http://www.w3.org/1999/xlink",du="ProseMirror-icon";function uw(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;return e}function cw(t,e){let n=(t.nodeType==9?t:t.ownerDocument)||document,r=n.createElement("div");if(r.className=du,e.path){let{path:i,width:s,height:l}=e,o="pm-icon-"+uw(i).toString(16);n.getElementById(o)||dw(t,o,e);let a=r.appendChild(n.createElementNS(Mi,"svg"));a.style.width=s/l+"em",a.appendChild(n.createElementNS(Mi,"use")).setAttributeNS(aw,"href",/([^#]*)/.exec(n.location.toString())[1]+"#"+o)}else if(e.dom)r.appendChild(e.dom.cloneNode(!0));else{let{text:i,css:s}=e;r.appendChild(n.createElement("span")).textContent=i||"",s&&(r.firstChild.style.cssText=s)}return r}function dw(t,e,n){let[r,i]=t.nodeType==9?[t,t.body]:[t.ownerDocument||document,t],s=r.getElementById(du+"-collection");s||(s=r.createElementNS(Mi,"svg"),s.id=du+"-collection",s.style.display="none",i.insertBefore(s,i.firstChild));let l=r.createElementNS(Mi,"symbol");l.id=e,l.setAttribute("viewBox","0 0 "+n.width+" "+n.height),l.appendChild(r.createElementNS(Mi,"path")).setAttribute("d",n.path),s.appendChild(l)}const Be="ProseMirror-menu";class wt{constructor(e){this.spec=e}render(e){let n=this.spec,r=n.render?n.render(e):n.icon?cw(e.root,n.icon):n.label?Ge("div",null,Zi(e,n.label)):null;if(!r)throw new RangeError("MenuItem without icon or label property");if(n.title){const s=typeof n.title=="function"?n.title(e.state):n.title;r.setAttribute("title",Zi(e,s))}n.class&&r.classList.add(n.class),n.css&&(r.style.cssText+=n.css),r.addEventListener("mousedown",s=>{s.preventDefault(),r.classList.contains(Be+"-disabled")||n.run(e.state,e.dispatch,e,s)});function i(s){if(n.select){let o=n.select(s);if(r.style.display=o?"":"none",!o)return!1}let l=!0;if(n.enable&&(l=n.enable(s)||!1,fu(r,Be+"-disabled",!l)),n.active){let o=l&&n.active(s)||!1;fu(r,Be+"-active",o)}return!0}return{dom:r,update:i}}}function Zi(t,e){return t._props.translate?t._props.translate(e):e}let Ei={time:0,node:null};function jg(t){Ei.time=Date.now(),Ei.node=t.target}function Ig(t){return Date.now()-100<Ei.time&&Ei.node&&t.contains(Ei.node)}class Bf{constructor(e,n={}){this.options=n,this.options=n||{},this.content=Array.isArray(e)?e:[e]}render(e){let n=Pg(this.content,e),r=e.dom.ownerDocument.defaultView||window,i=Ge("div",{class:Be+"-dropdown "+(this.options.class||""),style:this.options.css},Zi(e,this.options.label||""));this.options.title&&i.setAttribute("title",Zi(e,this.options.title));let s=Ge("div",{class:Be+"-dropdown-wrap"},i),l=null,o=null,a=()=>{l&&l.close()&&(l=null,r.removeEventListener("mousedown",o))};i.addEventListener("mousedown",c=>{c.preventDefault(),jg(c),l?a():(l=this.expand(s,n.dom),r.addEventListener("mousedown",o=()=>{Ig(s)||a()}))});function u(c){let f=n.update(c);return s.style.display=f?"":"none",f}return{dom:s,update:u}}expand(e,n){let r=Ge("div",{class:Be+"-dropdown-menu "+(this.options.class||"")},n),i=!1;function s(){return i?!1:(i=!0,e.removeChild(r),!0)}return e.appendChild(r),{close:s,node:r}}}function Pg(t,e){let n=[],r=[];for(let i=0;i<t.length;i++){let{dom:s,update:l}=t[i].render(e);n.push(Ge("div",{class:Be+"-dropdown-item"},s)),r.push(l)}return{dom:n,update:Rg(r,n)}}function Rg(t,e){return n=>{let r=!1;for(let i=0;i<t.length;i++){let s=t[i](n);e[i].style.display=s?"":"none",s&&(r=!0)}return r}}class fw{constructor(e,n={}){this.options=n,this.content=Array.isArray(e)?e:[e]}render(e){let n=Pg(this.content,e),r=e.dom.ownerDocument.defaultView||window,i=Ge("div",{class:Be+"-submenu-label"},Zi(e,this.options.label||"")),s=Ge("div",{class:Be+"-submenu-wrap"},i,Ge("div",{class:Be+"-submenu"},n.dom)),l=null;i.addEventListener("mousedown",a=>{a.preventDefault(),jg(a),fu(s,Be+"-submenu-wrap-active",!1),l||r.addEventListener("mousedown",l=()=>{Ig(s)||(s.classList.remove(Be+"-submenu-wrap-active"),r.removeEventListener("mousedown",l),l=null)})});function o(a){let u=n.update(a);return s.style.display=u?"":"none",u}return{dom:s,update:o}}}function Vf(t,e){let n=document.createDocumentFragment(),r=[],i=[];for(let l=0;l<e.length;l++){let o=e[l],a=[],u=[];for(let c=0;c<o.length;c++){let{dom:f,update:h}=o[c].render(t),p=Ge("span",{class:Be+"item"},f);n.appendChild(p),u.push(p),a.push(h)}a.length&&(r.push(Rg(a,u)),l<e.length-1&&i.push(n.appendChild(hw())))}function s(l){let o=!1,a=!1;for(let u=0;u<r.length;u++){let c=r[u](l);u&&(i[u-1].style.display=a&&c?"":"none"),a=c,c&&(o=!0)}return o}return{dom:n,update:s}}function hw(){return Ge("span",{class:Be+"separator"})}const it={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"⬚",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},pw=new wt({title:"Join with above block",run:ou,select:t=>ou(t),icon:it.join}),mw=new wt({title:"Lift out of enclosing block",run:au,select:t=>au(t),icon:it.lift}),gw=new wt({title:"Select parent node",run:uu,select:t=>uu(t),icon:it.selectParentNode});let yw=new wt({title:"Undo last change",run:Pl,enable:t=>Pl(t),icon:it.undo}),vw=new wt({title:"Redo last undone change",run:Xi,enable:t=>Xi(t),icon:it.redo});function xw(t,e){let n={run(r,i){return cu(t,e.attrs)(r,i)},select(r){return cu(t,e.attrs)(r)}};for(let r in e)n[r]=e[r];return new wt(n)}function Qo(t,e){let n=Ys(t,e.attrs),r={run:n,enable(i){return n(i)},active(i){let{$from:s,to:l,node:o}=i.selection;return o?o.hasMarkup(t,e.attrs):l<=s.end()&&s.parent.hasMarkup(t,e.attrs)}};for(let i in e)r[i]=e[i];return new wt(r)}function fu(t,e,n){n?t.classList.add(e):t.classList.remove(e)}const Ps="ProseMirror-menubar";function kw(){if(typeof navigator>"u")return!1;let t=navigator.userAgent;return!/Edge\/\d/.test(t)&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t)}function ww(t){return new lr({view(e){return new Sw(e,t)}})}class Sw{constructor(e,n){this.editorView=e,this.options=n,this.spacer=null,this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1,this.scrollHandler=null,this.root=e.root,this.wrapper=Ge("div",{class:Ps+"-wrapper"}),this.menu=this.wrapper.appendChild(Ge("div",{class:Ps})),this.menu.className=Ps,e.dom.parentNode&&e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom);let{dom:r,update:i}=Vf(this.editorView,this.options.content);if(this.contentUpdate=i,this.menu.appendChild(r),this.update(),n.floating&&!kw()){this.updateFloat();let s=Mw(this.wrapper);this.scrollHandler=l=>{let o=this.editorView.root;(o.body||o).contains(this.wrapper)?this.updateFloat(l.target.getBoundingClientRect?l.target:void 0):s.forEach(a=>a.removeEventListener("scroll",this.scrollHandler))},s.forEach(l=>l.addEventListener("scroll",this.scrollHandler))}}update(){if(this.editorView.root!=this.root){let{dom:e,update:n}=Vf(this.editorView,this.options.content);this.contentUpdate=n,this.menu.replaceChild(e,this.menu.firstChild),this.root=this.editorView.root}this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))}updateScrollCursor(){let e=this.editorView.root.getSelection();if(!e.focusNode)return;let n=e.getRangeAt(0).getClientRects(),r=n[Cw(e)?0:n.length-1];if(!r)return;let i=this.menu.getBoundingClientRect();if(r.top<i.bottom&&r.bottom>i.top){let s=Nw(this.wrapper);s&&(s.scrollTop-=i.bottom-r.top)}}updateFloat(e){let n=this.wrapper,r=n.getBoundingClientRect(),i=e?Math.max(0,e.getBoundingClientRect().top):0;if(this.floating)if(r.top>=i||r.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{let s=(n.offsetWidth-n.clientWidth)/2;this.menu.style.left=r.left+s+"px",this.menu.style.display=r.top>(this.editorView.dom.ownerDocument.defaultView||window).innerHeight?"none":"",e&&(this.menu.style.top=i+"px")}else if(r.top<i&&r.bottom>=this.menu.offsetHeight+10){this.floating=!0;let s=this.menu.getBoundingClientRect();this.menu.style.left=s.left+"px",this.menu.style.width=s.width+"px",e&&(this.menu.style.top=i+"px"),this.menu.style.position="fixed",this.spacer=Ge("div",{class:Ps+"-spacer",style:`height: ${s.height}px`}),n.insertBefore(this.spacer,this.menu)}}destroy(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)}}function Cw(t){return t.anchorNode==t.focusNode?t.anchorOffset>t.focusOffset:t.anchorNode.compareDocumentPosition(t.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}function Nw(t){for(let e=t.parentNode;e;e=e.parentNode)if(e.scrollHeight>e.clientHeight)return e}function Mw(t){let e=[t.ownerDocument.defaultView||window];for(let n=t.parentNode;n;n=n.parentNode)e.push(n);return e}class Tn{constructor(e,n,r={}){this.match=e,this.match=e,this.handler=typeof n=="string"?Ew(n):n,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function Ew(t){return function(e,n,r,i){let s=t;if(n[1]){let l=n[0].lastIndexOf(n[1]);s+=n[0].slice(l+n[1].length),r+=l;let o=r-i;o>0&&(s=n[0].slice(l-o,l)+s,r=i)}return e.tr.insertText(s,r,i)}}const bw=500;function Ow({rules:t}){let e=new lr({state:{init(){return null},apply(n,r){let i=n.getMeta(this);return i||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,i,s){return $f(n,r,i,s,t,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&$f(n,r.pos,r.pos,"",t,e)})}}},isInputRules:!0});return e}function $f(t,e,n,r,i,s){if(t.composing)return!1;let l=t.state,o=l.doc.resolve(e),a=o.parent.textBetween(Math.max(0,o.parentOffset-bw),o.parentOffset,null,"￼")+r;for(let u=0;u<i.length;u++){let c=i[u];if(!c.inCodeMark&&o.marks().some(p=>p.type.spec.code))continue;if(o.parent.type.spec.code){if(!c.inCode)continue}else if(c.inCode==="only")continue;let f=c.match.exec(a),h=f&&f[0].length>=r.length&&c.handler(l,f,e-(f[0].length-r.length),n);if(h)return c.undoable&&h.setMeta(s,{transform:h,from:e,to:n,text:r}),t.dispatch(h),!0}return!1}const Tw=(t,e)=>{let n=t.plugins;for(let r=0;r<n.length;r++){let i=n[r],s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){let l=t.tr,o=s.transform;for(let a=o.steps.length-1;a>=0;a--)l.step(o.steps[a].invert(o.docs[a]));if(s.text){let a=l.doc.resolve(s.from).marks();l.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else l.delete(s.from,s.to);e(l)}return!0}}return!1},Dw=new Tn(/--$/,"—",{inCodeMark:!1}),jw=new Tn(/\.\.\.$/,"…",{inCodeMark:!1}),Iw=new Tn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1}),Pw=new Tn(/"$/,"”",{inCodeMark:!1}),Rw=new Tn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1}),Aw=new Tn(/'$/,"’",{inCodeMark:!1}),zw=[Iw,Pw,Rw,Aw];function Nc(t,e,n=null,r){return new Tn(t,(i,s,l,o)=>{let a=n instanceof Function?n(s):n,u=i.tr.delete(l,o),c=u.doc.resolve(l),f=c.blockRange(),h=f&&cc(f,e,a);if(!h)return null;u.wrap(f,h);let p=u.doc.resolve(l-1).nodeBefore;return p&&p.type==e&&Qr(u.doc,l-1)&&(!r||r(s,p))&&u.join(l-1),u})}function Ag(t,e,n=null){return new Tn(t,(r,i,s,l)=>{let o=r.doc.resolve(s),a=n instanceof Function?n(i):n;return o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e)?r.tr.delete(s,l).setBlockType(s,s,e,a):null})}const Rs="ProseMirror-prompt";function zg(t){let e=document.body.appendChild(document.createElement("div"));e.className=Rs;let n=h=>{e.contains(h.target)||r()};setTimeout(()=>window.addEventListener("mousedown",n),50);let r=()=>{window.removeEventListener("mousedown",n),e.parentNode&&e.parentNode.removeChild(e)},i=[];for(let h in t.fields)i.push(t.fields[h].render());let s=document.createElement("button");s.type="submit",s.className=Rs+"-submit",s.textContent="OK";let l=document.createElement("button");l.type="button",l.className=Rs+"-cancel",l.textContent="Cancel",l.addEventListener("click",r);let o=e.appendChild(document.createElement("form"));t.title&&(o.appendChild(document.createElement("h5")).textContent=t.title),i.forEach(h=>{o.appendChild(document.createElement("div")).appendChild(h)});let a=o.appendChild(document.createElement("div"));a.className=Rs+"-buttons",a.appendChild(s),a.appendChild(document.createTextNode(" ")),a.appendChild(l);let u=e.getBoundingClientRect();e.style.top=(window.innerHeight-u.height)/2+"px",e.style.left=(window.innerWidth-u.width)/2+"px";let c=()=>{let h=_w(t.fields,i);h&&(r(),t.callback(h))};o.addEventListener("submit",h=>{h.preventDefault(),c()}),o.addEventListener("keydown",h=>{h.keyCode==27?(h.preventDefault(),r()):h.keyCode==13&&!(h.ctrlKey||h.metaKey||h.shiftKey)?(h.preventDefault(),c()):h.keyCode==9&&window.setTimeout(()=>{e.contains(document.activeElement)||r()},500)});let f=o.elements[0];f&&f.focus()}function _w(t,e){let n=Object.create(null),r=0;for(let i in t){let s=t[i],l=e[r++],o=s.read(l),a=s.validate(o);if(a)return Lw(l,a),null;n[i]=s.clean(o)}return n}function Lw(t,e){let n=t.parentNode,r=n.appendChild(document.createElement("div"));r.style.left=t.offsetLeft+t.offsetWidth+2+"px",r.style.top=t.offsetTop-5+"px",r.className="ProseMirror-invalid",r.textContent=e,setTimeout(()=>n.removeChild(r),1500)}class Fw{constructor(e){this.options=e}read(e){return e.value}validateType(e){return null}validate(e){return!e&&this.options.required?"Required field":this.validateType(e)||(this.options.validate?this.options.validate(e):null)}clean(e){return this.options.clean?this.options.clean(e):e}}class bi extends Fw{render(){let e=document.createElement("input");return e.type="text",e.placeholder=this.options.label,e.value=this.options.value||"",e.autocomplete="off",e}}function _g(t,e){let n=t.selection.$from;for(let r=n.depth;r>=0;r--){let i=n.index(r);if(n.node(r).canReplaceWith(i,i,e))return!0}return!1}function Bw(t){return new wt({title:"Insert image",label:"Image",enable(e){return _g(e,t)},run(e,n,r){let{from:i,to:s}=e.selection,l=null;e.selection instanceof z&&e.selection.node.type==t&&(l=e.selection.node.attrs),zg({title:"Insert image",fields:{src:new bi({label:"Location",required:!0,value:l&&l.src}),title:new bi({label:"Title",value:l&&l.title}),alt:new bi({label:"Description",value:l?l.alt:e.doc.textBetween(i,s," ")})},callback(o){r.dispatch(r.state.tr.replaceSelectionWith(t.createAndFill(o))),r.focus()}})}})}function Lg(t,e){let n={label:e.title,run:t};for(let r in e)n[r]=e[r];return!e.enable&&!e.select&&(n[e.enable?"enable":"select"]=r=>t(r)),new wt(n)}function hu(t,e){let{from:n,$from:r,to:i,empty:s}=t.selection;return s?!!e.isInSet(t.storedMarks||r.marks()):t.doc.rangeHasMark(n,i,e)}function Yo(t,e){let n={active(r){return hu(r,t)}};for(let r in e)n[r]=e[r];return Lg(sn(t),n)}function Vw(t){return new wt({title:"Add or remove link",icon:it.link,active(e){return hu(e,t)},enable(e){return!e.selection.empty},run(e,n,r){if(hu(e,t))return sn(t)(e,n),!0;zg({title:"Create a link",fields:{href:new bi({label:"Link target",required:!0}),title:new bi({label:"Title"})},callback(i){sn(t,i)(r.state,r.dispatch),r.focus()}})}})}function Wf(t,e){return Lg(lu(t,e.attrs),e)}function $w(t){let e={},n;(n=t.marks.strong)&&(e.toggleStrong=Yo(n,{title:"Toggle strong style",icon:it.strong})),(n=t.marks.em)&&(e.toggleEm=Yo(n,{title:"Toggle emphasis",icon:it.em})),(n=t.marks.code)&&(e.toggleCode=Yo(n,{title:"Toggle code font",icon:it.code})),(n=t.marks.link)&&(e.toggleLink=Vw(n));let r;if((r=t.nodes.image)&&(e.insertImage=Bw(r)),(r=t.nodes.bullet_list)&&(e.wrapBulletList=Wf(r,{title:"Wrap in bullet list",icon:it.bulletList})),(r=t.nodes.ordered_list)&&(e.wrapOrderedList=Wf(r,{title:"Wrap in ordered list",icon:it.orderedList})),(r=t.nodes.blockquote)&&(e.wrapBlockQuote=xw(r,{title:"Wrap in block quote",icon:it.blockquote})),(r=t.nodes.paragraph)&&(e.makeParagraph=Qo(r,{title:"Change to paragraph",label:"Plain"})),(r=t.nodes.code_block)&&(e.makeCodeBlock=Qo(r,{title:"Change to code block",label:"Code"})),r=t.nodes.heading)for(let s=1;s<=10;s++)e["makeHead"+s]=Qo(r,{title:"Change to heading "+s,label:"Level "+s,attrs:{level:s}});if(r=t.nodes.horizontal_rule){let s=r;e.insertHorizontalRule=new wt({title:"Insert horizontal rule",label:"Horizontal rule",enable(l){return _g(l,s)},run(l,o){o(l.tr.replaceSelectionWith(s.create()))}})}let i=s=>s.filter(l=>l);return e.insertMenu=new Bf(i([e.insertImage,e.insertHorizontalRule]),{label:"Insert"}),e.typeMenu=new Bf(i([e.makeParagraph,e.makeCodeBlock,e.makeHead1&&new fw(i([e.makeHead1,e.makeHead2,e.makeHead3,e.makeHead4,e.makeHead5,e.makeHead6]),{label:"Heading"})]),{label:"Type..."}),e.inlineMenu=[i([e.toggleStrong,e.toggleEm,e.toggleCode,e.toggleLink])],e.blockMenu=[i([e.wrapBulletList,e.wrapOrderedList,e.wrapBlockQuote,pw,mw,gw])],e.fullMenu=e.inlineMenu.concat([[e.insertMenu,e.typeMenu]],[[yw,vw]],e.blockMenu),e}const Uf=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Ww(t,e){let n={},r;function i(s,l){if(e){let o=e[s];if(o===!1)return;o&&(s=o)}n[s]=l}if(i("Mod-z",Pl),i("Shift-Mod-z",Xi),i("Backspace",Tw),Uf||i("Mod-y",Xi),i("Alt-ArrowUp",ou),i("Alt-ArrowDown",Fk),i("Mod-BracketLeft",au),i("Escape",uu),(r=t.marks.strong)&&(i("Mod-b",sn(r)),i("Mod-B",sn(r))),(r=t.marks.em)&&(i("Mod-i",sn(r)),i("Mod-I",sn(r))),(r=t.marks.code)&&i("Mod-`",sn(r)),(r=t.nodes.bullet_list)&&i("Shift-Ctrl-8",lu(r)),(r=t.nodes.ordered_list)&&i("Shift-Ctrl-9",lu(r)),(r=t.nodes.blockquote)&&i("Ctrl->",cu(r)),r=t.nodes.hard_break){let s=r,l=to(Eg,(o,a)=>(a&&a(o.tr.replaceSelectionWith(s.create()).scrollIntoView()),!0));i("Mod-Enter",l),i("Shift-Enter",l),Uf&&i("Ctrl-Enter",l)}if((r=t.nodes.list_item)&&(i("Enter",fk(r)),i("Mod-[",hk(r)),i("Mod-]",gk(r))),(r=t.nodes.paragraph)&&i("Shift-Ctrl-0",Ys(r)),(r=t.nodes.code_block)&&i("Shift-Ctrl-\\",Ys(r)),r=t.nodes.heading)for(let s=1;s<=6;s++)i("Shift-Ctrl-"+s,Ys(r,{level:s}));if(r=t.nodes.horizontal_rule){let s=r;i("Mod-_",(l,o)=>(o&&o(l.tr.replaceSelectionWith(s.create()).scrollIntoView()),!0))}return n}function Uw(t){return Nc(/^\s*>\s$/,t)}function Hw(t){return Nc(/^(\d+)\.\s$/,t,e=>({order:+e[1]}),(e,n)=>n.childCount+n.attrs.order==+e[1])}function qw(t){return Nc(/^\s*([-+*])\s$/,t)}function Kw(t){return Ag(/^```$/,t)}function Jw(t,e){return Ag(new RegExp("^(#{1,"+e+"})\\s$"),t,n=>({level:n[1].length}))}function Qw(t){let e=zw.concat(jw,Dw),n;return(n=t.nodes.blockquote)&&e.push(Uw(n)),(n=t.nodes.ordered_list)&&e.push(Hw(n)),(n=t.nodes.bullet_list)&&e.push(qw(n)),(n=t.nodes.code_block)&&e.push(Kw(n)),(n=t.nodes.heading)&&e.push(Jw(n,6)),Ow({rules:e})}function Hf(t){let e=[Qw(t.schema),zf(Ww(t.schema,t.mapKeys)),zf(Xk),Zk(),rw()];return t.menuBar!==!1&&e.push(ww({floating:t.floatingMenu!==!1,content:t.menuContent||$w(t.schema).fullMenu})),t.history!==!1&&e.push(Ik()),e.concat(new lr({props:{attributes:{class:"ProseMirror-example-setup-style"}}}))}const Yw=({identity:t,onError:e})=>{const n=P.useRef(null),[r,i]=P.useState(null),[s,l]=P.useState("Untitled Document"),[o,a]=P.useState([]),[u,c]=P.useState(""),[f,h]=P.useState(!1),[p,m]=P.useState(""),[v,w]=P.useState(!1),[y,g]=P.useState({auto_expire_hours:void 0,max_open_count:void 0,offline_open_allowed:!0,require_hardware_token:!1,watermark_enabled:!1}),x=new km({nodes:uk(Af.spec.nodes,"paragraph block*","block"),marks:Af.spec.marks});P.useEffect(()=>{if(n.current&&!r){const b=Ln.create({schema:x,plugins:Hf({schema:x})}),j=new xg(n.current,{state:b,dispatchTransaction:se=>{const je=j.state.apply(se);j.updateState(je)}});return i(j),()=>{j.destroy()}}},[n.current]);const k=()=>{if(!r)return"";const b=r.state.doc,j=document.createElement("div");return j.appendChild(Br.fromSchema(x).serializeFragment(b.content)),j.innerHTML},N=()=>{const b=u.trim();b&&!o.includes(b)&&(a([...o,b]),c(""))},O=b=>{a(o.filter(j=>j!==b))},D=async()=>{if(!p){e("Passphrase required to encrypt document");return}if(o.length===0){e("At least one recipient is required");return}try{h(!0);const b=k();if(!b.trim()){e("Document content cannot be empty");return}const se=await Z("create_document",{title:s,content:b,recipients:o,policy:y,passphrase:p}),je=await m1({defaultPath:`${s}.securedoc`,filters:[{name:"Secure Document",extensions:["securedoc"]}]});je&&(await Z("save_document_to_path",{sourcePath:se.file_path,targetPath:je}),m(""),w(!1),e(""))}catch(b){e(`Failed to save document: ${b}`)}finally{h(!1)}},C=()=>{if(r){const b=Ln.create({schema:x,plugins:Hf({schema:x})});r.updateState(b)}l("Untitled Document"),a([]),m(""),w(!1)};return d.jsxs("div",{className:"document-editor",children:[d.jsxs("div",{className:"editor-toolbar",children:[d.jsxs("div",{className:"document-info",children:[d.jsx("input",{type:"text",value:s,onChange:b=>l(b.target.value),className:"document-title",placeholder:"Document title..."}),d.jsxs("span",{className:"author-info",children:["Author: ",t.fingerprint.slice(0,8),"..."]})]}),d.jsxs("div",{className:"editor-actions",children:[d.jsx("button",{onClick:C,className:"new-doc-button",children:"New Document"}),d.jsx("button",{onClick:()=>w(!0),className:"save-button primary",disabled:f,children:f?"Encrypting...":"Save Encrypted"})]})]}),d.jsx("div",{className:"editor-container",children:d.jsx("div",{ref:n,className:"prosemirror-editor"})}),v&&d.jsx("div",{className:"save-dialog-overlay",children:d.jsxs("div",{className:"save-dialog",children:[d.jsx("h3",{children:"Encrypt & Save Document"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Recipients (Public Keys or Fingerprints)"}),d.jsxs("div",{className:"recipients-input",children:[d.jsx("input",{type:"text",value:u,onChange:b=>c(b.target.value),placeholder:"Enter recipient fingerprint...",onKeyPress:b=>b.key==="Enter"&&N()}),d.jsx("button",{onClick:N,type:"button",children:"Add"})]}),d.jsx("div",{className:"recipients-list",children:o.map(b=>d.jsxs("span",{className:"recipient-tag",children:[b.slice(0,12),"...",d.jsx("button",{onClick:()=>O(b),children:"×"})]},b))})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Document Policy"}),d.jsxs("div",{className:"policy-options",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:y.require_hardware_token,onChange:b=>g({...y,require_hardware_token:b.target.checked})}),"Require Hardware Token"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:y.watermark_enabled,onChange:b=>g({...y,watermark_enabled:b.target.checked})}),"Enable Watermark"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:!y.offline_open_allowed,onChange:b=>g({...y,offline_open_allowed:!b.target.checked})}),"Require Online Verification"]})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Encryption Passphrase"}),d.jsx("input",{type:"password",value:p,onChange:b=>m(b.target.value),placeholder:"Enter encryption passphrase...",className:"passphrase-input"})]}),d.jsxs("div",{className:"dialog-actions",children:[d.jsx("button",{onClick:()=>w(!1),className:"cancel-button",disabled:f,children:"Cancel"}),d.jsx("button",{onClick:D,className:"save-button primary",disabled:f||!p||o.length===0,children:f?"Encrypting...":"Encrypt & Save"})]})]})})]})};const Gw=({onError:t,onSessionCreated:e,onSessionJoined:n,activeSession:r,sessionMessages:i,onSendMessage:s})=>{const[l,o]=P.useState("create"),[a,u]=P.useState([]),[c,f]=P.useState(!1),[h,p]=P.useState({label:"",algorithm:"aead",shift:3,keyword:"",ttl_minutes:60,participants:[""],embedSecret:!1,confirmDanger:!1}),[m,v]=P.useState({cipherCode:"",passphrase:""}),[w,y]=P.useState(null),[g,x]=P.useState(!1);P.useEffect(()=>{k();const T=setInterval(k,5e3);return()=>clearInterval(T)},[]);const k=async()=>{try{const T=await Z("list_active_sessions");T.success&&T.data&&u(T.data.sessions||[])}catch(T){console.error("Failed to load active sessions:",T)}},N=async()=>{if(!h.label.trim()){t==null||t("Session label is required");return}if(h.embedSecret&&!h.confirmDanger){x(!0);return}f(!0);try{const T=h.algorithm==="caesar"?{shift:h.shift}:h.algorithm==="vigenere"?{keyword:h.keyword}:h.algorithm==="aead"?{memory_cost:65536,time_cost:3,parallelism:1}:{},L={def_id:`session_${Date.now()}`,label:h.label,algorithm:h.algorithm,algorithm_params:T,ttl_minutes:h.ttl_minutes,embed_secret:h.embedSecret,confirm_danger:h.confirmDanger},ne=await Z("generate_cipher_code",L);if(!ne.success)throw new Error(ne.error||"Failed to generate cipher code");const me=ne.data,jt=new Blob([new Uint8Array(me.qr_code_png)],{type:"image/png"}),S=URL.createObjectURL(jt);y({code:me,qrDataUrl:S});const A={cipher_code:me.cipher_code,participants:h.participants.filter(Y=>Y.trim()),options:{ttl_minutes:h.ttl_minutes}},_=await Z("start_cipher_session",A);if(!_.success)throw new Error(_.error||"Failed to start session");const q=_.data.session_id;e==null||e(q),k()}catch(T){const L=T instanceof Error?T.message:"Unknown error occurred";t==null||t(L)}finally{f(!1)}},O=async()=>{if(!m.cipherCode.trim()){t==null||t("Cipher code is required");return}f(!0);try{if(!(await Z("validate_cipher_code_input",m.cipherCode)).success)throw new Error("Invalid cipher code format");const L={session_id:`joined_${Date.now()}`,cipher_code_string:m.cipherCode,passphrase:m.passphrase||void 0},ne=await Z("join_cipher_session",L);if(!ne.success)throw new Error(ne.error||"Failed to join session");n==null||n(L.session_id),k(),v({cipherCode:"",passphrase:""})}catch(T){const L=T instanceof Error?T.message:"Unknown error occurred";t==null||t(L)}finally{f(!1)}},D=async T=>{if(confirm("Are you sure you want to end this session? This cannot be undone."))try{await Z("end_cipher_session",T,!0),k()}catch(L){const ne=L instanceof Error?L.message:"Failed to end session";t==null||t(ne)}},C=T=>{if(T<=0)return"EXPIRED";const L=Math.floor(T/3600),ne=Math.floor(T%3600/60),me=T%60;return L>0?`${L}:${ne.toString().padStart(2,"0")}:${me.toString().padStart(2,"0")}`:`${ne}:${me.toString().padStart(2,"0")}`},b=T=>{navigator.clipboard.writeText(T).then(()=>{})},j=()=>{p(T=>({...T,participants:[...T.participants,""]}))},se=T=>{p(L=>({...L,participants:L.participants.filter((ne,me)=>me!==T)}))},je=(T,L)=>{p(ne=>({...ne,participants:ne.participants.map((me,jt)=>jt===T?L:me)}))};return d.jsxs("div",{className:"session-manager",children:[d.jsxs("div",{className:"session-header",children:[d.jsx("h2",{children:"🔐 Cipher Sessions"}),d.jsx("p",{children:"Create or join encrypted messaging sessions with cipher codes"})]}),d.jsxs("div",{className:"session-tabs",children:[d.jsx("button",{className:`tab ${l==="create"?"active":""}`,onClick:()=>o("create"),children:"Create Session"}),d.jsx("button",{className:`tab ${l==="join"?"active":""}`,onClick:()=>o("join"),children:"Join Session"}),d.jsxs("button",{className:`tab ${l==="active"?"active":""}`,onClick:()=>o("active"),children:["Active Sessions (",a.length,")"]})]}),l==="create"&&d.jsxs("div",{className:"tab-content",children:[d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:"Create New Cipher Session"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Session Label"}),d.jsx("input",{type:"text",value:h.label,onChange:T=>p(L=>({...L,label:T.target.value})),placeholder:"e.g., Project Alpha Discussion"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Cipher Algorithm"}),d.jsxs("select",{value:h.algorithm,onChange:T=>p(L=>({...L,algorithm:T.target.value})),children:[d.jsx("option",{value:"aead",children:"AEAD (ChaCha20-Poly1305) - Recommended"}),d.jsx("option",{value:"caesar",children:"Caesar Cipher - Classic"}),d.jsx("option",{value:"vigenere",children:"Vigenère Cipher - Classic"}),d.jsx("option",{value:"otp",children:"One-Time Pad - Maximum Security"})]})]}),h.algorithm==="caesar"&&d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Caesar Shift"}),d.jsx("input",{type:"number",value:h.shift,onChange:T=>p(L=>({...L,shift:parseInt(T.target.value)||0})),min:"-25",max:"25"})]}),h.algorithm==="vigenere"&&d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Keyword"}),d.jsx("input",{type:"text",value:h.keyword,onChange:T=>p(L=>({...L,keyword:T.target.value})),placeholder:"Secret keyword"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Session Duration (minutes)"}),d.jsx("input",{type:"number",value:h.ttl_minutes,onChange:T=>p(L=>({...L,ttl_minutes:parseInt(T.target.value)||60})),min:"5",max:"1440"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Participants"}),h.participants.map((T,L)=>d.jsxs("div",{className:"participant-input",children:[d.jsx("input",{type:"text",value:T,onChange:ne=>je(L,ne.target.value),placeholder:"Identity fingerprint or email"}),h.participants.length>1&&d.jsx("button",{type:"button",onClick:()=>se(L),className:"remove-btn",children:"×"})]},L)),d.jsx("button",{type:"button",onClick:j,className:"add-participant",children:"+ Add Participant"})]}),d.jsxs("div",{className:"form-group danger-section",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:h.embedSecret,onChange:T=>p(L=>({...L,embedSecret:T.target.checked,confirmDanger:!1}))}),"⚠️ Embed secret in cipher code (DANGEROUS)"]}),d.jsx("p",{className:"warning-text",children:"Only check this if you understand the security risks. The secret will be included in plaintext in the cipher code."})]}),d.jsx("button",{onClick:N,disabled:c,className:"primary-btn",children:c?"Creating...":"Create Session & Generate Code"})]}),w&&d.jsxs("div",{className:"generated-code-section",children:[d.jsx("h3",{children:"🎯 Session Created Successfully!"}),d.jsxs("div",{className:"code-display",children:[d.jsxs("div",{className:"qr-section",children:[d.jsx("h4",{children:"QR Code"}),d.jsx("img",{src:w.qrDataUrl,alt:"Session QR Code",className:"qr-code"})]}),d.jsxs("div",{className:"text-code-section",children:[d.jsx("h4",{children:"Cipher Code"}),d.jsxs("div",{className:"code-text",children:[d.jsx("code",{children:w.code.short_code}),d.jsx("button",{onClick:()=>b(w.code.short_code),className:"copy-btn",children:"📋 Copy"})]})]})]}),d.jsxs("div",{className:"sharing-instructions",children:[d.jsx("h4",{children:"📤 How to Share"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Share the QR code or text code with participants"}),d.jsx("li",{children:"Participants scan the QR or enter the code to join"}),d.jsx("li",{children:"Keep the code secure - anyone with it can read session messages"}),d.jsxs("li",{children:["The session will expire in ",h.ttl_minutes," minutes"]})]})]})]})]}),l==="join"&&d.jsx("div",{className:"tab-content",children:d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:"Join Cipher Session"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Cipher Code"}),d.jsx("textarea",{value:m.cipherCode,onChange:T=>v(L=>({...L,cipherCode:T.target.value})),placeholder:"Enter cipher code or scan QR code",rows:4})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Passphrase (if required)"}),d.jsx("input",{type:"password",value:m.passphrase,onChange:T=>v(L=>({...L,passphrase:T.target.value})),placeholder:"Enter passphrase if cipher requires it"})]}),d.jsx("button",{onClick:O,disabled:c,className:"primary-btn",children:c?"Joining...":"Join Session"})]})}),l==="active"&&d.jsxs("div",{className:"tab-content",children:[d.jsx("h3",{children:"Active Sessions"}),a.length===0?d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:"No active cipher sessions"}),d.jsx("p",{children:"Create a new session or join an existing one to get started."})]}):d.jsx("div",{className:"sessions-list",children:a.map(T=>d.jsxs("div",{className:`session-card ${T.is_expired?"expired":""}`,children:[d.jsxs("div",{className:"session-header",children:[d.jsx("h4",{children:T.label}),d.jsxs("div",{className:"session-status",children:[d.jsx("span",{className:`algorithm-badge ${T.algorithm_type.toLowerCase()}`,children:T.algorithm_type}),d.jsxs("span",{className:"time-remaining",children:["⏱️ ",C(T.remaining_seconds)]})]})]}),d.jsxs("div",{className:"session-details",children:[d.jsxs("p",{children:["Participants: ",T.participants.length]}),d.jsxs("p",{children:["Messages: ",T.message_count]}),d.jsxs("p",{children:["Session ID: ",d.jsxs("code",{children:[T.session_id.slice(0,8),"..."]})]})]}),d.jsx("div",{className:"session-actions",children:d.jsx("button",{onClick:()=>D(T.session_id),className:"danger-btn",disabled:T.is_expired,children:"🔥 End Session"})})]},T.session_id))})]}),g&&d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"danger-modal",children:[d.jsx("h3",{children:"⚠️ SECURITY WARNING ⚠️"}),d.jsxs("div",{className:"warning-content",children:[d.jsx("p",{children:d.jsx("strong",{children:"You are about to embed secrets in the cipher code!"})}),d.jsx("p",{children:"This means:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"🚨 The secret will be stored in PLAINTEXT in the code"}),d.jsx("li",{children:"🚨 Anyone who sees the code can read ALL session messages"}),d.jsx("li",{children:"🚨 The code becomes extremely sensitive material"}),d.jsx("li",{children:"🚨 This defeats the purpose of cipher security"})]}),d.jsx("p",{children:d.jsx("strong",{children:"Only proceed if you understand these risks and have no alternative!"})}),d.jsx("div",{className:"confirmation-section",children:d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:h.confirmDanger,onChange:T=>p(L=>({...L,confirmDanger:T.target.checked}))}),"I understand the security risks and choose to proceed anyway"]})})]}),d.jsxs("div",{className:"modal-actions",children:[d.jsx("button",{onClick:()=>x(!1),className:"secondary-btn",children:"Cancel"}),d.jsx("button",{onClick:()=>{x(!1),h.confirmDanger&&N()},disabled:!h.confirmDanger,className:"danger-btn",children:"Proceed with Danger"})]})]})})]})};const Xw=({identity:t,onError:e})=>{const[n,r]=P.useState("direct"),[i,s]=P.useState([]),[l,o]=P.useState(null),[a,u]=P.useState([]),[c,f]=P.useState(""),[h,p]=P.useState(""),[m,v]=P.useState(!1),[w,y]=P.useState(!1),[g,x]=P.useState(""),[k,N]=P.useState(""),[O,D]=P.useState({}),[C,b]=P.useState(null),j=P.useRef(null);P.useEffect(()=>{je()},[]),P.useEffect(()=>{l&&T(l.fingerprint)},[l]),P.useEffect(()=>{se()},[a]);const se=()=>{var S;(S=j.current)==null||S.scrollIntoView({behavior:"smooth"})},je=async()=>{try{const S=await Z("get_contacts");s(S)}catch{console.log("No contacts found")}},T=async S=>{try{const A=await Z("get_messages",{contactFingerprint:S});u(A)}catch{console.log("No messages found"),u([])}},L=async()=>{if(!g.trim()||!k.trim()){e("Contact fingerprint and name are required");return}try{const S={fingerprint:g.trim(),name:k.trim(),public_key:""};await Z("add_contact",{contact:S}),await je(),x(""),N(""),y(!1)}catch(S){e(`Failed to add contact: ${S}`)}},ne=async()=>{if(n==="sessions"&&C)return me();if(!l||!c.trim()||!h){e("Please select a contact, enter a message, and provide passphrase");return}try{v(!0);const S={message:c.trim(),recipient_public_key:l.public_key||l.fingerprint,passphrase:h},A=await Z("encrypt_message",S),_={id:Date.now().toString(),sender_fingerprint:t.fingerprint,recipient_fingerprint:l.fingerprint,content:c.trim(),timestamp:Date.now(),encrypted_content:JSON.stringify(A)};await Z("store_message",{message:_}),await T(l.fingerprint),f(""),p("")}catch(S){e(`Failed to send message: ${S}`)}finally{v(!1)}},me=async()=>{if(!C||!c.trim()){e("Please select a session and enter a message");return}try{v(!0);const S=await Z("encrypt_session_message",{session_id:C,plaintext:c.trim()});if(S.success){const A={id:Date.now().toString(),sender_fingerprint:t.fingerprint,recipient_fingerprint:C,content:c.trim(),timestamp:Date.now(),encrypted_content:JSON.stringify(S.data)};D(_=>({..._,[C]:[..._[C]||[],A]})),f("")}else e(S.error||"Failed to encrypt session message")}catch(S){e(`Failed to send session message: ${S}`)}finally{v(!1)}},jt=S=>{const A=new Date(S),q=new Date().getTime()-A.getTime(),Y=Math.floor(q/(1e3*60*60*24));return Y===0?A.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Y===1?"Yesterday":Y<7?A.toLocaleDateString([],{weekday:"short"}):A.toLocaleDateString([],{month:"short",day:"numeric"})};return d.jsxs("div",{className:"message-center",children:[d.jsx("div",{className:"message-center-header",children:d.jsxs("div",{className:"message-tabs",children:[d.jsx("button",{className:`tab-button ${n==="direct"?"active":""}`,onClick:()=>r("direct"),children:"🔗 Direct Messages"}),d.jsx("button",{className:`tab-button ${n==="sessions"?"active":""}`,onClick:()=>r("sessions"),children:"🔐 Cipher Sessions"})]})}),n==="direct"&&d.jsxs("div",{className:"message-center-content",children:[d.jsxs("div",{className:"contacts-sidebar",children:[d.jsxs("div",{className:"contacts-header",children:[d.jsx("h3",{children:"Contacts"}),d.jsx("button",{onClick:()=>y(!0),className:"add-contact-button",children:"+"})]}),d.jsx("div",{className:"contacts-list",children:i.map(S=>d.jsxs("div",{className:`contact-item ${(l==null?void 0:l.fingerprint)===S.fingerprint?"active":""}`,onClick:()=>o(S),children:[d.jsx("div",{className:"contact-name",children:S.name}),d.jsxs("div",{className:"contact-fingerprint",children:[S.fingerprint.slice(0,8),"..."]})]},S.fingerprint))}),i.length===0&&d.jsx("div",{className:"no-contacts",children:"No contacts yet. Add a contact to start messaging."})]}),d.jsx("div",{className:"messages-main",children:l?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"messages-header",children:[d.jsx("h3",{children:l.name}),d.jsx("span",{className:"contact-fingerprint",children:l.fingerprint})]}),d.jsxs("div",{className:"messages-container",children:[a.map(S=>d.jsxs("div",{className:`message ${S.sender_fingerprint===t.fingerprint?"sent":"received"}`,children:[d.jsx("div",{className:"message-content",children:S.sender_fingerprint===t.fingerprint?S.content:"[Encrypted - Need passphrase to decrypt]"}),d.jsx("div",{className:"message-timestamp",children:jt(S.timestamp)})]},S.id)),d.jsx("div",{ref:j})]}),d.jsxs("div",{className:"message-input-container",children:[d.jsx("div",{className:"passphrase-input-container",children:d.jsx("input",{type:"password",value:h,onChange:S=>p(S.target.value),placeholder:"Encryption passphrase...",className:"passphrase-input small"})}),d.jsxs("div",{className:"message-input-group",children:[d.jsx("textarea",{value:c,onChange:S=>f(S.target.value),placeholder:"Type your encrypted message...",className:"message-input",rows:3,onKeyPress:S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),ne())}}),d.jsx("button",{onClick:ne,disabled:m||!c.trim()||!h,className:"send-button",children:m?"🔒":"📤"})]})]})]}):d.jsxs("div",{className:"no-contact-selected",children:[d.jsx("h3",{children:"Select a contact to start messaging"}),d.jsx("p",{children:"All messages are encrypted end-to-end with triple encryption layers."})]})})]}),w&&d.jsx("div",{className:"add-contact-overlay",children:d.jsxs("div",{className:"add-contact-dialog",children:[d.jsx("h3",{children:"Add Contact"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Contact Name"}),d.jsx("input",{type:"text",value:k,onChange:S=>N(S.target.value),placeholder:"Enter contact name..."})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Public Key Fingerprint"}),d.jsx("input",{type:"text",value:g,onChange:S=>x(S.target.value),placeholder:"Enter contact's fingerprint..."})]}),d.jsxs("div",{className:"dialog-actions",children:[d.jsx("button",{onClick:()=>y(!1),className:"cancel-button",children:"Cancel"}),d.jsx("button",{onClick:L,className:"add-button primary",disabled:!k.trim()||!g.trim(),children:"Add Contact"})]})]})}),n==="sessions"&&d.jsx(Gw,{onError:e,onSessionCreated:S=>b(S),onSessionJoined:S=>b(S),activeSession:C,sessionMessages:O,onSendMessage:(S,A)=>{b(S),f(A),me()}})]})};class Zw{constructor(){Jt(this,"status");Jt(this,"config");Jt(this,"onionServices");Jt(this,"circuits");Jt(this,"eventListeners");Jt(this,"controlSocket");Jt(this,"heartbeatInterval");this.status={connected:!1,bootstrapped:!1,bootstrapProgress:0,circuitCount:0,socksPort:9050,controlPort:9051},this.config={socksPort:9050,controlPort:9051,dataDirectory:"/tmp/ephemeral-tor",bridgeMode:!1,bridges:[],clientAuth:!0,isolateStreams:!0},this.onionServices=new Map,this.circuits=new Map,this.eventListeners=new Map,this.controlSocket=null,this.heartbeatInterval=null}async initialize(){try{return await this.connectToControl(),await this.authenticate(),await this.setupEventMonitoring(),this.startHeartbeat(),this.status.connected=!0,this.emit("statusChanged",this.status),!0}catch(e){return console.error("Failed to initialize Tor service:",e),this.status.error=e instanceof Error?e.message:"Unknown error",this.emit("statusChanged",this.status),!1}}async connectToControl(){return new Promise((e,n)=>{setTimeout(()=>{this.status.connected=!0,e()},1e3)})}async authenticate(){return new Promise(e=>{setTimeout(()=>{e()},500)})}async setupEventMonitoring(){this.simulateBootstrap(),this.monitorCircuits()}simulateBootstrap(){let e=0;const n=setInterval(()=>{e+=Math.random()*20,e>=100&&(e=100,this.status.bootstrapped=!0,clearInterval(n),this.emit("bootstrapComplete")),this.status.bootstrapProgress=Math.min(e,100),this.emit("statusChanged",this.status)},200)}monitorCircuits(){setInterval(()=>{const e=`circuit_${Date.now()}`,n={id:e,status:"BUILDING",path:[],purpose:"GENERAL",timeCreated:new Date};this.circuits.set(e,n),setTimeout(()=>{n.status="BUILT",n.path=["Guard","Middle","Exit"],n.timeToExtend=Math.random()*1e3+500,this.status.circuitCount=this.circuits.size,this.emit("circuitBuilt",n),this.emit("statusChanged",this.status)},1e3+Math.random()*2e3)},5e3)}startHeartbeat(){this.heartbeatInterval=window.setInterval(()=>{this.status.connected&&this.emit("heartbeat")},3e4)}async discoverOnionServices(){return[{address:"facebookcorewwwi.onion",port:443,name:"Facebook",publicKey:"mock_facebook_key",lastSeen:new Date,reachable:!0},{address:"duckduckgogg42ts.onion",port:443,name:"DuckDuckGo",publicKey:"mock_ddg_key",lastSeen:new Date,reachable:!0}].forEach(n=>{this.onionServices.set(n.address,n)}),this.emit("servicesDiscovered",Array.from(this.onionServices.values())),Array.from(this.onionServices.values())}async createHiddenService(e,n){const r=this.generateMockOnionAddress(),i={address:r,port:n,name:e,publicKey:`mock_key_${Date.now()}`,lastSeen:new Date,reachable:!0};return this.onionServices.set(r,i),this.status.onionAddress=r,this.emit("hiddenServiceCreated",i),this.emit("statusChanged",this.status),i}async testOnionService(e){try{await new Promise(r=>setTimeout(r,1e3+Math.random()*2e3));const n=this.onionServices.get(e);return n?(n.reachable=Math.random()>.2,n.lastSeen=new Date,this.emit("serviceTestComplete",{address:e,reachable:n.reachable}),n.reachable):!1}catch(n){return console.error(`Failed to test onion service ${e}:`,n),!1}}getStatus(){return{...this.status}}getOnionServices(){return Array.from(this.onionServices.values())}getCircuits(){return Array.from(this.circuits.values())}async configure(e){try{return this.config={...this.config,...e},console.log("Tor configuration updated:",this.config),this.emit("configChanged",this.config),!0}catch(n){return console.error("Failed to configure Tor:",n),!1}}async enableBridges(e){try{return this.config.bridgeMode=!0,this.config.bridges=e,console.log("Bridge mode enabled with bridges:",e),this.emit("bridgesEnabled",e),!0}catch(n){return console.error("Failed to enable bridges:",n),!1}}async newCircuit(){const e=`user_circuit_${Date.now()}`,n={id:e,status:"BUILDING",path:[],purpose:"USER_CREATED",timeCreated:new Date};return this.circuits.set(e,n),setTimeout(()=>{n.status="BUILT",n.path=["Guard","Middle","Exit"],this.emit("circuitBuilt",n)},1e3+Math.random()*2e3),e}generateMockOnionAddress(){const e="abcdefghijklmnopqrstuvwxyz234567";let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n+".onion"}on(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(n)}off(e,n){const r=this.eventListeners.get(e);if(r){const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(i=>{try{i(n)}catch(s){console.error(`Error in event listener for ${e}:`,s)}})}async shutdown(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.controlSocket&&(this.controlSocket.close(),this.controlSocket=null),this.status.connected=!1,this.status.bootstrapped=!1,this.circuits.clear(),this.emit("shutdown"),this.eventListeners.clear()}}const J=new Zw,eS=({className:t})=>{const[e,n]=P.useState(J.getStatus()),[r,i]=P.useState(null),[s,l]=P.useState(!1),[o,a]=P.useState({enabled:!1,bridges:[""]});P.useEffect(()=>{u();const g=O=>{n(O)},x=O=>{i(O)},k=()=>{console.log("Tor bootstrap completed")},N=O=>{a({enabled:!0,bridges:O})};return J.on("statusChanged",g),J.on("configChanged",x),J.on("bootstrapComplete",k),J.on("bridgesEnabled",N),()=>{J.off("statusChanged",g),J.off("configChanged",x),J.off("bootstrapComplete",k),J.off("bridgesEnabled",N)}},[]);const u=async()=>{try{await J.initialize()}catch(g){console.error("Failed to initialize Tor:",g)}},c=async()=>{try{await J.newCircuit()}catch(g){console.error("Failed to create new circuit:",g)}},f=async()=>{const g=o.bridges.filter(x=>x.trim()!=="");if(g.length!==0)try{await J.enableBridges(g)}catch(x){console.error("Failed to enable bridges:",x)}},h=(g,x)=>{a(k=>({...k,bridges:k.bridges.map((N,O)=>O===g?x:N)}))},p=()=>{a(g=>({...g,bridges:[...g.bridges,""]}))},m=g=>{a(x=>({...x,bridges:x.bridges.filter((k,N)=>N!==g)}))},v=()=>e.connected?e.bootstrapped?"text-green-400":"text-yellow-400":"text-red-400",w=()=>e.connected?e.bootstrapped?"Connected":`Bootstrapping... ${Math.round(e.bootstrapProgress)}%`:"Disconnected",y=()=>e.connected?e.bootstrapped?"🟢":"🟡":"🔴";return d.jsxs("div",{className:`bg-gray-800 rounded-lg p-6 ${t}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[d.jsx("span",{children:"Tor Status"}),d.jsx("span",{className:"text-2xl",children:y()})]}),d.jsx("button",{onClick:()=>l(!s),className:`px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white text-sm
                   rounded transition-colors`,children:s?"Hide Advanced":"Show Advanced"})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:`text-2xl font-bold ${v()}`,children:w()}),d.jsx("div",{className:"text-sm text-gray-400",children:"Connection Status"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-white",children:e.circuitCount}),d.jsx("div",{className:"text-sm text-gray-400",children:"Active Circuits"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-white",children:e.socksPort}),d.jsx("div",{className:"text-sm text-gray-400",children:"SOCKS Port"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-white",children:e.controlPort}),d.jsx("div",{className:"text-sm text-gray-400",children:"Control Port"})]})]}),e.connected&&!e.bootstrapped&&d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-white font-medium",children:"Bootstrap Progress"}),d.jsxs("span",{className:"text-yellow-400",children:[Math.round(e.bootstrapProgress),"%"]})]}),d.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:d.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:`${e.bootstrapProgress}%`}})})]}),e.onionAddress&&d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"Your Onion Address"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("code",{className:"flex-1 px-3 py-2 bg-gray-700 rounded text-sm text-green-400 font-mono",children:e.onionAddress}),d.jsx("button",{onClick:()=>navigator.clipboard.writeText(e.onionAddress),className:`px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm
                       rounded transition-colors`,children:"Copy"})]})]}),e.error&&d.jsxs("div",{className:"mb-6 p-3 bg-red-900/50 border border-red-700 rounded",children:[d.jsx("div",{className:"text-red-400 font-medium",children:"Error"}),d.jsx("div",{className:"text-red-300 text-sm",children:e.error})]}),d.jsxs("div",{className:"flex space-x-3 mb-6",children:[d.jsx("button",{onClick:c,disabled:!e.bootstrapped,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700
                   text-white rounded transition-colors`,children:"New Circuit"}),d.jsx("button",{onClick:u,disabled:e.connected,className:`px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-700
                   text-white rounded transition-colors`,children:"Reconnect"})]}),s&&d.jsxs("div",{className:"space-y-6 pt-6 border-t border-gray-700",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:"Advanced Configuration"}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-md font-medium text-white mb-3",children:"Bridge Configuration"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",id:"enableBridges",checked:o.enabled,onChange:g=>a(x=>({...x,enabled:g.target.checked})),className:`rounded bg-gray-700 border-gray-600 text-blue-600
                           focus:ring-blue-500 focus:ring-offset-gray-800`}),d.jsx("label",{htmlFor:"enableBridges",className:"text-white",children:"Enable Bridges (for censorship resistance)"})]}),o.enabled&&d.jsxs("div",{className:"space-y-2",children:[o.bridges.map((g,x)=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"text",value:g,onChange:k=>h(x,k.target.value),placeholder:"obfs4 IP:PORT fingerprint cert=CERT iat-mode=0",className:`flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded
                                 text-white placeholder-gray-400 focus:outline-none focus:ring-2
                                 focus:ring-blue-500`}),o.bridges.length>1&&d.jsx("button",{onClick:()=>m(x),className:`px-2 py-2 bg-red-600 hover:bg-red-700 text-white
                                   rounded transition-colors`,children:"×"})]},x)),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:p,className:`px-3 py-1 bg-gray-600 hover:bg-gray-500 text-white
                               text-sm rounded transition-colors`,children:"Add Bridge"}),d.jsx("button",{onClick:f,className:`px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white
                               text-sm rounded transition-colors`,children:"Apply Bridges"})]})]})]})]}),r&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-md font-medium text-white mb-3",children:"Current Configuration"}),d.jsx("div",{className:"bg-gray-700 rounded p-4",children:d.jsx("pre",{className:"text-sm text-gray-300 overflow-x-auto",children:JSON.stringify(r,null,2)})})]})]})]})},tS=({className:t})=>{const[e,n]=P.useState([]),[r,i]=P.useState([]),[s,l]=P.useState(!1),[o,a]=P.useState(""),[u,c]=P.useState(8443),[f,h]=P.useState(null);P.useEffect(()=>{p();const k=C=>{n(C),l(!1)},N=C=>{n(b=>[...b,C])},O=C=>{i(b=>[...b,C])},D=C=>{n(b=>b.map(j=>j.address===C.address?{...j,reachable:C.reachable,lastSeen:new Date}:j)),h(null)};return J.on("servicesDiscovered",k),J.on("hiddenServiceCreated",N),J.on("circuitBuilt",O),J.on("serviceTestComplete",D),()=>{J.off("servicesDiscovered",k),J.off("hiddenServiceCreated",N),J.off("circuitBuilt",O),J.off("serviceTestComplete",D)}},[]);const p=async()=>{const k=J.getOnionServices();n(k);const N=J.getCircuits();i(N)},m=async()=>{l(!0);try{await J.discoverOnionServices()}catch(k){console.error("Failed to discover services:",k),l(!1)}},v=async()=>{if(o.trim())try{await J.createHiddenService(o,u),a(""),c(8443)}catch(k){console.error("Failed to create hidden service:",k)}},w=async k=>{h(k);try{await J.testOnionService(k)}catch(N){console.error("Failed to test service:",N),h(null)}},y=k=>k.length>20?`${k.substring(0,16)}...${k.substring(k.length-10)}`:k,g=k=>{if(k.reachable){const N=Date.now()-k.lastSeen.getTime();if(N<6e4)return"text-green-400";if(N<3e5)return"text-yellow-400"}return"text-red-400"},x=k=>{switch(k){case"BUILT":return"text-green-400";case"BUILDING":return"text-yellow-400";case"FAILED":return"text-red-400";case"CLOSED":return"text-gray-400";default:return"text-gray-400"}};return d.jsxs("div",{className:`space-y-6 ${t}`,children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-2xl font-bold text-white",children:"Onion Services"}),d.jsx("div",{className:"flex space-x-3",children:d.jsx("button",{onClick:m,disabled:s,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800
                     text-white rounded-lg transition-colors`,children:s?"Discovering...":"Discover Services"})})]}),d.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Create Hidden Service"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Service Name"}),d.jsx("input",{type:"text",value:o,onChange:k=>a(k.target.value),className:`w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg
                       text-white placeholder-gray-400 focus:outline-none focus:ring-2
                       focus:ring-blue-500`,placeholder:"my-service"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Local Port"}),d.jsx("input",{type:"number",value:u,onChange:k=>c(parseInt(k.target.value)||8443),className:`w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg
                       text-white focus:outline-none focus:ring-2 focus:ring-blue-500`,min:"1",max:"65535"})]}),d.jsx("div",{className:"flex items-end",children:d.jsx("button",{onClick:v,disabled:!o.trim(),className:`w-full px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-700
                       text-white rounded-lg transition-colors`,children:"Create Service"})})]})]}),d.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[d.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Discovered Services (",e.length,")"]}),e.length===0?d.jsx("div",{className:"text-center py-8 text-gray-400",children:'No onion services discovered yet. Click "Discover Services" to start scanning.'}):d.jsx("div",{className:"space-y-3",children:e.map(k=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[d.jsx("div",{className:"flex-1",children:d.jsx("div",{className:"flex items-center space-x-3",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-medium text-white",children:k.name}),d.jsx("p",{className:"text-sm text-gray-300 font-mono",children:y(k.address)}),d.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[d.jsxs("span",{className:"text-xs text-gray-400",children:["Port: ",k.port]}),d.jsx("span",{className:`text-xs ${g(k)}`,children:k.reachable?"Reachable":"Unreachable"}),d.jsxs("span",{className:"text-xs text-gray-400",children:["Last seen: ",k.lastSeen.toLocaleTimeString()]})]})]})})}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>w(k.address),disabled:f===k.address,className:`px-3 py-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800
                             text-white text-sm rounded transition-colors`,children:f===k.address?"Testing...":"Test"}),d.jsx("button",{onClick:()=>navigator.clipboard.writeText(k.address),className:`px-3 py-1 bg-gray-600 hover:bg-gray-500 text-white
                             text-sm rounded transition-colors`,children:"Copy"})]})]},k.address))})]}),d.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[d.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Active Circuits (",r.length,")"]}),r.length===0?d.jsx("div",{className:"text-center py-4 text-gray-400",children:"No active circuits"}):d.jsxs("div",{className:"space-y-2",children:[r.slice(-5).map(k=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("span",{className:"text-sm font-mono text-gray-300",children:k.id}),d.jsx("span",{className:`text-sm ${x(k.status)}`,children:k.status}),d.jsx("span",{className:"text-sm text-gray-400",children:k.purpose})]}),k.path.length>0&&d.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Path: ",k.path.join(" → ")]})]}),d.jsx("div",{className:"text-xs text-gray-400",children:k.timeCreated.toLocaleTimeString()})]},k.id)),r.length>5&&d.jsxs("div",{className:"text-center text-sm text-gray-400 pt-2",children:["... and ",r.length-5," more circuits"]})]})]})]})};function nS(){const[t,e]=P.useState(!1),[n,r]=P.useState(null),[i,s]=P.useState("messages"),[l,o]=P.useState(!0),[a,u]=P.useState(null);P.useEffect(()=>{c()},[]);const c=async()=>{try{o(!0);const g=await Z("is_authenticated_cmd");e(g),g&&await f()}catch(g){console.log("Authentication check failed:",g),e(!1)}finally{o(!1)}},f=async()=>{try{const g=await Z("get_current_identity");r(g)}catch{console.log("No existing identity found")}},h=g=>{r(g),u(null)},p=()=>{e(!0),u(null),f()},m=()=>{r(null),s("messages")},v=async()=>{try{await Z("logout_cmd"),e(!1),r(null),s("messages")}catch(g){console.error("Logout failed:",g),w("Failed to logout properly")}},w=g=>{u(g)},y=()=>{u(null)};return l?d.jsxs("div",{className:"app-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("h2",{style:{color:"var(--color-primary)",fontSize:"1.5rem",fontWeight:"bold"},children:"✝️ Jesus is King"}),d.jsx("p",{children:"Initializing secure environment..."})]}):t?d.jsxs("div",{className:"app",children:[d.jsxs("header",{className:"app-header",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("h1",{children:"Ephemeral Messenger"}),d.jsx("span",{className:"brand-tagline",children:"✝️ Jesus is King"})]}),d.jsxs("div",{className:"header-info",children:[n&&d.jsxs("span",{className:"identity-info",children:["Identity: ",n.fingerprint.slice(0,8),"..."]}),d.jsx("span",{className:"security-indicator",children:"🔒 Secure"})]})]}),a&&d.jsxs("div",{className:"error-banner",children:[d.jsx("span",{children:a}),d.jsx("button",{onClick:y,className:"error-close",children:"×"})]}),d.jsx("main",{className:"app-main",children:n?d.jsxs(d.Fragment,{children:[d.jsxs("nav",{className:"app-nav",children:[d.jsx("button",{className:`nav-button ${i==="messages"?"active":""}`,onClick:()=>s("messages"),children:"Messages"}),d.jsx("button",{className:`nav-button ${i==="documents"?"active":""}`,onClick:()=>s("documents"),children:"Documents"}),d.jsx("button",{className:`nav-button ${i==="tor"?"active":""}`,onClick:()=>s("tor"),children:"Tor Status"}),d.jsx("button",{className:`nav-button ${i==="network"?"active":""}`,onClick:()=>s("network"),children:"Network"}),d.jsx("button",{className:`nav-button ${i==="prayer"?"active":""}`,onClick:()=>s("prayer"),children:"🙏 Prayer"}),d.jsx("button",{className:`nav-button ${i==="moral"?"active":""}`,onClick:()=>s("moral"),children:"📜 Moral Code"}),d.jsx("button",{className:"nav-button logout",onClick:m,children:"Clear Identity"}),d.jsx("button",{className:"nav-button logout",onClick:v,children:"Logout"})]}),d.jsxs("div",{className:"app-content",children:[i==="messages"&&d.jsx(Xw,{identity:n,onError:w}),i==="documents"&&d.jsx(Yw,{identity:n,onError:w}),i==="tor"&&d.jsx(eS,{}),i==="network"&&d.jsx(tS,{}),i==="prayer"&&d.jsx("div",{className:"prayer-content",children:d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"card-header",children:[d.jsx("h2",{children:"🙏 Prayer Center"}),d.jsx("p",{children:"Spiritual communication and reflection"})]}),d.jsxs("div",{className:"card-content",children:[d.jsxs("div",{className:"daily-verse",children:[d.jsx("p",{children:'"For where two or three gather in my name, there am I with them."'}),d.jsx("div",{className:"verse-reference",children:"— Matthew 18:20"})]}),d.jsx("p",{children:"Prayer features will be available in the next update. This section will include:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"• Daily verses and spiritual guidance"}),d.jsx("li",{children:"• Encrypted prayer tracking"}),d.jsx("li",{children:"• Prayer categories and sessions"}),d.jsx("li",{children:"• Answer tracking and statistics"})]})]})]})}),i==="moral"&&d.jsx("div",{className:"moral-content",children:d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"card-header",children:[d.jsx("h2",{children:"📜 Moral Code of Conduct"}),d.jsx("p",{children:"Biblical principles for ethical digital communication"})]}),d.jsxs("div",{className:"card-content",children:[d.jsxs("div",{className:"daily-verse",children:[d.jsx("p",{children:'"Let your light shine before others, that they may see your good deeds and glorify your Father in heaven."'}),d.jsx("div",{className:"verse-reference",children:"— Matthew 5:16"})]}),d.jsx("h3",{children:"Core Principles:"}),d.jsxs("ul",{children:[d.jsxs("li",{children:["• ",d.jsx("strong",{children:"Truthfulness:"})," Speak truth in love, avoiding deception"]}),d.jsxs("li",{children:["• ",d.jsx("strong",{children:"Love and Respect:"})," Treat all persons with dignity"]}),d.jsxs("li",{children:["• ",d.jsx("strong",{children:"Confidentiality:"})," Protect sensitive information"]}),d.jsxs("li",{children:["• ",d.jsx("strong",{children:"Purity:"})," Maintain moral purity in communications"]}),d.jsxs("li",{children:["• ",d.jsx("strong",{children:"Wisdom:"})," Exercise godly wisdom in digital interactions"]}),d.jsxs("li",{children:["• ",d.jsx("strong",{children:"Protection:"})," Defend those who cannot protect themselves"]}),d.jsxs("li",{children:["• ",d.jsx("strong",{children:"Stewardship:"})," Use technology to glorify God"]}),d.jsxs("li",{children:["• ",d.jsx("strong",{children:"Reconciliation:"})," Seek peace and forgiveness"]})]})]})]})})]})]}):d.jsx(y1,{onIdentityCreated:h,onError:w})}),d.jsx("footer",{className:"app-footer",children:d.jsx("p",{children:"Zero persistence • Triple encryption • Hardware token ready • Jesus is King ✝️"})})]}):d.jsx(g1,{onLoginSuccess:p})}Go.createRoot(document.getElementById("root")).render(d.jsx(ry.StrictMode,{children:d.jsx(nS,{})}));
